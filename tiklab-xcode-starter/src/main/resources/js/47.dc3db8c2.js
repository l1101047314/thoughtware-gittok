(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1575:function(e,r,t){"use strict";t.r(r);var n=t(0),l=t.n(n),i=t(388),a=t(321),o=t(56),c=t(698),u=t(886),m=t(702),s=t(744),b=t(1042),f=t(1043),d=t(1044),N=(t(158),t(135)),y=(t(90),t(34)),p=(t(134),t(21)),v=t(114),_=t(695),h="/Users/limingliang/Desktop/workProject/tiklab-xcode-ui/src/repository/file/components/BlobDelModal.js";function g(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,l,i,a,o=[],c=!0,u=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(e){u=!0,l=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw l}}return o}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return E(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return E(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var j=function(e){var r=e.delVisible,t=e.setDelVisible,i=e.blobFile,a=g(p.default.useForm(),1)[0],o=g(Object(n.useState)(0),2),c=o[0],u=o[1];Object(n.useEffect)((function(){return u(Object(m.b)()),function(){window.onresize=null}}),[c]),Object(n.useEffect)((function(){r&&a.setFieldsValue({commitMessage:"删除".concat(i&&i.fileName),commitBranch:"master"})}),[r]);var s=l.a.createElement(l.a.Fragment,null,l.a.createElement(_.a,{onClick:function(){return t(!1)},title:"取消",isMar:!0,__source:{fileName:h,lineNumber:42,columnNumber:13}}),l.a.createElement(_.a,{onClick:function(){a.validateFields().then((function(e){a.resetFields(),t(!1)}))},title:"确定",type:"primary",__source:{fileName:h,lineNumber:47,columnNumber:13}}));return l.a.createElement(N.default,{visible:r,onCancel:function(){return t(!1)},closable:!1,footer:s,style:{height:c,top:60},bodyStyle:{padding:0},className:"xcode bold-del-modal",destroyOnClose:!0,__source:{fileName:h,lineNumber:63,columnNumber:9}},l.a.createElement("div",{className:"bold-del-up",__source:{fileName:h,lineNumber:73,columnNumber:13}},l.a.createElement("div",{__source:{fileName:h,lineNumber:74,columnNumber:17}},"删除",i&&i.fileName),l.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return t(!1)},__source:{fileName:h,lineNumber:75,columnNumber:17}},l.a.createElement(v.a,{__source:{fileName:h,lineNumber:76,columnNumber:21}}))),l.a.createElement("div",{className:"bold-del-content",__source:{fileName:h,lineNumber:79,columnNumber:13}},l.a.createElement(p.default,{form:a,layout:"vertical",autoComplete:"off",__source:{fileName:h,lineNumber:80,columnNumber:17}},l.a.createElement(p.default.Item,{label:"提交信息",name:"commitMessage",rules:[{required:!0,message:"提交信息不能为空"}],__source:{fileName:h,lineNumber:81,columnNumber:21}},l.a.createElement(y.default,{__source:{fileName:h,lineNumber:83,columnNumber:22}})),l.a.createElement(p.default.Item,{label:"提交分支",name:"commitBranch",rules:[{required:!0,message:"提交分支不能为空"}],__source:{fileName:h,lineNumber:84,columnNumber:21}},l.a.createElement(y.default,{__source:{fileName:h,lineNumber:86,columnNumber:22}})))))},O=t(750),w="/Users/limingliang/Desktop/workProject/tiklab-xcode-ui/src/repository/file/components/Blob.js";function S(){return(S=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function I(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,l,i,a,o=[],c=!0,u=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(e){u=!0,l=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw l}}return o}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return k(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}r.default=Object(o.inject)("repositoryStore","fileStore")(Object(o.observer)((function(e){var r=e.repositoryStore,t=e.fileStore,o=e.location,N=e.match,y=r.repositoryInfo,p=r.webUrl,v=t.readFile,_=t.blobFile,h=t.findCloneAddress,g=t.cloneAddress,E=t.findLatelyBranchCommit,k=t.latelyBranchCommit,A=N.params.branch,C=Object(O.c)(A,y),x=Object(O.d)(o,y.rpyId+"/blob/"),B=Object(O.d)(o,y.rpyId+"/blob/"+A),M=I(Object(n.useState)(!1),2),P=M[0],F=M[1],L=I(Object(n.useState)(!0),2),R=L[0],D=L[1];Object(n.useEffect)((function(){y.name&&(v({rpyId:y.rpyId,fileAddress:B[1],commitBranch:C,findCommitId:Object(O.b)(A)}).then((function(){return D(!1)})),E({rpyId:y.rpyId,branch:C,findCommitId:Object(O.b)(A)}),h(y.rpyId))}),[y.name]);return l.a.createElement("div",{className:"blob",__source:{fileName:w,lineNumber:58,columnNumber:9}},l.a.createElement("div",{className:"blob-content xcode-home-limited xcode",__source:{fileName:w,lineNumber:59,columnNumber:13}},l.a.createElement(c.a,{firstItem:"Code",goBack:function(){return e.history.go(-1)},__source:{fileName:w,lineNumber:60,columnNumber:17}}),l.a.createElement("div",{className:"blob-content-head",__source:{fileName:w,lineNumber:61,columnNumber:17}},l.a.createElement(f.a,S({},e,{repositoryInfo:y,webUrl:p,branch:A,fileAddress:B,type:"blob",__source:{fileName:w,lineNumber:62,columnNumber:21}})),l.a.createElement("div",{className:"blob-head-right",__source:{fileName:w,lineNumber:70,columnNumber:21}},l.a.createElement("div",{className:"blob-clone",__source:{fileName:w,lineNumber:71,columnNumber:25}},l.a.createElement(d.a,{cloneAddress:g,__source:{fileName:w,lineNumber:72,columnNumber:29}})))),l.a.createElement(b.a,S({},e,{latelyBranchCommit:k,webUrl:p,__source:{fileName:w,lineNumber:76,columnNumber:17}})),l.a.createElement("div",{className:"blob-content-editor",__source:{fileName:w,lineNumber:77,columnNumber:17}},l.a.createElement("div",{className:"blob-editor-title",__source:{fileName:w,lineNumber:78,columnNumber:21}},l.a.createElement("div",{className:"editor-title-left",__source:{fileName:w,lineNumber:79,columnNumber:25}},l.a.createElement("span",{className:"editor-title-icon",__source:{fileName:w,lineNumber:80,columnNumber:29}},l.a.createElement(i.a,{__source:{fileName:w,lineNumber:80,columnNumber:65}})),l.a.createElement("span",{className:"editor-title-text",__source:{fileName:w,lineNumber:81,columnNumber:29}},_&&_.fileName),l.a.createElement("span",{className:"editor-title-size",__source:{fileName:w,lineNumber:82,columnNumber:29}},_&&_.fileSize),l.a.createElement("span",{className:"editor-title-copy",__source:{fileName:w,lineNumber:83,columnNumber:29}},l.a.createElement(a.a,{onClick:function(){return Object(m.c)(_&&_.fileName)},__source:{fileName:w,lineNumber:84,columnNumber:33}}))),l.a.createElement("div",{className:"editor-title-right",__source:{fileName:w,lineNumber:87,columnNumber:25}},Object(O.b)(A)?null:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"editor-title-item",onClick:function(){e.history.push("/index/repository/".concat(y.rpyId,"/edit/").concat(x[1]))},__source:{fileName:w,lineNumber:91,columnNumber:41}},"编辑"),l.a.createElement("div",{className:"editor-title-item",__source:{fileName:w,lineNumber:92,columnNumber:41}},"WEB IDE"),l.a.createElement("div",{className:"editor-title-item",onClick:function(){return F(!0)},__source:{fileName:w,lineNumber:93,columnNumber:41}},"删除"),l.a.createElement(j,{delVisible:P,setDelVisible:F,blobFile:_,__source:{fileName:w,lineNumber:94,columnNumber:41}})),l.a.createElement("div",{className:"editor-title-item",onClick:function(){return Object(m.c)(_&&_.fileMessage)},__source:{fileName:w,lineNumber:97,columnNumber:29}},"复制"),l.a.createElement("div",{className:"editor-title-item",__source:{fileName:w,lineNumber:98,columnNumber:29}},"下载"))),l.a.createElement("div",{className:"blob-editor-content",__source:{fileName:w,lineNumber:101,columnNumber:21}},R?l.a.createElement(s.b,{type:"table",__source:{fileName:w,lineNumber:103,columnNumber:41}}):l.a.createElement(u.a,{readOnly:!0,blobFile:_,__source:{fileName:w,lineNumber:104,columnNumber:29}})))))})))},886:function(e,r,t){"use strict";t.d(r,"a",(function(){return m})),t.d(r,"b",(function(){return s})),t.d(r,"c",(function(){return b}));var n=t(0),l=t.n(n),i=t(780),a=(t(1030),"/Users/limingliang/Desktop/workProject/tiklab-xcode-ui/src/common/editor/Monaco.js");function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,l,i,a,o=[],c=!0,u=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(e){u=!0,l=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw l}}return o}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var u=function(e){if(e)switch(e.fileType){case"md":return"markdown";case"sh":return"shell";case"ts":case"tsx":return"typescript";case"js":return"javascript";default:return e.fileType}},m=function(e){var r=e.blobFile,t=Object(n.useRef)(),o=Object(n.useRef)();Object(n.useEffect)((function(){return c(),function(){t.current.dispose(),t.current=void 0}}),[t.current]);var c=function(){try{t.current=i.editor.create(o.current,{value:r&&r.fileMessage,language:u(r),minimap:{enabled:!1},automaticLayout:!0,codeLens:!0,colorDecorators:!0,roundedSelection:!1,contextmenu:!1,quickSuggestions:!1,readOnly:!0,formatOnPaste:!1,overviewRulerBorder:!1,scrollBeyondLastLine:!0,theme:"vs"})}catch(e){}};return l.a.createElement("div",{ref:o,style:{height:"calc(100% - 20px)"},__source:{fileName:a,lineNumber:67,columnNumber:9}})},s=function(e){var r=e.setEditPosition,t=e.blobFile,c=e.previewValue,m=e.setPreviewValue,s=Object(n.useRef)(),b=Object(n.useRef)(),f=o(Object(n.useState)(""),2),d=f[0],N=f[1];Object(n.useEffect)((function(){return y(),N(c&&c),function(){s.current.dispose(),s.current=void 0}}),[s.current]);var y=function(){try{s.current=i.editor.create(b.current,{value:d&&d,language:u(t),minimap:{enabled:!1},automaticLayout:!0,codeLens:!0,colorDecorators:!0,contextmenu:!1,quickSuggestions:!1,readOnly:!1,formatOnPaste:!0,overviewRulerBorder:!1,scrollBeyondLastLine:!0,theme:"vs"}),s.current.onDidChangeModelContent((function(e){try{var t=s.current.getValue(),n=s.current.getPosition();m(t),r(n)}catch(e){}}))}catch(e){}};return l.a.createElement("div",{ref:b,style:{height:400},__source:{fileName:a,lineNumber:126,columnNumber:9}})},b=function(e){var r=e.newValue,t=e.blobFile,o=e.renderOverviewRuler,c=e.editPosition,m=Object(n.useRef)(),s=Object(n.useRef)();Object(n.useEffect)((function(){return b(),function(){m.current.dispose(),m.current=void 0}}),[]);var b=function(){try{m.current=i.editor.createDiffEditor(s.current,{value:"",originalModel:"",modified:"",minimap:{enabled:!1},readOnly:!0,automaticLayout:!0,quickSuggestions:!1,overviewRulerBorder:!1,scrollBeyondLastLine:!1,theme:"vs",lightbulb:{enabled:!1},renderSideBySide:!1,enableSplitViewResizing:!1,renderOverviewRuler:o}),m.current.setModel({original:i.editor.createModel(t&&t.fileMessage,u(t)),modified:i.editor.createModel(r&&r,u(t))}),m.current.revealLineInCenter(c&&c.lineNumber)}catch(e){}};return l.a.createElement("div",{ref:s,style:{height:400},__source:{fileName:a,lineNumber:179,columnNumber:9}})}},967:function(e,r){e.exports=function(e){if(!e.webpackPolyfill){var r=Object.create(e);r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),Object.defineProperty(r,"exports",{enumerable:!0}),r.webpackPolyfill=1}return r}},978:function(e,r){(function(r){e.exports=r}).call(this,{})}}]);