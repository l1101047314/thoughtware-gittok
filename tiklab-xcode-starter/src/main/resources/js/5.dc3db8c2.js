(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1e3:function(e,t,n){"use strict";var r=n(911),a=n.n(r),l=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function u(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(a.a[n[1]]||"/"===e.charAt(e.length-2))&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("--\x3e");return{type:"comment",comment:-1!==r?e.slice(4,r):""}}for(var u=new RegExp(l),i=null;null!==(i=u.exec(e));)if(i[0].trim())if(i[1]){var o=i[1].trim(),c=[o,""];o.indexOf("=")>-1&&(c=o.split("=")),t.attrs[c[0]]=c[1],u.lastIndex--}else i[2]&&(t.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return t}var i=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,o=/^\s*$/,c=Object.create(null);function f(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(f,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e"}}var d={parse:function(e,t){t||(t={}),t.components||(t.components=c);var n,r=[],a=[],l=-1,f=!1;if(0!==e.indexOf("<")){var d=e.indexOf("<");r.push({type:"text",content:-1===d?e:e.substring(0,d)})}return e.replace(i,(function(i,c){if(f){if(i!=="</"+n.name+">")return;f=!1}var d,s="/"!==i.charAt(1),p=i.startsWith("\x3c!--"),m=c+i.length,v=e.charAt(m);if(p){var g=u(i);return l<0?(r.push(g),r):((d=a[l]).children.push(g),r)}if(s&&(l++,"tag"===(n=u(i)).type&&t.components[n.name]&&(n.type="component",f=!0),n.voidElement||f||!v||"<"===v||n.children.push({type:"text",content:e.slice(m,e.indexOf("<",m))}),0===l&&r.push(n),(d=a[l-1])&&d.children.push(n),a[l]=n),(!s||n.voidElement)&&(l>-1&&(n.voidElement||n.name===i.slice(2,-1))&&(l--,n=-1===l?r:a[l]),!f&&"<"!==v&&v)){d=-1===l?r:a[l].children;var y=e.indexOf("<",m),b=e.slice(m,-1===y?void 0:y);o.test(b)&&(b=" "),(y>-1&&l+d.length>=0||" "!==b)&&d.push({type:"text",content:b})}})),r},stringify:function(e){return e.reduce((function(e,t){return e+f("",t)}),"")}};t.a=d},1001:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(103));n(69);var u=r(n(28));n(75);var i=r(n(23));n(97);var o=r(n(52)),c=r(n(302));n(123);var f=r(n(40)),d=r(n(204));n(54);var s=r(n(27));n(280);var p=r(n(160)),m=r(n(35)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),g=n(56),y=r(n(1002)),b=n(743),h=n(203);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}var E=(0,g.inject)(h.PRIVILEGE_DOMAIN_ROLE_STORE)((0,g.observer)((function(e){var t=e.dmRoleDetail,n=e.domainId,r=e.bgroup,a=e.privilegeDomainRoleStore,g=a.deleteDmRoleUserAction,h=a.findDmRoleUserListAction,O=a.getAllUserDirAction,E=(0,v.useState)([]),j=(0,m.default)(E,2),P=j[0],w=j[1],S=(0,v.useState)(!1),k=(0,m.default)(S,2),_=k[0],D=k[1],R=(0,v.useState)([]),C=(0,m.default)(R,2),I=C[0],M=C[1],T=(0,v.useState)([]),x=(0,m.default)(T,2),F=x[0],A=x[1],N=[{title:"名称",dataIndex:"name",render:function(e,t){var n=t.user;return v.default.createElement(s.default,null,n.nickname,1===n.type&&v.default.createElement(p.default,null,"管理员用户"))}},{title:"类型",dataIndex:"type",render:function(e,t){t.user;return"用户"}},{title:"操作",dataIndex:"action",width:100,render:function(e,t){var n=t.user;return W(n.type,t)}}];(0,v.useEffect)((function(){L()}),[]);var L=function(){O().then((function(e){e.code||A(e.data)}))};(0,v.useEffect)((function(){t&&B()}),[t]);var B=function(){h({dmRoleId:t.id}).then((function(e){if(!e.code){w(e.data);var t=e.data.map((function(e){return e.user})).filter(Boolean).map((function(e){return e.id}));M(t)}}))},z=function(e){g(e).then((function(e){e.code||B()}))},W=function(e,n){var r=t.businessType,a=[];return 0===r&&a.push(v.default.createElement(f.default,{title:"删除"},v.default.createElement(d.default,{onClick:function(){return z(n.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),r>0&&e<1&&a.push(v.default.createElement(f.default,{title:"删除"},v.default.createElement(d.default,{onClick:function(){return z(n.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),a};return v.default.createElement("div",{className:"tiklab_dm_promisse"},v.default.createElement("div",{className:"tiklab_dm_promisse_up"},v.default.createElement("div",{className:"tiklab_dm_promisse_up-title"},"用户(".concat(P.length,")")),v.default.createElement("div",null,v.default.createElement(b.Btn,{onClick:function(){return D(!0)},type:"primary",title:"添加用户",icon:v.default.createElement(c.default,null)}))),v.default.createElement(u.default,null,v.default.createElement(i.default,{span:24,className:"tiklab_dm_promisse_person"},v.default.createElement(o.default,{columns:N,dataSource:P,rowKey:function(e){return e.id},pagination:!1}))),v.default.createElement(y.default,(0,l.default)({},e,{visible:_,onCancel:function(){D(!1)},getFindDmRoleUserList:B,dmRoleId:t.id,addSelectedRowKeys:I,domainId:n,userDir:F,bgroup:r})))})));t.default=E},1002:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(97);var l=r(n(52));n(69);var u=r(n(28));n(75);var i=r(n(23));n(90);var o=r(n(34));n(54);var c=r(n(27)),f=r(n(67)),d=r(n(35)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),p=n(64),m=n(743);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=(0,p.useTranslation)().t,n=e.visible,r=e.onCancel,a=e.dmRoleId,f=void 0===a?"":a,v=e.addSelectedRowKeys,g=e.domainId,b=(e.bgroup,e.getFindDmRoleUserList),h=e.privilegeDomainRoleStore,O=h.createBatchDmRoleUserAction,E=h.findDmUserPageAction,j=(0,s.useState)([]),P=(0,d.default)(j,2),w=P[0],S=P[1],k=(0,s.useState)([]),_=(0,d.default)(k,2),D=_[0],R=_[1],C=(0,s.useState)(1),I=(0,d.default)(C,2),M=I[0],T=I[1],x=(0,s.useState)({}),F=(0,d.default)(x,2),A=F[0],N=F[1],L=(0,s.useState)({pageSize:6,currentPage:1}),B=(0,d.default)(L,1)[0],z=(0,s.useState)({pageParam:B}),W=(0,d.default)(z,2),U=W[0],G=W[1];(0,s.useEffect)((function(){K(U)}),[U]),(0,s.useEffect)((function(){S(v)}),[v]);var K=function(){E(y(y({},U),{},{domainId:g})).then((function(e){e.code||(N({total:e.data.totalPage}),R(e.data.dataList.map((function(e){return e.user}))))}))},V=function(){G({pageParam:B}),S([]),T(1),N({}),r()},H=[{title:t("privilege-role.nickname"),dataIndex:"nickname",key:"nickname",width:"30%",ellipsis:!0,render:function(e,t){return s.default.createElement(c.default,null,s.default.createElement(m.Profile,{userInfo:t}),e)}},{title:t("privilege-role.phone"),dataIndex:"phone",key:"phone",width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("privilege-role.email"),dataIndex:"email",key:"email",width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("privilege-role.type"),dataIndex:"userType",key:"userType",width:"15%",ellipsis:!0,render:function(e){switch(e){case 2:return t("privilege-role.thirdparty");case 1:return t("privilege-role.internal");default:return"--"}}}],J={selectedRowKeys:w,onChange:function(e){S(e)}},Y=s.default.createElement(s.default.Fragment,null,s.default.createElement(m.Btn,{onClick:V,title:"取消",isMar:!0}),s.default.createElement(m.Btn,{onClick:function(){O({dmRole:{id:f},domainId:g,userIds:w}).then((function(e){V(),b()}))},title:"确定",type:"primary"}));return s.default.createElement(m.BaseModal,{title:"添加用户",visible:n,footer:Y,onCancel:V,width:700,destroyOnClose:!0,cancelText:t("privilege-common.cancel"),okText:t("privilege-common.save")},s.default.createElement(u.default,{style:{paddingBottom:16}},s.default.createElement(i.default,{span:24},s.default.createElement(o.default,{placeholder:"昵称",onPressEnter:function(e){var t=e.target.value,n=y(y({},U),{},{nickname:t,pageParam:B});G(n)},style:{width:240}}))),s.default.createElement(u.default,null,s.default.createElement(i.default,{span:24},s.default.createElement("div",{style:{width:"100%"}},s.default.createElement(l.default,{columns:H,dataSource:D,rowSelection:J,rowKey:function(e){return e.id},pagination:!1}),A&&A.total>1&&s.default.createElement(m.Page,{pageCurrent:M,changPage:function(e){T(e);var t=y(y({},U),{},{pageParam:{pageSize:10,currentPage:e}});G(t)},page:A})))))};t.default=b},1003:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(97);var l=r(n(52)),u=r(n(67)),i=r(n(137)),o=r(n(35));n(281);var c=r(n(66)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),d=n(8);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=c.default.Group,g=function(e){var t=e.roleDetail,n=e.bgroup,r=(0,f.useState)([]),a=(0,o.default)(r,2),u=a[0],s=a[1],p=(0,f.useState)({}),g=(0,o.default)(p,2),y=g[0],b=g[1],h=(0,f.useState)({}),O=(0,o.default)(h,2),E=O[0],j=O[1],P=[{title:"模块",key:"label",width:"30%",render:function(e){return f.default.createElement(c.default,{indeterminate:e.indeterminate,onChange:function(t){return I(e.value,t)},checked:e.checkAll},e.label)}},{title:"功能点",key:"name",render:function(e){return f.default.createElement(v,{options:y[e.value],value:e.checkedList,onChange:function(t){return D(e.value,t)}})}}];(0,f.useEffect)((function(){t&&w()}),[t]);var w=function(){d.Axios.post("/function/findFunctionList",{bgroup:n,type:"2"}).then((function(e){if(!e.code){var n=S(e.data);s(n.result),b(n.resultChild),_(t.role.id,!0,n.result,n.resultChild)}}))},S=function(e){var t=e.map((function(e){return!e.parentFunction&&{value:e.id,label:e.name}})).filter(Boolean),n=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&{value:e.id,label:e.name,parent:e.parentFunction.id}})).filter(Boolean),r=[],a={};return t.forEach((function(e){var t=e.value,l=n.filter((function(e){return e.parent===t}));r.push({value:e.value,label:e.label,indeterminate:!1,checkedList:[],checkAll:!1}),a[e.value]=l})),{result:r,resultChild:a}},k=function(e){var t=e.filter((function(e){return e.function&&e.function.parentFunction})).map((function(e){return{parentID:e.function.parentFunction.id,id:e.function.id}})),n=e.filter((function(e){return!e.function.parentFunction})).map((function(e){return e.function.id})),r={};return n.forEach((function(e){var n=t.map((function(t){if(t.parentID===e)return t.id})).filter(Boolean);r[e]=[].concat((0,i.default)(n),[e])})),r},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l={roleId:e,bgroup:n};d.Axios.post("roleFunction/findRoleFunctionList",l).then((function(e){if(!e.code){var n=k(e.data),l=e.data.reduce((function(e,t){return e[t.function.id]=t.id,e}),{}),i=t?a:y,o=(t?r:u).map((function(e){var t=n[e.value]?n[e.value]:[],r=0===i[e.value].length,a=t.length===i[e.value].length+1&&0!==t.length,l=a?!a:!!t.length&&t.length<i[e.value].length+1;return r&&1===t.length&&(a=!0,l=!1),m(m({},e),{},{checkedList:t,indeterminate:l,checkAll:a})}));j(l),s(o)}}))},D=function(e,t){R(e,t)},R=function(e,t){var n=t,r=u.filter((function(t){return t.value===e}))[0].checkedList,a=n.length<r.length,l=a?C(r,n):C(n,r);if(a)if(r.length>2){var o=l.filter((function(t){return t!==e}));o.map((function(e,t){T(e,t+1===o.length)}))}else{var c=Array.from(new Set(0===n.length?[e].concat((0,i.default)(l)):l));c.map((function(e,t){T(e,t+1===c.length)}))}else{var f=0===r.length?[e].concat((0,i.default)(l)):l;f.map((function(e,t){M(e,t+1===f.length)}))}},C=function(e,t){for(var n=[],r=function(){var r=e[a];t.some((function(e){return e===r}))&&0!==t.length||n.push(r)},a=0;a<e.length;a++)r();return n},I=function(e,t){var n=Object.keys(E),r=n.includes(e),a=n.filter((function(t){return y[e].some((function(e){return e.value===t}))})),l=y[e].filter((function(e){if(!a.some((function(t){return t===e.value})))return e})),u=(!r||0!==y[e].length)&&y[e].length===l.length;if(r||(u=!0,l=y[e]),u)n.includes(e)||(l=[].concat((0,i.default)(l),[{value:e}])),l.length>0?l.map((function(e,t){M(e.value,t+1===l.length)})):M(e,!0);else{if(n.includes(e)){var o=a.map((function(e){return{value:e}}));l=[].concat((0,i.default)(o),[{value:e}])}l.length>0?l.map((function(e,t){T(e.value,t+1===l.length)})):T(e,!0)}},M=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a={role:{id:t.role.id},function:{id:e},bgroup:n};d.Axios.post("roleFunction/createRoleFunction",a).then((function(e){r&&_(t.role.id)}))},T=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=E[e],a=new FormData;a.append("id",r),d.Axios.post("/roleFunction/deleteRoleFunction",a).then((function(e){n&&_(t.role.id)}))};return f.default.createElement("div",{className:"tiklab_dm_promisse"},f.default.createElement(l.default,{pagination:!1,columns:P,dataSource:u,rowKey:function(e){return e.value},bordered:!0}))};t.default=g},1005:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(1050);var l=r(n(1006));n(90);var u=r(n(34));n(134);var i=r(n(21)),o=r(n(35)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),f=n(64),d=n(8),s=n(743);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var m=function(e){var t=e.visible,n=e.cancelAdd,r=e.editData,a=void 0===r?{}:r,p=e.parentId,m=void 0===p?"":p,v=e.urlType,g=void 0===v?"system":v,y=e.data,b=void 0===y?[]:y,h=i.default.useForm(),O=(0,o.default)(h,1)[0],E=(0,f.useTranslation)().t,j=(0,c.useState)([]),P=(0,o.default)(j,2),w=(P[0],P[1]);(0,c.useEffect)((function(){t&&k()}),[t]),(0,c.useEffect)((function(){"{}"!==JSON.stringify(a)&&(O.setFieldsValue({code:a.code}),O.setFieldsValue({name:a.name}),O.setFieldsValue({parent:a.parentFunction?a.parentFunction.id:a.parentFunction})),m&&O.setFieldsValue({parent:m})}),[a,m]);var S,k=function(){var e=new FormData;e.append("type","system"===g?"1":"2"),d.Axios.post("/function/findFunctionListByParentId",e).then((function(e){e.code||w(e.data)}))},_=function(){O.resetFields(),n()},D=c.default.createElement(c.default.Fragment,null,c.default.createElement(s.Btn,{onClick:_,title:"取消",isMar:!0}),c.default.createElement(s.Btn,{onClick:function(){O.submit()},title:"确定",type:"primary"}));return c.default.createElement(s.BaseModal,{title:"{}"!==JSON.stringify(a)?E("privilege-edit-feature"):E("privilege-add-feature"),visible:t,footer:D,onCancel:_,forceRender:!0,destroyOnClose:!0,cancelText:E("privilege-common.cancel"),okText:E("privilege-common.save")},c.default.createElement(i.default,{form:O,onFinish:function(e){if("{}"===JSON.stringify(a)){var t={name:e.name,code:e.code,parentFunction:{id:e.parent},type:"system"===g?"1":"2"};d.Axios.post("/function/createFunction",t).then((function(e){e.code||_()}))}else{var n={id:a.id,name:e.name,code:e.code,parentFunction:{id:e.parent},type:"system"===g?"1":"2"};d.Axios.post("/function/updateFunction",n).then((function(e){e.code||_()}))}},preserve:!1,layout:"vertical"},c.default.createElement(i.default.Item,{label:E("privilege-feature-name"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.default.createElement(u.default,{placeholder:E("privilege-feature-name")})),c.default.createElement(i.default.Item,{label:E("privilege-feature-code"),name:"code",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.default.createElement(u.default,{placeholder:E("privilege-feature-code")})),c.default.createElement(i.default.Item,{label:E("privilege-point-node"),name:"parent"},c.default.createElement(l.default,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(S=[],function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var l={title:t.name,value:t.id,disabled:r};if(t.id===a.id&&(l.disabled=!0),n.push(l),t.children&&t.children.length>0)return e(t.children,l.children=[],l.disabled)}))}(b,S),S),placeholder:E("privilege-point-node-placeholder"),disabled:m||a.children&&a.children.length>0}))))};t.default=m},1007:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(103)),u=r(n(35)),i=r(n(67)),o=r(n(304)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),f=n(916),d=["record","data","index","moveRow","className","style"];function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v="DraggableFeatureBodyRow",g=function(e){var t=e.record,n=(e.data,e.index),r=e.moveRow,a=e.className,i=e.style,s=(0,o.default)(e,d);if(!t)return null;var p=m(m({},t),{},{index:n}),g=(0,c.useRef)(null),y=(0,f.useDrop)({accept:v,collect:function(e){var t=e.getItem()||{},r=t.index;t.sort;return r===n?{}:{isOver:e.isOver(),dropClassName:r<n?" drop-over-downward":" drop-over-upward"}},drop:function(e){var n={dragId:e.id,drag:e,dropId:t.id,drop:m({},t)};r(n)}}),b=(0,u.default)(y,2),h=b[0],O=h.isOver,E=h.dropClassName,j=b[1],P=(0,f.useDrag)({type:v,item:p,collect:function(e){return{isDragging:e.isDragging()}}});return j((0,(0,u.default)(P,2)[1])(g)),c.default.createElement("tr",(0,l.default)({ref:g,className:"".concat(a).concat(O?E:""),style:m({cursor:"move"},i)},s))};t.default=g},1008:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.sortNum=t.sort=t.handelPeerFunction=void 0;var a=r(n(67));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.handelPeerFunction=function(e,t,n,r,a){var l=e.map((function(e){return e.id===t?u(u({},e),{},{sort:a}):e.id===n?u(u({},e),{},{sort:r}):e}));return i(l)};var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e.sort-t.sort}))};t.sort=i;t.sortNum=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e-t}))}},1009:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(90);var l=r(n(34)),u=r(n(67));n(134);var i=r(n(21)),o=r(n(35)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),f=n(64),d=n(8),s=n(743);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=(0,f.useTranslation)().t,n=e.visible,r=e.initParam,a=e.cancel,u=e.editData,p=void 0===u?{}:u,m=e.group,g=void 0===m?"system":m,y=e.urlType,b=void 0===y?"system":y;if(!["system","project"].includes(b))throw Error("use RoleAdd Component must have urlType props, value:'system'、 'project'");var h=i.default.useForm(),O=(0,o.default)(h,1)[0];(0,c.useEffect)((function(){O.setFieldsValue({desc:p.desc}),O.setFieldsValue({name:p.name})}),[p]);var E=function(){O.resetFields(),a()},j=c.default.createElement(c.default.Fragment,null,c.default.createElement(s.Btn,{onClick:E,title:"取消",isMar:!0}),c.default.createElement(s.Btn,{onClick:function(){O.submit()},title:"确定",type:"primary"}));return c.default.createElement(s.BaseModal,{title:"{}"!==JSON.stringify(p)?t("privilege-role.editRole"):t("privilege-role.addRole"),visible:n,onCancel:E,footer:j,forceRender:!0,destroyOnClose:!0,cancelText:t("privilege-common.cancel"),okText:t("privilege-common.save")},c.default.createElement(i.default,{form:O,preserve:!1,onFinish:function(e){var t="/role/createRole",n=v(v({},e),{},{group:g,type:"system"===b?"1":"2"});"{}"!==JSON.stringify(p)&&(t="/role/updateRole",n=v(v({},e),{},{group:g,id:p.id,type:"system"===b?"1":"2"})),d.Axios.post(t,n).then((function(e){e.code||(E(),r())}))},layout:"vertical"},c.default.createElement(i.default.Item,{label:t("privilege-role.roleName"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.default.createElement(l.default,{placeholder:t("privilege-role.roleName")})),c.default.createElement(i.default.Item,{label:t("privilege-desc"),name:"desc"},c.default.createElement(l.default,{placeholder:t("privilege-desc")}))))};t.default=g},1010:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(103));n(69);var u=r(n(28));n(75);var i=r(n(23));n(97);var o=r(n(52)),c=r(n(137)),f=r(n(302));n(123);var d=r(n(40)),s=r(n(204));n(54);var p=r(n(27));n(280);var m=r(n(160)),v=r(n(35)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),y=n(56),b=n(64),h=r(n(1011)),O=r(n(1012)),E=n(743),j=n(203);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}var w=(0,y.inject)(j.SYSTEM_ROLE_STORE)((0,y.observer)((function(e){var t=e.roleDetail,n=e.systemRoleStore,r=n.deleteRoleUserGroupAction,a=n.deleteRoleUserAction,y=n.findAllUserGroupAction,j=n.findRoleUserGroupListAction,P=n.findRoleUserListAction,w=((0,b.useTranslation)().t,(0,g.useState)([])),S=(0,v.default)(w,2),k=S[0],_=S[1],D=(0,g.useState)(!1),R=(0,v.default)(D,2),C=R[0],I=R[1],M=(0,g.useState)([]),T=(0,v.default)(M,2),x=T[0],F=T[1],A=(0,g.useState)(!1),N=(0,v.default)(A,2),L=N[0],B=N[1],z=(0,g.useState)([]),W=(0,v.default)(z,2),U=W[0],G=W[1],K=(0,g.useState)([]),V=(0,v.default)(K,2),H=V[0],J=V[1],Y=[{title:"名称",dataIndex:"name",render:function(e,t){var n=t.user,r=t.userGroup;return r?g.default.createElement(p.default,null,r.name,r.type>0&&g.default.createElement(m.default,null,"管理员组")):g.default.createElement(p.default,null,n.nickname,1===n.type&&g.default.createElement(m.default,null,"管理员用户"))}},{title:"类型",dataIndex:"type",render:function(e,t){t.user;return t.userGroup?"用户组":"用户"}},{title:"操作",dataIndex:"action",width:100,render:function(e,t){var n=t.user,r=t.userGroup;return re(r?r.type:n.type,t)}}];(0,g.useEffect)((function(){ee()}),[]),(0,g.useEffect)((function(){t&&(q(),X())}),[t]);var q=function(){P({roleId:t.id}).then((function(e){if(!e.code){_(e.data);var t=e.data.map((function(e){return e.user})).filter(Boolean).map((function(e){return e.id}));F(t)}}))},X=function(){j({roleId:t.id}).then((function(e){e.code||J(e.data)}))},Z=function(e){e.user&&$(e.id),e.userGroup&&Q(e.id)},$=function(e){a(e).then((function(e){e.code||q()}))},Q=function(e){r(e).then((function(e){e.code||X()}))},ee=function(){y().then((function(e){0===e.code&&G(e.data)}))},te=function(){q(),X()},ne=function(){I(!C),B(!L)},re=function(e,n){var r=t.businessType,a=[];return 0===r&&a.push(g.default.createElement(d.default,{title:"删除"},g.default.createElement(s.default,{onClick:function(){return Z(n)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),r>0&&e<1&&a.push(g.default.createElement(d.default,{title:"删除"},g.default.createElement(s.default,{onClick:function(){return Z(n)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),a};return g.default.createElement("div",{className:"tiklab_projectpromisse"},g.default.createElement("div",{className:"tiklab_projectpromisse_up"},g.default.createElement("div",{className:"tiklab_projectpromisse_up-title"},"用户(".concat(k.length,")/用户组(").concat(H.length,")")),g.default.createElement(E.Btn,{onClick:function(){return I(!0)},type:"primary",title:"添加",icon:g.default.createElement(f.default,null)})),g.default.createElement(u.default,null,g.default.createElement(i.default,{span:24,className:"tiklab_projectpromisse_person"},g.default.createElement(o.default,{columns:Y,dataSource:[].concat((0,c.default)(H),(0,c.default)(k)),rowKey:function(e){return e.id},pagination:!1}))),g.default.createElement(h.default,(0,l.default)({},e,{visible:C,onCancel:function(){return I(!1)},getRoleDetail:te,changeAddType:ne,roleId:t.id,addSelectedRowKeys:x})),g.default.createElement(O.default,{roleId:t.id,onClose:function(){return B(!1)},getRoleDetail:te,changeAddType:ne,groupUserList:U,open:L}))})));t.default=w},1011:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(75);var l=r(n(23));n(97);var u=r(n(52));n(69);var i=r(n(28));n(90);var o=r(n(34));n(54);var c=r(n(27)),f=r(n(67)),d=r(n(35)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),p=n(56),m=n(64),v=n(743),g=n(203);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=(0,p.inject)(g.SYSTEM_ROLE_STORE)((0,p.observer)((function(e){var t=(0,m.useTranslation)().t,n=e.visible,r=e.onCancel,a=e.getRoleDetail,f=e.roleId,p=e.changeAddType,g=e.addSelectedRowKeys,y=e.systemRoleStore,b=y.createBatchRoleUserAction,O=y.getUserPageAction,E=(0,s.useState)([]),j=(0,d.default)(E,2),P=j[0],w=j[1],S=(0,s.useState)([]),k=(0,d.default)(S,2),_=k[0],D=k[1],R=(0,s.useState)(1),C=(0,d.default)(R,2),I=C[0],M=C[1],T=(0,s.useState)({}),x=(0,d.default)(T,2),F=x[0],A=x[1],N=(0,s.useState)({pageSize:6,currentPage:1}),L=(0,d.default)(N,1)[0],B=(0,s.useState)({pageParam:L}),z=(0,d.default)(B,2),W=z[0],U=z[1];(0,s.useEffect)((function(){G(W)}),[W]),(0,s.useEffect)((function(){w(g)}),[g]);var G=function(e){O(e).then((function(e){e.code||(A({total:e.data.totalPage}),D(e.data.dataList))}))},K=function(){U({pageParam:L}),w([]),M(1),A({}),r()},V=[{title:t("privilege-role.nickname"),dataIndex:"nickname",key:"nickname",width:"40%",ellipsis:!0,render:function(e,t){return s.default.createElement(c.default,null,s.default.createElement(v.Profile,{userInfo:t})," ",e)}},{title:t("privilege-role.phone"),dataIndex:"phone",key:"phone",width:"30%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("privilege-role.email"),dataIndex:"email",key:"email",width:"30%",ellipsis:!0,render:function(e){return e||"--"}}],H={selectedRowKeys:P,onChange:function(e){w(e)}},J=s.default.createElement(s.default.Fragment,null,s.default.createElement(v.Btn,{onClick:K,title:"取消",isMar:!0}),s.default.createElement(v.Btn,{onClick:function(){b({role:{id:f},userIds:P}).then((function(e){K(),a()}))},title:"确定",type:"primary"}));return s.default.createElement(v.BaseModal,{visible:n,footer:J,onCancel:K,width:500,destroyOnClose:!0,cancelText:t("privilege-common.cancel"),okText:t("privilege-common.save")},s.default.createElement("div",{className:"tiklab_promisse_modal_up"},s.default.createElement("div",null,"添加用户"),s.default.createElement("div",{onClick:function(){return p()}},"添加用户组")),s.default.createElement(i.default,null,s.default.createElement(o.default,{placeholder:"昵称",onPressEnter:function(e){var t=e.target.value,n=h(h({},W),{},{nickname:t,pageParam:L});U(n)},style:{width:240}})),s.default.createElement(i.default,null,s.default.createElement(l.default,{span:24},s.default.createElement("div",{style:{width:"100%"}},s.default.createElement(u.default,{columns:V,dataSource:_,rowSelection:H,rowKey:function(e){return e.id},pagination:!1}),F&&F.total>1&&s.default.createElement(v.Page,{pageCurrent:I,changPage:function(e){M(e);var t=h(h({},W),{},{pageParam:{pageSize:6,currentPage:e}});U(t)},page:F})))))})));t.default=O},1012:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(136);var l=r(n(48)),u=r(n(67));n(134);var i=r(n(21)),o=r(n(35)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),f=n(64),d=n(56),s=n(743),p=n(203);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var g=(0,d.inject)(p.SYSTEM_ROLE_STORE)((0,d.observer)((function(e){var t=e.open,n=e.onClose,r=e.roleId,a=e.groupUserList,d=e.getRoleDetail,p=e.changeAddType,m=e.systemRoleStore,g=m.createBatchRoleUserGroupAction,y=m.findRoleUserGroupListAction,b=i.default.useForm(),h=(0,o.default)(b,1)[0],O=(0,f.useTranslation)().t;(0,c.useEffect)((function(){r&&y({roleId:r}).then((function(e){if(0===e.code){var t=e.data.map((function(e){return e.userGroup.id}));h.setFieldsValue({tagValues:t})}}))}),[r]);var E=function(){h.resetFields(),n()},j=c.default.createElement(c.default.Fragment,null,c.default.createElement(s.Btn,{onClick:E,title:"取消",isMar:!0}),c.default.createElement(s.Btn,{onClick:function(){h.submit()},title:"确定",type:"primary"}));return c.default.createElement(s.BaseModal,{visible:t,footer:j,onCancel:E,forceRender:!0,destroyOnClose:!0,cancelText:O("privilege-common.cancel"),okText:O("privilege-common.save")},c.default.createElement("div",{className:"tiklab_promisse_modal_up"},c.default.createElement("div",null,"添加用户组"),c.default.createElement("div",{onClick:function(){return p()}},"添加用户")),c.default.createElement(i.default,{form:h,preserve:!1,onFinish:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({role:{id:r}},e);g(t).then((function(e){0===e.code&&(E(),d())}))},layout:"vertical"},c.default.createElement(i.default.Item,{label:"用户组",name:"userGroupIds",rules:[{required:!0,message:"选择用户组"}]},c.default.createElement(l.default,{placeholder:"选择用户组",mode:"multiple"},a.map((function(e){return c.default.createElement(l.default.Option,{value:e.id,key:e.id},e.name)}))))))})));t.default=g},1013:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(97);var l=r(n(52)),u=r(n(67)),i=r(n(137)),o=r(n(35));n(281);var c=r(n(66)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),d=n(8);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=c.default.Group,g=function(e){var t=e.roleDetail,n=(0,f.useState)([]),r=(0,o.default)(n,2),a=r[0],u=r[1],s=(0,f.useState)({}),p=(0,o.default)(s,2),g=p[0],y=p[1],b=(0,f.useState)({}),h=(0,o.default)(b,2),O=h[0],E=h[1],j=[{title:"模块",key:"label",width:"30%",render:function(e){return f.default.createElement(c.default,{indeterminate:e.indeterminate,onChange:function(t){return C(e.value,t)},checked:e.checkAll},e.label)}},{title:"功能点",key:"name",render:function(e){return f.default.createElement(v,{options:g[e.value],value:e.checkedList,onChange:function(t){return _(e.value,t)}})}}];(0,f.useEffect)((function(){t&&P()}),[t]);var P=function(){d.Axios.post("/function/findFunctionList",{type:"2"}).then((function(e){if(!e.code){var n=w(e.data);u(n.result),y(n.resultChild),k(t.id,!0,n.result,n.resultChild)}}))},w=function(e){var t=e.map((function(e){return!e.parentFunction&&{value:e.id,label:e.name}})).filter(Boolean),n=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&{value:e.id,label:e.name,parent:e.parentFunction.id}})).filter(Boolean),r=[],a={};return t.forEach((function(e){var t=e.value,l=n.filter((function(e){return e.parent===t}));r.push({value:e.value,label:e.label,indeterminate:!1,checkedList:[],checkAll:!1}),a[e.value]=l})),{result:r,resultChild:a}},S=function(e){var t=e.filter((function(e){return e.function&&e.function.parentFunction})).map((function(e){return{parentID:e.function.parentFunction.id,id:e.function.id}})),n=e.filter((function(e){return!e.function.parentFunction})).map((function(e){return e.function.id})),r={};return n.forEach((function(e){var n=t.map((function(t){if(t.parentID===e)return t.id})).filter(Boolean);r[e]=[].concat((0,i.default)(n),[e])})),r},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l={roleId:e};d.Axios.post("roleFunction/findRoleFunctionList",l).then((function(e){if(!e.code){var l=S(e.data),i=e.data.reduce((function(e,t){return e[t.function.id]=t.id,e}),{}),o=t?r:g,c=(t?n:a).map((function(e){var t=l[e.value]?l[e.value]:[],n=0===o[e.value].length,r=t.length===o[e.value].length+1&&0!==t.length,a=r?!r:!!t.length&&t.length<o[e.value].length+1;return n&&1===t.length&&(r=!0,a=!1),m(m({},e),{},{checkedList:t,indeterminate:a,checkAll:r})}));E(i),u(c)}}))},_=function(e,t){D(e,t)},D=function(e,t){var n=t,r=a.filter((function(t){return t.value===e}))[0].checkedList,l=n.length<r.length,u=l?R(r,n):R(n,r);if(l)if(r.length>2){var o=u.filter((function(t){return t!==e}));o.map((function(e,t){M(e,t+1===o.length)}))}else{var c=Array.from(new Set(0===n.length?[e].concat((0,i.default)(u)):u));c.map((function(e,t){M(e,t+1===c.length)}))}else{var f=0===r.length?[e].concat((0,i.default)(u)):u;f.map((function(e,t){I(e,t+1===f.length)}))}},R=function(e,t){for(var n=[],r=function(){var r=e[a];t.some((function(e){return e===r}))&&0!==t.length||n.push(r)},a=0;a<e.length;a++)r();return n},C=function(e,t){var n=Object.keys(O),r=n.includes(e),a=n.filter((function(t){return g[e].some((function(e){return e.value===t}))})),l=g[e].filter((function(e){if(!a.some((function(t){return t===e.value})))return e})),u=(!r||0!==g[e].length)&&g[e].length===l.length;if(r||(u=!0,l=g[e]),u)n.includes(e)||(l=[].concat((0,i.default)(l),[{value:e}])),l.length>0?l.map((function(e,t){I(e.value,t+1===l.length)})):I(e,!0);else{if(n.includes(e)){var o=a.map((function(e){return{value:e}}));l=[].concat((0,i.default)(o),[{value:e}])}l.length>0?l.map((function(e,t){M(e.value,t+1===l.length)})):M(e,!0)}},I=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={role:{id:t.id},function:{id:e}};d.Axios.post("roleFunction/createRoleFunction",r).then((function(e){n&&k(t.id)}))},M=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=O[e],a=new FormData;a.append("id",r),d.Axios.post("roleFunction/deleteRoleFunction",a).then((function(e){n&&k(t.id)}))};return f.default.createElement("div",{className:"tiklab_projectpromisse"},f.default.createElement(l.default,{pagination:!1,columns:j,dataSource:a,rowKey:function(e){return e.value},bordered:!0}))};t.default=g},1014:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(103));n(97);var u=r(n(52)),i=r(n(137));n(123);var o=r(n(40)),c=r(n(204));n(308);var f=r(n(129)),d=r(n(302));n(54);var s=r(n(27));n(280);var p=r(n(160)),m=r(n(35)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),g=n(56),y=n(64),b=r(n(1015)),h=r(n(1012)),O=n(743),E=n(203);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}var P=(0,g.inject)(E.SYSTEM_ROLE_STORE)((0,g.observer)((function(e){var t=e.roleDetail,n=e.systemRoleStore,r=n.deleteRoleUserGroupAction,a=n.deleteRoleUserAction,g=n.findAllUserGroupAction,E=n.findRoleUserGroupListAction,j=n.findRoleUserListAction,P=((0,y.useTranslation)().t,(0,v.useState)(!1)),w=(0,m.default)(P,2),S=w[0],k=w[1],_=(0,v.useState)([]),D=(0,m.default)(_,2),R=D[0],C=D[1],I=(0,v.useState)(!1),M=(0,m.default)(I,2),T=M[0],x=M[1],F=(0,v.useState)([]),A=(0,m.default)(F,2),N=A[0],L=A[1],B=(0,v.useState)([]),z=(0,m.default)(B,2),W=z[0],U=z[1],G=(0,v.useState)([]),K=(0,m.default)(G,2),V=K[0],H=K[1],J=[{title:"名称",dataIndex:"name",render:function(e,t){var n=t.user,r=t.userGroup;return r?v.default.createElement(s.default,null,r.name,r.type>0&&v.default.createElement(p.default,null,"管理员组")):v.default.createElement(s.default,null,n.nickname,1===n.type&&v.default.createElement(p.default,null,"管理员用户"))}},{title:"类型",dataIndex:"type",render:function(e,t){t.user;return t.userGroup?"用户组":"用户"}},{title:"操作",dataIndex:"action",width:100,render:function(e,t){var n=t.user,r=t.userGroup;return te(r?r.type:n.type,t)}}];(0,v.useEffect)((function(){Q()}),[]),(0,v.useEffect)((function(){t&&(q(),Y())}),[t]);var Y=function(){E({roleId:t.id}).then((function(e){e.code||U(e.data)}))},q=function(){j({roleId:t.id}).then((function(e){if(!e.code){H(e.data);var t=e.data.map((function(e){return e.user})).filter(Boolean).map((function(e){return e.id}));return C(t),e.data}}))},X=function(e){e.user&&Z(e.id),e.userGroup&&$(e.id)},Z=function(e){a(e).then((function(e){e.code||q()}))},$=function(e){r(e).then((function(e){e.code||Y()}))},Q=function(){g().then((function(e){0===e.code&&L(e.data)}))},ee=function(){q(),Y()},te=(f.default,f.default.Item,d.default,f.default.Item,d.default,function(e,n){var r=t.businessType,a=[];return 0===r&&a.push(v.default.createElement(o.default,{title:"删除"},v.default.createElement(c.default,{onClick:function(){return X(n)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),r>0&&e<1&&a.push(v.default.createElement(o.default,{title:"删除"},v.default.createElement(c.default,{onClick:function(){return X(n)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),a}),ne=function(){k(!S),x(!T)};return v.default.createElement("div",{className:"tiklab_promisse"},v.default.createElement("div",{className:"tiklab_promisse_up"},v.default.createElement("div",{className:"tiklab_promisse_up-title"},"用户(".concat(V.length,")/用户组(").concat(W.length,")")),v.default.createElement(O.Btn,{onClick:function(){return k(!0)},type:"primary",title:"添加",icon:v.default.createElement(d.default,null)})),v.default.createElement("div",{className:"tiklab_promisse_person"},v.default.createElement(u.default,{columns:J,dataSource:[].concat((0,i.default)(W),(0,i.default)(V)),rowKey:function(e){return e.id},pagination:!1})),v.default.createElement(b.default,(0,l.default)({},e,{visible:S,onCancel:function(){return k(!1)},getRoleDetail:ee,changeAddType:ne,roleId:t.id,addSelectedRowKeys:R})),v.default.createElement(h.default,{roleId:t.id,onClose:function(){return x(!1)},getRoleDetail:ee,changeAddType:ne,groupUserList:N,open:T}))})));t.default=P},1015:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(97);var l=r(n(52));n(69);var u=r(n(28));n(75);var i=r(n(23));n(90);var o=r(n(34));n(54);var c=r(n(27)),f=r(n(67)),d=r(n(35)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),p=n(64),m=n(56),v=n(743),g=n(203);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=(0,m.inject)(g.SYSTEM_ROLE_STORE)((0,m.observer)((function(e){var t=(0,p.useTranslation)().t,n=e.visible,r=e.onCancel,a=e.roleId,f=e.changeAddType,m=e.addSelectedRowKeys,g=e.getRoleDetail,y=e.systemRoleStore,b=y.createBatchRoleUserAction,O=y.getUserPageAction,E=(0,s.useState)([]),j=(0,d.default)(E,2),P=j[0],w=j[1],S=(0,s.useState)([]),k=(0,d.default)(S,2),_=k[0],D=k[1],R=(0,s.useState)(1),C=(0,d.default)(R,2),I=C[0],M=C[1],T=(0,s.useState)({}),x=(0,d.default)(T,2),F=x[0],A=x[1],N=(0,s.useState)({pageSize:6,currentPage:1}),L=(0,d.default)(N,1)[0],B=(0,s.useState)({pageParam:L}),z=(0,d.default)(B,2),W=z[0],U=z[1];(0,s.useEffect)((function(){G(W)}),[W]),(0,s.useEffect)((function(){w(m)}),[m]);var G=function(e){O(e).then((function(e){e.code||(A({total:e.data.totalPage}),D(e.data.dataList))}))},K=function(){U({pageParam:L}),w([]),M(1),A({}),r()},V=[{title:t("privilege-role.nickname"),dataIndex:"nickname",key:"nickname",width:"40%",ellipsis:!0,render:function(e,t){return s.default.createElement(c.default,null,s.default.createElement(v.Profile,{userInfo:t}),e)}},{title:t("privilege-role.phone"),dataIndex:"phone",key:"phone",width:"30%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("privilege-role.email"),dataIndex:"email",key:"email",width:"30%",ellipsis:!0,render:function(e){return e||"--"}}],H={selectedRowKeys:P,onChange:function(e){w(e)}},J=s.default.createElement(s.default.Fragment,null,s.default.createElement(v.Btn,{onClick:K,title:"取消",isMar:!0}),s.default.createElement(v.Btn,{onClick:function(){b({role:{id:a},userIds:P}).then((function(e){K(),g()}))},title:"确定",type:"primary"}));return s.default.createElement(v.BaseModal,{visible:n,onCancel:K,footer:J,width:500,cancelText:t("privilege-common.cancel"),okText:t("privilege-common.save")},s.default.createElement("div",{className:"tiklab_promisse_modal_up"},s.default.createElement("div",null,"添加用户"),s.default.createElement("div",{onClick:function(){return f()}},"添加用户组")),s.default.createElement(u.default,{style:{paddingBottom:16}},s.default.createElement(i.default,{span:24},s.default.createElement(o.default,{placeholder:t("privilege-role.nickname"),width:240,onPressEnter:function(e){var t=e.target.value,n=h(h({},W),{},{nickname:t,pageParam:L});U(n)},style:{width:240}}))),s.default.createElement(u.default,null,s.default.createElement(i.default,{span:24},s.default.createElement("div",{style:{width:"100%"}},s.default.createElement(l.default,{columns:V,dataSource:_,rowSelection:H,rowKey:function(e){return e.id},pagination:!1}),F&&F.total>1&&s.default.createElement(v.Page,{pageCurrent:I,changPage:function(e){M(e);var t=h(h({},W),{},{pageParam:{pageSize:6,currentPage:e}});U(t)},page:F})))))})));t.default=O},1016:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(97);var l=r(n(52)),u=r(n(67)),i=r(n(137)),o=r(n(35));n(281);var c=r(n(66)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),d=n(8);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=c.default.Group,g=function(e){var t=e.roleDetail,n=e.group,r=(0,f.useState)([]),a=(0,o.default)(r,2),u=a[0],s=a[1],p=(0,f.useState)({}),g=(0,o.default)(p,2),y=g[0],b=g[1],h=(0,f.useState)({}),O=(0,o.default)(h,2),E=O[0],j=O[1],P=[{title:"模块",key:"label",width:"30%",render:function(e){return f.default.createElement(c.default,{indeterminate:e.indeterminate,onChange:function(t){return I(e.value,t)},checked:e.checkAll},e.label)}},{title:"功能点",key:"name",render:function(e){return f.default.createElement(v,{options:y[e.value],value:e.checkedList,onChange:function(t){return D(e.value,t)}})}}];(0,f.useEffect)((function(){t&&w()}),[t]);var w=function(){d.Axios.post("/function/findFunctionList",{group:n}).then((function(e){if(!e.code){var n=S(e.data);s(n.result),b(n.resultChild),_(t.id,!0,n.result,n.resultChild)}}))},S=function(e){var t=e.map((function(e){return!e.parentFunction&&{value:e.id,label:e.name}})).filter(Boolean),n=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&{value:e.id,label:e.name,parent:e.parentFunction.id}})).filter(Boolean),r=[],a={};return t.forEach((function(e){var t=e.value,l=n.filter((function(e){return e.parent===t}));r.push({value:e.value,label:e.label,indeterminate:!1,checkedList:[],checkAll:!1}),a[e.value]=l})),{result:r,resultChild:a}},k=function(e){var t=e.filter((function(e){return e.function&&e.function.parentFunction})).map((function(e){return{parentID:e.function.parentFunction.id,id:e.function.id}})),n=e.filter((function(e){return!e.function.parentFunction})).map((function(e){return e.function.id})),r={};return n.forEach((function(e){var n=t.map((function(t){if(t.parentID===e)return t.id})).filter(Boolean);r[e]=[].concat((0,i.default)(n),[e])})),r},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a={roleId:e};d.Axios.post("roleFunction/findRoleFunctionList",a).then((function(e){if(!e.code){var a=k(e.data),l=e.data.reduce((function(e,t){return e[t.function.id]=t.id,e}),{}),i=t?r:y,o=(t?n:u).map((function(e){var t=a[e.value]?a[e.value]:[],n=0===i[e.value].length,r=t.length===i[e.value].length+1&&0!==t.length,l=r?!r:!!t.length&&t.length<i[e.value].length+1;return n&&1===t.length&&(r=!0,l=!1),m(m({},e),{},{checkedList:t,indeterminate:l,checkAll:r})}));j(l),s(o)}}))},D=function(e,t){R(e,t)},R=function(e,t){var n=t,r=u.filter((function(t){return t.value===e}))[0].checkedList,a=n.length<r.length,l=a?C(r,n):C(n,r);if(a)if(r.length>2){var o=l.filter((function(t){return t!==e}));o.map((function(e,t){T(e,t+1===o.length)}))}else{var c=Array.from(new Set(0===n.length?[e].concat((0,i.default)(l)):l));c.map((function(e,t){T(e,t+1===c.length)}))}else{var f=0===r.length?[e].concat((0,i.default)(l)):l;f.map((function(e,t){M(e,t+1===f.length)}))}},C=function(e,t){for(var n=[],r=function(){var r=e[a];t.some((function(e){return e===r}))&&0!==t.length||n.push(r)},a=0;a<e.length;a++)r();return n},I=function(e,t){var n=Object.keys(E),r=n.includes(e),a=n.filter((function(t){return y[e].some((function(e){return e.value===t}))})),l=y[e].filter((function(e){if(!a.some((function(t){return t===e.value})))return e})),u=(!r||0!==y[e].length)&&y[e].length===l.length;if(r||(u=!0,l=y[e]),u)n.includes(e)||(l=[].concat((0,i.default)(l),[{value:e}])),l.length>0?l.map((function(e,t){M(e.value,t+1===l.length)})):M(e,!0);else{if(n.includes(e)){var o=a.map((function(e){return{value:e}}));l=[].concat((0,i.default)(o),[{value:e}])}l.length>0?l.map((function(e,t){T(e.value,t+1===l.length)})):T(e,!0)}},M=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={role:{id:t.id},function:{id:e}};d.Axios.post("roleFunction/createRoleFunction",r).then((function(e){n&&_(t.id)}))},T=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=E[e],a=new FormData;a.append("id",r),d.Axios.post("roleFunction/deleteRoleFunction",a).then((function(e){n&&_(t.id)}))};return f.default.createElement("div",{className:"tiklab_promisse"},f.default.createElement(l.default,{pagination:!1,columns:P,dataSource:u,rowKey:function(e){return e.value},bordered:!0}))};t.default=g},1017:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.links=t.SameValue=void 0;var a=r(n(67)),l=r(n(137));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.SameValue=function(e,t,n){var r=Array.from(new Set((0,l.default)(e).filter((function(e){return t.some((function(t){return t[n]===e}))}))));if(r)return t.find((function(e){return e[n]===r[0]}))};t.links=function(e){var t=[];return function e(n,r){n&&n.map((function(n){if(n.children){var a=n.children.map((function(e){return i(i({},e),{},{type:n.id})}));e(a,t)}else r.push(n)}))}(e,t),t}},1292:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1293)).default;t.default=a},1293:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(168)),u=r(n(103));n(69);var i=r(n(28));n(75);var o=r(n(23));n(97);var c=r(n(52)),f=r(n(302)),d=r(n(169)),s=r(n(67)),p=r(n(204));n(123);var m=r(n(40)),v=r(n(309));n(54);var g=r(n(27));n(280);var y=r(n(160)),b=r(n(35)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),O=n(56),E=n(64),j=n(203),P=n(1294),w=n(743);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(1309);var D=(0,O.inject)(j.PRIVILEGE_DOMAIN_ROLE_STORE)((0,O.observer)((function(e){var t=(0,E.useTranslation)().t,n=e.privilegeDomainRoleStore,r=e.domainId,a=n.privilegeDomainRole,s=n.deleteDomainRoleAction,O=n.setDomainRoleAction,j=n.findDomainRolePageAction,S=n.domainRolePage,k=(0,h.useState)(!1),D=(0,b.default)(k,2),R=D[0],C=D[1],I=(0,h.useState)({pageSize:12,currentPage:1}),M=(0,b.default)(I,1)[0],T=(0,h.useState)({pageParam:M}),x=(0,b.default)(T,2),F=x[0],A=x[1],N=(0,h.useState)(null),L=(0,b.default)(N,2),B=L[0],z=L[1],W=[{title:"角色名称",dataIndex:"name",width:"40%",ellipsis:!0,render:function(e,t){var n=t.businessType,r=t.role;return 1===n&&1===r.defaultRole?h.default.createElement(g.default,null,h.default.createElement("div",{className:"tiklab_domain_role_name",onClick:function(){return K(t)}},r.name),h.default.createElement(y.default,{color:"#87d068"},"默认"),h.default.createElement(y.default,null,"管理员")):1===r.defaultRole?h.default.createElement(g.default,null,h.default.createElement("div",{className:"tiklab_domain_role_name",onClick:function(){return K(t)}},r.name),h.default.createElement(y.default,{color:"#87d068"},"默认")):1===n?h.default.createElement(g.default,null,h.default.createElement("div",{className:"tiklab_domain_role_name",onClick:function(){return K(t)}},r.name),h.default.createElement(y.default,null,"管理员")):h.default.createElement("div",{className:"tiklab_domain_role_name",onClick:function(){return K(t)}},r.name)}},{title:"成员数",dataIndex:"roleUserList",width:"25%",ellipsis:!0,render:function(e,t){var n=t.dmRoleUserList,r=n&&n.length>0?n.length:0;return"".concat(r,"人")}},{title:"角色类型",dataIndex:["role","group"],width:"25%",ellipsis:!0,render:function(e){return"system"===e?"内置":t("privilege-role.custom")}},{title:"操作",dataIndex:"action",render:function(e,t){var n=t.role,r=t.businessType,a=t.id;return h.default.createElement(g.default,null,0===(null==n?void 0:n.defaultRole)&&h.default.createElement(m.default,{title:"设置默认"},h.default.createElement(v.default,{onClick:function(){return G(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===r&&"system"!==n.group&&h.default.createElement(m.default,{title:"删除"},h.default.createElement(p.default,{onClick:function(){return V(a)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}];(0,h.useEffect)((function(){U()}),[F]);var U=function(){j(_(_({},F),{},{domainId:r}))},G=function(){var e=(0,d.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:e.sent.code||H();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e){z(e)},V=function(){var e=(0,d.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:e.sent.code||H();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){A({pageParam:M})};return h.default.createElement("div",{className:"tiklab_domain_role"},B?h.default.createElement(P.DmRoleDetail,{roleDetailParams:B,domainId:r,close:function(){z(null),H()}}):h.default.createElement("div",{className:"tiklab_domain_role_table"},h.default.createElement(w.TitleAction,{title:"权限",style:{paddingLeft:8}},h.default.createElement(w.Btn,{onClick:function(){return C(!0)},type:"primary",icon:h.default.createElement(f.default,null),title:t("privilege-role.addRole")})),h.default.createElement(i.default,null,h.default.createElement(o.default,{span:24},h.default.createElement(c.default,{columns:W,dataSource:a,rowKey:function(e){return e.id},pagination:!1}),S&&S.total>1&&h.default.createElement(w.Page,{pageCurrent:F.pageParam.currentPage,changPage:function(e){A(_(_({},F),{},{pageParam:{pageSize:12,currentPage:e}}))},page:S})))),h.default.createElement(P.DmRoleCreate,(0,u.default)({},e,{visible:R,domainId:r,handleCancel:function(){return C(!1)},initParam:H})))})));t.default=D},1294:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DmRoleCreate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"DmRoleDetail",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"DmRolePeople",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"DomainRolePromise",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"DomainRoleUserCreate",{enumerable:!0,get:function(){return o.default}});var a=r(n(1295)),l=r(n(1308)),u=r(n(1003)),i=r(n(1001)),o=r(n(1002))},1295:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(90);var a=r(n(34)),l=r(n(67));n(134);var u=r(n(21)),i=r(n(35)),o=r(n(0)),c=n(64),f=n(743);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){var t=e.visible,n=e.handleCancel,r=e.initParam,l=e.domainId,d=e.privilegeDomainRoleStore.createDomainRoleAction,p=(0,c.useTranslation)().t,m=u.default.useForm(),v=(0,i.default)(m,1)[0],g=o.default.createElement(o.default.Fragment,null,o.default.createElement(f.Btn,{onClick:n,title:"取消",isMar:!0}),o.default.createElement(f.Btn,{onClick:function(){v.submit()},title:"确定",type:"primary"}));return o.default.createElement(f.BaseModal,{title:"添加角色",visible:t,footer:g,onCancel:n,destroyOnClose:!0,cancelText:p("privilege-common.cancel"),okText:p("privilege-common.save")},o.default.createElement(u.default,{form:v,preserve:!1,onFinish:function(e){var t={domainId:l,businessType:0,role:s({},e)};d(t).then((function(e){0===e.code&&(n(),r())}))},layout:"vertical"},o.default.createElement(u.default.Item,{label:p("privilege-role.roleName"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},o.default.createElement(a.default,{placeholder:p("privilege-role.roleName")})),o.default.createElement(u.default.Item,{label:p("privilege-desc"),name:"desc"},o.default.createElement(a.default,{placeholder:p("privilege-desc")}))))};t.default=p},1296:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(158);var a=r(n(135)),l=r(n(103)),u=r(n(304)),i=r(n(0));n(1297);var o=["children","title","width"],c=function(e){var t=e.children,n=e.title,r=e.width,c=(0,u.default)(e,o);return i.default.createElement(a.default,(0,l.default)({title:n,width:r,style:{maxWidth:"calc(100vw - 120px)",maxHeight:"calc(100vh - 120px)",marginRight:"auto",marginLeft:"auto",position:"absolute",top:60,right:0,left:0,height:"100%",display:"flex",flexDirection:"column"},wrapClassName:"tiklab_modal",closable:!1},c),t)};t.default=c},1297:function(e,t,n){"use strict";n.r(t)},1298:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(81);var a=r(n(77));n(54);var l=r(n(27)),u=r(n(128)),i=r(n(0)),o=n(58);n(1299);var c=function(e){var t=e.routes,n=e.children;return i.default.createElement("div",{className:"privilege-breadcrumb"},i.default.createElement(a.default,{itemRender:function(e,t,n){var r=n.indexOf(e)===n.length-1,a=0===n.indexOf(e);return e.disabled?i.default.createElement("span",null,e.breadcrumbName):a?e.click?i.default.createElement(l.default,null,i.default.createElement(u.default,{onClick:function(){return e.click()},style:{fontSize:"var(--tiklab-font-16)"}}),e.breadcrumbName):i.default.createElement(o.Link,{to:e.path},i.default.createElement(l.default,null,i.default.createElement(u.default,{style:{fontSize:"var(--tiklab-font-16)"}}),e.breadcrumbName)):r?i.default.createElement("span",null,e.breadcrumbName):e.click?i.default.createElement("a",{onClick:function(){return e.click()},style:{cursor:"pointer"}},e.breadcrumbName):e.path?i.default.createElement(o.Link,{to:e.path},e.breadcrumbName):i.default.createElement(i.default.Fragment,null,e.breadcrumbName)},routes:t}),n)};t.default=c},1299:function(e,t,n){"use strict";n.r(t)},1300:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(314));n(76);var l=r(n(70)),u=r(n(0)),i=n(8);n(1301);var o=function(e){var t=e.userInfo,n=void 0===t?void 0:t,r=n||(0,i.getUser)();return u.default.createElement("div",{className:"tiklab-profile"},r.avatar&&"null"!==r.avatar?u.default.createElement(l.default,{src:r.avatar}):r.nickname&&"null"!==r.nickname?u.default.createElement(l.default,null,r.nickname.substring(0,1)):r.name&&"null"!==r.name?u.default.createElement(l.default,null,r.name.substring(0,1)):u.default.createElement(l.default,{size:32,icon:u.default.createElement(a.default,null)}))};t.default=o},1301:function(e,t,n){"use strict";n.r(t)},1302:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(69);var a=r(n(28));n(75);var l=r(n(23));n(54);var u=r(n(27)),i=r(n(0));n(1303);var o=function(e){var t=e.title,n=e.icon,r=e.children,o=e.style,c=void 0===o?{}:o;return i.default.createElement(a.default,null,i.default.createElement(l.default,{span:24},i.default.createElement("div",{className:"tiklab_title",style:c},i.default.createElement(u.default,null,n,i.default.createElement("span",null,t)),r)))};t.default=o},1303:function(e,t,n){"use strict";n.r(t)},1304:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(128)),l=r(n(130)),u=r(n(0));n(1305);var i=function(e){var t=e.pageCurrent,n=e.changPage,r=e.page;return u.default.createElement("div",{className:"user-page"},u.default.createElement("span",{className:"".concat(1===t?"user-page-ban":"user-page-allow"),onClick:function(){return 1===t?null:n(t-1)}},u.default.createElement(a.default,null)),u.default.createElement("span",{className:"user-page-current"},t),u.default.createElement("span",null," / ",r&&r.total),t!==r.total&&r.total?u.default.createElement("span",{className:"user-page-allow",onClick:function(){return n(t+1)}},u.default.createElement(l.default,null)):u.default.createElement("span",{className:"user-page-ban"},u.default.createElement(l.default,null)))};t.default=i},1305:function(e,t,n){"use strict";n.r(t)},1306:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(54);var a=r(n(27)),l=r(n(0));n(1307);var u=function(e){var t=e.icon,n=e.type,r=e.title,u=e.onClick,i=e.isMar,o=e.children;return l.default.createElement("div",{className:"privilege-btn ".concat(n?"privilege-btn-".concat(n):""," ").concat(i?"privilege-btn-mar":""),onClick:u},o||l.default.createElement(a.default,null,t&&l.default.createElement("span",{className:"privilege-btn-icon"},t),r))};t.default=u},1307:function(e,t,n){"use strict";n.r(t)},1308:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(103));n(69);var l=r(n(28));n(54);var u=r(n(27)),i=r(n(128));n(436);var o=r(n(192)),c=r(n(0)),f=n(64),d=r(n(1001)),s=r(n(1003)),p=o.default.TabPane,m=function(e){var t=(0,f.useTranslation)().t,n=e.roleDetailParams,r=e.domainId,m=e.bgroup,v=e.close;return c.default.createElement("div",{className:"tiklab_domain_role_detail"},c.default.createElement(u.default,{className:"tiklab_domain_role_detail_up"},c.default.createElement(i.default,{onClick:function(){return v()},className:"details_up_back"}),n.name||"权限详情"),c.default.createElement(l.default,null,c.default.createElement(u.default,null,c.default.createElement("div",{className:"label_item"},c.default.createElement("label",null,"名称:"),c.default.createElement("span",null,n.role.name)),c.default.createElement("div",{className:"label_item"},c.default.createElement("label",null,"类型:"),c.default.createElement("span",null,"system"===n.group?"内置":"自定义")))),c.default.createElement(o.default,{defaultActiveKey:"people"},c.default.createElement(p,{tab:t("privilege-role.people"),key:"people"},c.default.createElement(d.default,(0,a.default)({},e,{group:n.group,dmRoleDetail:n,domainId:r,bgroup:m}))),c.default.createElement(p,{tab:t("privilege-role.promise"),key:"promise"},c.default.createElement(s.default,(0,a.default)({},e,{group:n.group,roleDetail:n,bgroup:m})))))};t.default=m},1309:function(e,t,n){"use strict";n.r(t)},1310:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1311)).default;t.default=a},1311:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(304)),l=(r(n(0)),n(56)),u=n(203),i=["code","disabled","systemRoleStore"],o=(0,l.inject)(u.SYSTEM_ROLE_STORE)((0,l.observer)((function(e){var t=e.code,n=void 0===t?"":t,r=(e.disabled,e.systemRoleStore),l=(0,a.default)(e,i),u=r.systemPermissions;try{return n?u.includes(n)?l.children:null:l.children}catch(e){return u.includes(n)?l.children:null}})));t.default=o},1312:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1313)).default;t.default=a},1313:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(304)),l=(r(n(0)),n(56)),u=n(8),i=n(203),o=["code","domainId","systemRoleStore"],c=(0,l.inject)(i.SYSTEM_ROLE_STORE)((0,l.observer)((function(e){var t=e.code,n=void 0===t?"":t,r=e.domainId,l=e.systemRoleStore,i=(0,a.default)(e,o),c=l.domainPermissions,f=(0,u.getUser)().userId;try{return n?c["".concat(f,"_").concat(r)]&&c["".concat(f,"_").concat(r)].includes(n)?i.children:null:i.children}catch(e){return c["".concat(f,"_").concat(r)]&&c["".concat(f,"_").concat(r)].includes(n)?i.children:null}})));t.default=c},1314:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1315)).default;t.default=a},1315:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(97);var l=r(n(52));n(75);var u=r(n(23));n(69);var i=r(n(28));n(90);var o=r(n(34)),c=r(n(138)),f=r(n(304)),d=r(n(137)),s=r(n(67));n(54);var p=r(n(27)),m=r(n(204)),v=r(n(306));n(123);var g=r(n(40)),y=r(n(302)),b=r(n(35)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),O=n(56),E=n(10),j=n(64),P=n(916),w=n(1034),S=r(n(1005)),k=n(203),_=r(n(1007)),D=n(292),R=n(1008),C=n(743);n(1321);var I=["children","sort"],M=["children","sort"];function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=(0,O.inject)(k.PRIVILEGE_PROJECT_FEATURE_STORE,k.PRIVILEGE_SYSTEM_STORE)((0,O.observer)((function(e){var t=(0,j.useTranslation)().t,n=e.privilegeProjectFeatureStore,r=e.privilegeSystemStore,a=r.deleteFunctionAction,O=r.getFunctionListListAction,k=r.updateFunctionSortAction,T=n.privilegeProjectTreeData,x=n.getDmPrivilegeTree,A=(0,h.useState)(""),N=(0,b.default)(A,2),L=N[0],B=N[1],z=(0,h.useState)(!1),W=(0,b.default)(z,2),U=W[0],G=W[1],K=(0,h.useState)({}),V=(0,b.default)(K,2),H=V[0],J=V[1],Y=(0,h.useState)({}),q=(0,b.default)(Y,2),X=q[0],Z=q[1],$={type:"2",pageParam:{pageSize:99999,currentPage:1}},Q=(0,h.useState)($),ee=(0,b.default)(Q,2),te=ee[0],ne=ee[1],re=[{title:t("privilege-feature-name"),dataIndex:"name",key:"name"},{title:t("privilege-feature-code"),dataIndex:"code",key:"code"},{title:"操作",dataIndex:"action",width:"10%",render:function(e,t){return h.default.createElement(p.default,{size:"middle"},!t.parentFunction&&h.default.createElement(g.default,{title:"新增"},h.default.createElement(y.default,{onClick:function(){return ie(t.id)}})),h.default.createElement(g.default,{title:"编辑"},h.default.createElement(v.default,{onClick:function(){return ce(t)}})),!t.children&&h.default.createElement(g.default,{title:"删除"},h.default.createElement(m.default,{onClick:function(){return fe(t)}})))}}];(0,h.useEffect)((function(){ae()}),[te]);var ae=function(){O(te).then((function(e){if(!e.code){var t=ue(e.data);x(t)}}))},le=function(){O($).then((function(e){if(!e.code){var t=ue(e.data);x(t)}}))},ue=function(e){var t=(0,D.sort)(e.map((function(e){return!e.parentFunction&&e})).filter(Boolean)),n=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&e})).filter(Boolean),r=[];return t.forEach((function(e){var t=e.id,a=(0,D.sort)(n.filter((function(e){return e.parentFunction.id===t})));a.length>0?r.push(F(F({},e),{},{children:a})):r.push(e)})),r},ie=(0,h.useCallback)((function(e){B(e),G(!0)}),[]),oe=(0,h.useCallback)((function(){B(""),J({}),G(!1),le()}),[]),ce=(0,h.useCallback)((function(e){J(e),G(!0)}),[]),fe=(0,h.useCallback)((function(e){a(e.id).then((function(e){e.code||ae()}))}),[]),de=(0,h.useCallback)((function(e){var t,n=e.dragId,r=e.dropId,a=e.drag,l=e.drop,u=a.sort,i=-1,o=[],c=[],s={},p={};if(l.children){var m=[],v=X[r],g=l.children[0];if(v){var y=pe(g.id);s=F(F({},a),{},{parentFunction:y.parentFunction}),u<y.sort?(m=[s].concat((0,d.default)(l.children)),se(m).then((function(e){le()}))):(i=l.children.findIndex((function(e){return e.id===y.id})),l.children.splice(i,0,a),l.children.forEach((function(e){c.push(e.sort)})),o=(0,R.sortNum)(c),l.children=l.children.map((function(e,t){return F(F({},e),{},{sort:o[t]})})),se(l.children).then((function(e){le()})))}}if(l.parentFunction){var b=l.parentFunction.id,h=pe(b);i=(t=h.children.filter((function(e){return e.id!==n}))).findIndex((function(e){return e.id===l.id})),t.splice(i,0,F(F({},a),{},{parentFunction:h.children[0].parentFunction})),t.forEach((function(e){c.push(e.sort)})),o=(0,R.sortNum)(c),h.children=t.map((function(e,t){return F(F({},e),{},{sort:o[t]})})),se(h.children).then((function(e){le()}))}else{a.children;var O=a.sort,E=(0,f.default)(a,I),j=(l.children,l.sort),P=(0,f.default)(l,M);if(a.parentFunction&&!l.parentFunction){a.parentFunction.id;p=F(F({},P),{},{parentFunction:l.parentFunction,sort:O}),s=F(F({},E),{},{parentFunction:l.parentFunction,sort:j}),se([p,s]).then((function(e){le()}))}else{var w=[F(F({},E),{},{sort:j}),F(F({},P),{},{sort:O})];se(w).then((function(e){le()}))}}}),[T,X]),se=function(e){return k({list:e})},pe=(0,h.useCallback)((function(e){var t={};return function n(r){for(var a=0;a<r.length;a++){var l=r[a];if(l.id===e){t=l;break}l.children&&l.children.length>0&&n(l.children)}return t}((0,E.toJS)(T)),t}),[T]);return h.default.createElement("div",{className:"privilege-dm"},h.default.createElement("div",{className:"privilege-dm_content"},h.default.createElement(C.TitleAction,{title:"项目功能管理",style:{paddingLeft:8}},h.default.createElement(C.Btn,{icon:h.default.createElement(y.default,null),type:"primary",onClick:function(){return G(!0)},title:t("privilege-add-feature")})),h.default.createElement(i.default,null,h.default.createElement(u.default,{span:24},h.default.createElement(i.default,{justify:"space-between",style:{paddingBottom:16}},h.default.createElement(o.default,{placeholder:t("privilege-search")+t("privilege-orga-name"),onPressEnter:function(e){return function(e){var t=e.target.value;ne(F(F({},te),{},{name:t}))}(e)},style:{width:240},prefix:h.default.createElement(c.default,null)})))),h.default.createElement(i.default,null,h.default.createElement(u.default,{span:24,id:"project-drag-sorting"},h.default.createElement(P.DndProvider,{backend:w.HTML5Backend},h.default.createElement(l.default,{dataSource:(0,E.toJS)(T),columns:re,rowKey:"id",tableLayout:"fixed",pagination:!1,components:{body:{row:_.default}},onRow:function(e,t){return{record:e,data:(0,E.toJS)(T),index:t,moveRow:de}},expandable:{onExpand:function(e,t){Z(F(F({},X),{},(0,s.default)({},t.id,e)))}}}))))),h.default.createElement(S.default,{data:T,editData:H,visible:U,cancelAdd:oe,parentId:L,urlType:"project"}))})));t.default=A},1320:function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,l;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(l=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,l[a]))return!1;for(a=r;0!=a--;){var u=l[a];if(!e(t[u],n[u]))return!1}return!0}return t!=t&&n!=n}},1321:function(e,t,n){"use strict";n.r(t)},1322:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1323)).default;t.default=a},1323:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(69);var l=r(n(28));n(75);var u=r(n(23));n(97);var i=r(n(52)),o=r(n(302)),c=r(n(67)),f=r(n(204)),d=r(n(309));n(123);var s=r(n(40)),p=r(n(306));n(54);var m=r(n(27));n(280);var v=r(n(160)),g=r(n(35)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),b=n(56),h=n(64),O=r(n(1009)),E=n(1324),j=n(743),P=n(203);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(1326);var _=(0,b.inject)(P.PRIVILEGE_PROJECT_ROLE_STORE,P.SYSTEM_ROLE_STORE)((0,b.observer)((function(e){var t=e.privilegeProjectRoleStore,n=e.systemRoleStore,r=e.isBase,a=void 0!==r&&r,c=(0,h.useTranslation)().t,b=t.getProjectRoles,P=t.privilegeProjectRole,w=n.deleteRoleAction,S=n.findRolePageAction,_=n.setDefaultRoleAction,D=n.rolePage,R=(0,y.useState)(!1),C=(0,g.default)(R,2),I=C[0],M=C[1],T=(0,y.useState)({}),x=(0,g.default)(T,2),F=x[0],A=x[1],N=(0,y.useState)(null),L=(0,g.default)(N,2),B=L[0],z=L[1],W=(0,y.useState)(""),U=(0,g.default)(W,2),G=U[0],K=U[1],V=(0,y.useState)({pageSize:10,currentPage:1}),H=(0,g.default)(V,1)[0],J=(0,y.useState)({pageParam:H}),Y=(0,g.default)(J,2),q=Y[0],X=Y[1],Z=[{title:"角色名称",dataIndex:"name",width:"40%",ellipsis:!0,render:function(e,t){var n=t.businessType,r=t.defaultRole;return 1===n&&1===r?y.default.createElement(m.default,null,y.default.createElement("div",{className:"tiklab_project_role-name",onClick:function(){return ae(t)}},e),y.default.createElement(v.default,{color:"#87d068"},"默认"),y.default.createElement(v.default,null,"管理员")):1===r?y.default.createElement(m.default,null,y.default.createElement("div",{className:"tiklab_project_role-name",onClick:function(){return ae(t)}},e),y.default.createElement(v.default,{color:"#87d068"},"默认")):1===n?y.default.createElement(m.default,null,y.default.createElement("div",{className:"tiklab_project_role-name",onClick:function(){return ae(t)}},e),y.default.createElement(v.default,null,"管理员")):y.default.createElement("div",{className:"tiklab_project_role-name",onClick:function(){return ae(t)}},e)}},{title:"成员数",dataIndex:"user",width:"25%",ellipsis:!0,render:function(e,t){var n=t.roleUserList,r=n&&n.length>0?n.length:0;return"".concat(r,"人")}},{title:"类型",dataIndex:"group",width:"25%",ellipsis:!0,render:function(e){return"system"===e?"内置":c("privilege-role.custom")}},{title:"操作",dataIndex:"action",render:function(e,t){return a?y.default.createElement(m.default,null,y.default.createElement(s.default,{title:"编辑"},y.default.createElement(p.default,{onClick:function(){return te(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===t.defaultRole&&y.default.createElement(s.default,{title:"设置默认"},y.default.createElement(d.default,{onClick:function(){return ee(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),y.default.createElement(s.default,{title:"删除"},y.default.createElement(f.default,{onClick:function(){return Q(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))):y.default.createElement(m.default,null,y.default.createElement(s.default,{title:"编辑"},y.default.createElement(p.default,{onClick:function(){return te(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===t.defaultRole&&y.default.createElement(s.default,{title:"设置默认"},y.default.createElement(d.default,{onClick:function(){return ee(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===t.businessType&&"system"!==t.group&&y.default.createElement(s.default,{title:"删除"},y.default.createElement(f.default,{onClick:function(){return Q(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}];(0,y.useEffect)((function(){$()}),[q]);var $=function(){S(k({type:"2",group:"system"},q)).then((function(e){0===e.code&&b(e.data.dataList)}))},Q=function(e){w(e).then((function(e){e.code||X({pageParam:H})}))},ee=function(e){_(e).then((function(e){e.code||X({pageParam:H})}))},te=function(e){A(e),M(!0)},ne=(0,y.useCallback)((function(){A({}),M(!1)}),[I]),re=function(e){K(e),M(!0)},ae=function(e){z(e)},le=function(){X({pageParam:H})};return y.default.createElement("div",{className:"tiklab_project_role"},B?y.default.createElement(E.ProjectRoleDetail,{roleDetailParams:B,close:function(){z(null),le()}}):y.default.createElement("div",{className:"tiklab_project_role_table"},y.default.createElement(j.TitleAction,{title:"项目角色",style:{paddingLeft:8}},y.default.createElement(m.default,null,a?y.default.createElement(j.Btn,{icon:y.default.createElement(o.default,null),onClick:function(){return re("system")},title:c("privilege-role.addSystemRole")}):y.default.createElement(j.Btn,{icon:y.default.createElement(o.default,null),type:"primary",onClick:function(){return re("custom")},title:c("privilege-role.addRole")}))),y.default.createElement(l.default,null,y.default.createElement(u.default,{span:24},y.default.createElement(i.default,{columns:Z,dataSource:P,rowKey:function(e){return e.id},pagination:!1}),D&&D.total>1&&y.default.createElement(j.Page,{pageCurrent:q.pageParam.currentPage,changPage:function(e){X(k(k({},q),{},{pageParam:{pageSize:10,currentPage:e}}))},page:D})))),y.default.createElement(O.default,{visible:I,cancel:ne,editData:F,group:G,initParam:le,urlType:"project"}))})));t.default=_},1324:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ProjectRoleDetail",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ProjectRoleDetailPeople",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"ProjectRoleDetailPromiss",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"ProjectRoleUserAdd",{enumerable:!0,get:function(){return i.default}});var a=r(n(1325)),l=r(n(1013)),u=r(n(1010)),i=r(n(1011))},1325:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(103));n(69);var l=r(n(28));n(54);var u=r(n(27)),i=r(n(128));n(436);var o=r(n(192)),c=r(n(0)),f=n(64),d=r(n(1010)),s=r(n(1013)),p=o.default.TabPane,m=function(e){var t=e.roleDetailParams,n=e.close,r=(0,f.useTranslation)().t;return c.default.createElement("div",{className:"tiklab_project_role_detail"},c.default.createElement(u.default,{className:"tiklab_project_role_detail_up"},c.default.createElement(i.default,{onClick:function(){return n()},className:"details_up_back"}),t.name||"权限详情"),c.default.createElement(l.default,null,c.default.createElement(u.default,null,c.default.createElement("div",{className:"label_item"},c.default.createElement("label",null,"名称:"),c.default.createElement("span",null,t.name)),c.default.createElement("div",{className:"label_item"},c.default.createElement("label",null,"类型:"),c.default.createElement("span",null,"system"===t.group?"内置":"自定义")))),c.default.createElement(o.default,{defaultActiveKey:"people"},c.default.createElement(p,{tab:r("privilege-role.people"),key:"people"},c.default.createElement(d.default,(0,a.default)({},e,{group:t.group,roleDetail:t}))),c.default.createElement(p,{tab:r("privilege-role.promise"),key:"promise"},c.default.createElement(s.default,(0,a.default)({},e,{group:t.group,roleDetail:t})))))};t.default=m},1326:function(e,t,n){"use strict";n.r(t)},1327:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1328)).default;t.default=a},1328:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(69);var l=r(n(28));n(75);var u=r(n(23));n(97);var i=r(n(52)),o=r(n(302)),c=r(n(67)),f=r(n(204)),d=r(n(309));n(123);var s=r(n(40)),p=r(n(306));n(54);var m=r(n(27));n(280);var v=r(n(160)),g=r(n(35)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),b=n(56),h=n(64),O=r(n(1009)),E=n(203),j=n(1329),P=n(743);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(1331);var _=(0,b.inject)(E.SYSTEM_ROLE_STORE)((0,b.observer)((function(e){var t=e.systemRoleStore,n=e.isBase,r=void 0!==n&&n,a=(0,h.useTranslation)().t,c=t.findRolePageAction,b=t.rolePage,E=t.deleteRoleAction,w=t.privilegeSystemRole,S=t.setDefaultRoleAction,_=(0,y.useState)(!1),D=(0,g.default)(_,2),R=D[0],C=D[1],I=(0,y.useState)({}),M=(0,g.default)(I,2),T=M[0],x=M[1],F=(0,y.useState)(""),A=(0,g.default)(F,2),N=A[0],L=A[1],B=(0,y.useState)(null),z=(0,g.default)(B,2),W=z[0],U=z[1],G={pageSize:13,currentPage:1},K=(0,y.useState)({pageParam:G}),V=(0,g.default)(K,2),H=V[0],J=V[1];(0,y.useEffect)((function(){c(H)}),[H]);var Y=[{title:"角色名称",dataIndex:"name",width:"40%",ellipsis:!0,render:function(e,t){var n=t.businessType,r=t.defaultRole;return 1===n&&1===r?y.default.createElement(m.default,null,y.default.createElement("div",{className:"tiklab_system_role_name",onClick:function(){return ee(t)}},e),y.default.createElement(v.default,{color:"#87d068",style:{marginLeft:8,marginRight:0}},"默认"),y.default.createElement(v.default,{style:{marginLeft:8,marginRight:0}},"管理员")):1===r?y.default.createElement(m.default,null,y.default.createElement("div",{className:"tiklab_system_role_name",onClick:function(){return ee(t)}},e),y.default.createElement(v.default,{color:"#87d068",style:{marginLeft:8,marginRight:0}},"默认")):1===n?y.default.createElement(m.default,null,y.default.createElement("div",{className:"tiklab_system_role_name",onClick:function(){return ee(t)}},e),y.default.createElement(v.default,{style:{marginLeft:8,marginRight:0}},"管理员")):y.default.createElement("div",{className:"tiklab_system_role_name",onClick:function(){return ee(t)}},e)}},{title:"成员数",dataIndex:"roleUserList",width:"25%",ellipsis:!0,render:function(e,t){var n=t.roleUserList,r=n&&n.length>0?n.length:0;return"".concat(r,"人")}},{title:"类型",dataIndex:"group",width:"26%",ellipsis:!0,render:function(e){return"system"===e?"内置":a("privilege-role.custom")}},{title:"操作",dataIndex:"action",render:function(e,t){return r?y.default.createElement(m.default,null,y.default.createElement(s.default,{title:"编辑"},y.default.createElement(p.default,{onClick:function(){return X(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===t.defaultRole&&y.default.createElement(s.default,{title:"设置默认"},y.default.createElement(d.default,{onClick:function(){return Z(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),y.default.createElement(s.default,{title:"删除"},y.default.createElement(f.default,{onClick:function(){return q(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))):y.default.createElement(m.default,null,y.default.createElement(s.default,{title:"编辑"},y.default.createElement(p.default,{onClick:function(){return X(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===t.defaultRole&&y.default.createElement(s.default,{title:"设置默认"},y.default.createElement(d.default,{onClick:function(){return Z(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===t.businessType&&"system"!==t.group&&y.default.createElement(s.default,{title:"删除"},y.default.createElement(f.default,{onClick:function(){return q(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}],q=function(e){E(e).then((function(e){e.code||J({pageParam:G})}))},X=function(e){x(e),C(!0)},Z=function(e){S(e).then((function(e){e.code||J({pageParam:G})}))},$=(0,y.useCallback)((function(){x({}),C(!1)}),[R]),Q=function(e){L(e),C(!0)},ee=function(e){U(e)},te=function(){J({pageParam:G})};return y.default.createElement("div",{className:"tiklab_system_role"},W?y.default.createElement(j.RoleDetail,{roleDetailParams:W,close:function(){U(null),te()}}):y.default.createElement("div",{className:"tiklab_system_role_main"},y.default.createElement(P.TitleAction,{title:"权限",style:{paddingLeft:8}},y.default.createElement(m.default,null,r?y.default.createElement(P.Btn,{icon:y.default.createElement(o.default,null),onClick:function(){return Q("system")},title:a("privilege-role.addSystemRole")}):y.default.createElement(P.Btn,{icon:y.default.createElement(o.default,null),type:"primary",onClick:function(){return Q("custom")},title:a("privilege-role.addRole")}))),y.default.createElement(l.default,null,y.default.createElement(u.default,{span:24},y.default.createElement(i.default,{columns:Y,dataSource:w,rowKey:function(e){return e.id},pagination:!1}),b&&b.total>1&&y.default.createElement(P.Page,{pageCurrent:H.pageParam.currentPage,changPage:function(e){J(k(k({},H),{},{pageParam:{pageSize:12,currentPage:e}}))},page:b})))),y.default.createElement(O.default,{visible:R,cancel:$,editData:T,group:N,initParam:te,urlType:"system"}))})));t.default=_},1329:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RoleDetail",{enumerable:!0,get:function(){return a.default}});var a=r(n(1330));r(n(1014)),r(n(1015)),r(n(1016))},1330:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(103));n(69);var l=r(n(28));n(54);var u=r(n(27)),i=r(n(128));n(436);var o=r(n(192)),c=r(n(0)),f=r(n(1014)),d=r(n(1016)),s=n(64),p=o.default.TabPane,m=function(e){var t=e.roleDetailParams,n=e.close,r=(0,s.useTranslation)().t;return c.default.createElement("div",{className:"tiklab_system_role_detail"},c.default.createElement(u.default,{className:"tiklab_system_role_detail_up"},c.default.createElement(i.default,{onClick:function(){return n()},className:"details_up_back"}),t.name||"权限详情"),c.default.createElement(l.default,null,c.default.createElement(u.default,null,c.default.createElement("div",{className:"label_item"},c.default.createElement("label",null,"名称:"),c.default.createElement("span",null,t.name)),c.default.createElement("div",{className:"label_item"},c.default.createElement("label",null,"类型:"),c.default.createElement("span",null,"system"===t.group?"内置":"自定义")))),c.default.createElement(o.default,{defaultActiveKey:"people"},c.default.createElement(p,{tab:r("privilege-role.people"),key:"people"},c.default.createElement(f.default,(0,a.default)({},e,{group:t.group,roleDetail:t}))),c.default.createElement(p,{tab:r("privilege-role.promise"),key:"promise"},c.default.createElement(d.default,(0,a.default)({},e,{group:t.group,roleDetail:t})))))};t.default=m},1331:function(e,t,n){"use strict";n.r(t)},1332:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1333)).default;t.default=a},1333:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(97);var l=r(n(52));n(75);var u=r(n(23));n(69);var i=r(n(28));n(90);var o=r(n(34)),c=r(n(138));n(71);var f=r(n(36)),d=r(n(304)),s=r(n(168)),p=r(n(137)),m=r(n(67)),v=r(n(169));n(54);var g=r(n(27)),y=r(n(204)),b=r(n(306));n(123);var h=r(n(40)),O=r(n(302)),E=r(n(35)),j=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=F(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),P=n(56),w=n(64),S=n(10),k=n(916),_=n(1034),D=n(203),R=r(n(1007)),C=r(n(1005)),I=n(743),M=n(1008);n(1334);var T=["children","sort"],x=["children","sort"];function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(F=function(e){return e?n:t})(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,m.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=(0,P.inject)(D.PRIVILEGE_SYSTEM_STORE)((0,P.observer)((function(e){var t=(0,w.useTranslation)().t,n=e.privilegeSystemStore,r=n.privilegeSystemTreeData,a=n.getFunctionListListAction,P=n.deleteFunctionAction,D=n.updateFunctionSortAction,F=(0,j.useState)(""),A=(0,E.default)(F,2),L=A[0],B=A[1],z=(0,j.useState)(!1),W=(0,E.default)(z,2),U=W[0],G=W[1],K=(0,j.useState)({}),V=(0,E.default)(K,2),H=V[0],J=V[1],Y=(0,j.useState)({}),q=(0,E.default)(Y,2),X=q[0],Z=q[1],$=(0,j.useState)({pageParam:{pageSize:9999,currentPage:1}}),Q=(0,E.default)($,2),ee=Q[0],te=Q[1],ne=[{title:t("privilege-feature-name"),dataIndex:"name",key:"name",className:"column_bg_w"},{title:t("privilege-feature-code"),dataIndex:"code",key:"code"},{title:"操作",dataIndex:"action",className:"column_bg_w",width:"10%",render:function(e,t){return j.default.createElement(g.default,{size:"middle"},!t.parentFunction&&j.default.createElement(h.default,{title:"新增"},j.default.createElement(O.default,{onClick:function(){return ae(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),j.default.createElement(h.default,{title:"编辑"},j.default.createElement(b.default,{onClick:function(){return ue(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),!t.children&&j.default.createElement(h.default,{title:"删除"},j.default.createElement(y.default,{onClick:function(){return ie(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}];(0,j.useEffect)((function(){(0,v.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:case"end":return e.stop()}}),e)})))()}),[ee]);var re=function(){var e=(0,v.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(ee);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=(0,j.useCallback)((function(e){B(e.id),G(!0)}),[]),le=function(){var e=(0,v.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(""),J({}),G(!1),e.next=5,re();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(e){J(e),G(!0)},ie=function(){var e=(0,v.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.id);case 2:if(e.sent.code){e.next=6;break}return e.next=6,re();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=(0,j.useCallback)(function(){var e=(0,v.default)(s.default.mark((function e(t){var n,r,a,l,u,i,o,c,f,m,v,g,y,b,h,O,E,j,P,w,S,k;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.dragId,r=t.dropId,a=t.drag,l=t.drop,u=a.sort,i=-1,o=[],c=[],f={},m={},!l.children){e.next=31;break}if([],g=X[r],y=l.children[0],!g){e.next=31;break}if(b=fe(y.id),f=N(N({},a),{},{parentFunction:b.parentFunction}),!(u<b.sort)){e.next=22;break}return v=[f].concat((0,p.default)(l.children)),e.next=18,ce(v);case 18:return e.next=20,re();case 20:e.next=31;break;case 22:return i=l.children.findIndex((function(e){return e.id===b.id})),l.children.splice(i,0,a),l.children.forEach((function(e){c.push(e.sort)})),o=(0,M.sortNum)(c),l.children=l.children.map((function(e,t){return N(N({},e),{},{sort:o[t]})})),e.next=29,ce(l.children);case 29:return e.next=31,re();case 31:l.parentFunction?(O=l.parentFunction.id,E=fe(O),h=E.children.filter((function(e){return e.id!==n})),i=h.findIndex((function(e){return e.id===l.id})),h.splice(i,0,N(N({},a),{},{parentFunction:E.children[0].parentFunction})),h.forEach((function(e){c.push(e.sort)})),o=(0,M.sortNum)(c),E.children=h.map((function(e,t){return N(N({},e),{},{sort:o[t]})})),ce(E.children).then((function(e){re()}))):(a.children,j=a.sort,P=(0,d.default)(a,T),l.children,w=l.sort,S=(0,d.default)(l,x),a.parentFunction&&!l.parentFunction?(a.parentFunction.id,m=N(N({},S),{},{parentFunction:l.parentFunction,sort:j}),f=N(N({},P),{},{parentFunction:l.parentFunction,sort:w}),ce([m,f]).then((function(e){re()}))):(k=[N(N({},P),{},{sort:w}),N(N({},S),{},{sort:j})],ce(k).then((function(e){re()}))));case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,X]),ce=function(){var e=(0,v.default)(s.default.mark((function e(t){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={list:t},e.next=3,D(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=(0,j.useCallback)((function(e){var t={};return function n(r){for(var a=0;a<r.length;a++){var l=r[a];if(l.id===e){t=l;break}l.children&&l.children.length>0&&n(l.children)}return t}((0,S.toJS)(r)),t}),[r]);return j.default.createElement("div",{className:"systemFeature"},j.default.createElement("div",{className:"systemFeature_content"},j.default.createElement(I.TitleAction,{title:"功能管理",style:{paddingLeft:8}},j.default.createElement(f.default,{onClick:function(){return G(!0)},type:"primary",icon:j.default.createElement(O.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},t("privilege-add-feature"))),j.default.createElement(i.default,null,j.default.createElement(u.default,{span:24},j.default.createElement(i.default,{justify:"space-between",style:{paddingBottom:16}},j.default.createElement(o.default,{placeholder:t("privilege-search")+t("privilege-orga-name"),onPressEnter:function(e){return function(e){var t=e.target.value;te(N(N({},ee),{},{name:t}))}(e)},style:{width:300},prefix:j.default.createElement(c.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})})))),j.default.createElement(i.default,null,j.default.createElement(u.default,{span:24,id:"drag-sorting"},j.default.createElement(k.DndProvider,{backend:_.HTML5Backend},j.default.createElement(l.default,{dataSource:(0,S.toJS)(r),columns:ne,rowKey:"id",tableLayout:"fixed",pagination:!1,components:{body:{row:R.default}},onRow:function(e,t){return{record:e,data:(0,S.toJS)(r),index:t,moveRow:oe}},expandable:{onExpand:function(e,t){Z(N(N({},X),{},(0,m.default)({},t.id,e)))}}}))))),j.default.createElement(C.default,{data:r,editData:H,visible:U,cancelAdd:le,parentId:L,urlType:"system"}))})));t.default=L},1334:function(e,t,n){"use strict";n.r(t)},1335:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1336)).default;t.default=a},1336:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(35));n(308);var u=r(n(129)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),o=n(56),c=n(1337);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n(1338);var d=u.default.SubMenu,s=(0,c.scopedClassMaker)("privilege-header"),p=(0,o.observer)((function(e){var t=e.className,n=e.onSelectMenu,r=e.allPromise,a=void 0===r?[]:r,o=(0,i.useState)(e.selectedKeys||[]),c=(0,l.default)(o,2),f=c[0],p=c[1],m=(0,i.useState)(e.openKeys||[]),v=(0,l.default)(m,2),g=v[0],y=v[1];(0,i.useEffect)((function(){e.selectedKeys.toString()!==f.toString()&&p(e.selectedKeys),e.openKeys.toString()!==g.toString()&&y(e.openKeys)}),[e.selectedKeys,e.openKeys]);return i.default.createElement("div",{className:s("menu",{extra:[t].join(" ")})},i.default.createElement(u.default,{theme:"light",mode:"inline",className:"menu-wrap",defaultSelectedKeys:e.defaultSelectedKeys,defaultOpenKeys:e.defaultOpenKeys,openKeys:g,selectedKeys:f,onClick:function(e){p([e.key]),n(e)},onOpenChange:function(e){var t=e.find((function(e){return-1===g.indexOf(e)}));-1===g.indexOf(t)?y([t]):y(t?[t]:[])},forceSubMenuRender:!0},function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t,n){if(t.children&&t.children.length){if(!t.purviewCode)return i.default.createElement(d,{key:"".concat(t.id),title:t.title,icon:t.icon},e(t.children));if(a.includes(t.purviewCode))return i.default.createElement(d,{key:"".concat(t.id),title:t.title,icon:t.icon},e(t.children))}if(!t.purviewCode||a.includes(t.purviewCode))return i.default.createElement(i.Fragment,{key:"".concat(t.id)},t.divider&&i.default.createElement(u.default.Divider,null),i.default.createElement(u.default.Item,{icon:t.icon,key:"".concat(t.id)},t.title))}))}(e.data)))}));t.default=p},1337:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.scopedClassMaker=t.default=void 0;var a=r(n(67));var l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")};t.default=l;t.scopedClassMaker=function(e){return function(t,n){return Object.entries(t instanceof Object?t:(0,a.default)({},t,t)).filter((function(e){return!1!==e[1]})).map((function(e){return e[0]})).map((function(t){return[e,t].filter(Boolean).join("-")})).concat(n&&n.extra||[]).join(" ")}}},1338:function(e,t,n){"use strict";n.r(t)},1339:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1340)).default;t.default=a},1340:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(304));n(308);var l=r(n(129)),u=r(n(0)),i=n(56),o=["allPromise","data"],c=l.default.SubMenu,f=(0,i.observer)((function(e){var t=e.allPromise,n=void 0===t?[]:t,r=e.data,i=void 0===r?[]:r,f=(0,a.default)(e,o);return u.default.createElement(l.default,f,function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t,r){if(t.children&&t.children.length&&n.includes(t.purviewCode))return u.default.createElement(c,{key:"".concat(t.id),title:t.title,icon:t.icon},e(t.children));return n.includes(t.purviewCode)&&u.default.createElement(l.default.Item,{icon:t.icon,key:"".concat(t.id)},t.title)}))}(i))}));t.default=f},1341:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(926);var a=r(n(919)),l=r(n(0));n(1342);var u=function(e){var t=e.homePath,n=l.default.createElement(l.default.Fragment,null,"资源不存在或者没有访问权限，",l.default.createElement("span",{className:"tiklab-privilege-back-home",onClick:function(){return e.history.push(t||"/")}},"点击这里"),"返回首页");return l.default.createElement(a.default,{status:"404",title:"404",subTitle:n})};t.default=u},1342:function(e,t,n){"use strict";n.r(t)},1343:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1344)).default;t.default=a},1344:function(e,t,n){"use strict";var r=n(18),a=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(137)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),i=n(56),o=n(203),c=n(1017);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}var d=(0,i.inject)(o.SYSTEM_ROLE_STORE)((0,i.observer)((function(e){var t=e.expandedTree,n=e.setExpandedTree,r=e.applicationRouters,a=e.outerPath,i=e.notFoundPath,o=e.systemRoleStore.systemPermissions,f=e.location.pathname;return(0,u.useEffect)((function(){if(o&&o.length>0){var u=(0,c.links)(r),d=(0,c.SameValue)(o,u,"purviewCode");d&&f===a&&(f=d.id,e.history.push(f));var s=u.find((function(e){return e.id===f}));if(s)if(t&&n([s.type].concat((0,l.default)(t))),s.purviewCode)if(!o.includes(s.purviewCode))return e.history.push(i||"/index/404")}}),[f,o]),e.children})));t.default=d},1345:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1346)).default;t.default=a},1346:function(e,t,n){"use strict";var r=n(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(a,u,i):a[u]=e[u]}a.default=e,n&&n.set(e,a);return a}(n(0)),l=n(56),u=n(8),i=n(203),o=n(1017);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var f=(0,l.inject)(i.SYSTEM_ROLE_STORE)((0,l.observer)((function(e){var t=e.projectRouters,n=e.outerPath,r=e.notFoundPath,l=e.domainId,i=e.systemRoleStore.domainPermissions,c=e.location.pathname,f=(0,u.getUser)().userId;return(0,a.useEffect)((function(){if(i){var a=i["".concat(f,"_").concat(l)];if(a&&a.length>0){var u=(0,o.SameValue)(a,t,"purviewCode");u&&c===n&&e.history.push(u.id);var d=t.find((function(e){return e.id===c}));if(d)if(d.purviewCode)if(!a.includes(d.purviewCode))return e.history.push(r||"/index/404")}}}),[c,i]),e.children})));t.default=f},1565:function(e,t,n){"use strict";n.d(t,"a",(function(){return Y}));var r=n(1319),a=n(746);function l(e){return"object"==typeof e}const u="dnd-core/BEGIN_DRAG",i="dnd-core/HOVER",o="dnd-core/DROP",c="dnd-core/END_DRAG";function f(e,t){return{type:"dnd-core/INIT_COORDS",payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const d={type:"dnd-core/INIT_COORDS",payload:{clientOffset:null,sourceClientOffset:null}};function s(e){return function(t=[],n={publishSource:!0}){const{publishSource:r=!0,clientOffset:i,getSourceClientOffset:o}=n,c=e.getMonitor(),s=e.getRegistry();e.dispatch(f(i)),function(e,t,n){Object(a.a)(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){Object(a.a)(n.getSource(e),"Expected sourceIds to be registered.")}))}(t,c,s);const p=function(e,t){let n=null;for(let r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}(t,c);if(null==p)return void e.dispatch(d);let m=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");!function(e){Object(a.a)("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(o),m=o(p)}e.dispatch(f(i,m));const v=s.getSource(p).beginDrag(c,p);if(null==v)return;!function(e){Object(a.a)(l(e),"Item must be an object.")}(v),s.pinSource(p);const g=s.getSourceType(p);return{type:u,payload:{itemType:g,item:v,sourceId:p,clientOffset:i||null,sourceClientOffset:m||null,isSourcePublic:!!r}}}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}function v(e){return function(t={}){const n=e.getMonitor(),r=e.getRegistry();!function(e){Object(a.a)(e.isDragging(),"Cannot call drop while not dragging."),Object(a.a)(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n);(function(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t})(n).forEach((u,i)=>{const c=function(e,t,n,r){const u=n.getTarget(e);let i=u?u.drop(r,e):void 0;(function(e){Object(a.a)(void 0===e||l(e),"Drop result must either be an object or undefined.")})(i),void 0===i&&(i=0===t?{}:r.getDropResult());return i}(u,i,r,n),f={type:o,payload:{dropResult:m({},t,c)}};e.dispatch(f)})}}function g(e){return function(){const t=e.getMonitor(),n=e.getRegistry();!function(e){Object(a.a)(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);const r=t.getSourceId();if(null!=r){n.getSource(r,!0).endDrag(t,r),n.unpinSource()}return{type:c}}}function y(e,t){return null===t?null===e:Array.isArray(e)?e.some(e=>e===t):e===t}function b(e){return function(t,{clientOffset:n}={}){!function(e){Object(a.a)(Array.isArray(e),"Expected targetIds to be an array.")}(t);const r=t.slice(0),l=e.getMonitor(),u=e.getRegistry();return function(e,t,n){for(let r=e.length-1;r>=0;r--){const a=e[r];y(t.getTargetType(a),n)||e.splice(r,1)}}(r,u,l.getItemType()),function(e,t,n){Object(a.a)(t.isDragging(),"Cannot call hover while not dragging."),Object(a.a)(!t.didDrop(),"Cannot call hover after drop.");for(let t=0;t<e.length;t++){const r=e[t];Object(a.a)(e.lastIndexOf(r)===t,"Expected targetIds to be unique in the passed array.");const l=n.getTarget(r);Object(a.a)(l,"Expected targetIds to be registered.")}}(r,l,u),function(e,t,n){e.forEach((function(e){n.getTarget(e).hover(t,e)}))}(r,l,u),{type:i,payload:{targetIds:r,clientOffset:n||null}}}}function h(e){return function(){if(e.getMonitor().isDragging())return{type:"dnd-core/PUBLISH_DRAG_SOURCE"}}}class O{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;const n=function(e){return{beginDrag:s(e),publishDragSource:h(e),hover:b(e),drop:v(e),endDrag:g(e)}}(this);return Object.keys(n).reduce((r,a)=>{const l=n[a];var u;return r[a]=(u=l,(...n)=>{const r=u.apply(e,n);void 0!==r&&t(r)}),r},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function E(e,t){return{x:e.x-t.x,y:e.y-t.y}}const j=[],P=[];j.__IS_NONE__=!0,P.__IS_ALL__=!0;class w{subscribeToStateChange(e,t={}){const{handlerIds:n}=t;Object(a.a)("function"==typeof e,"listener must be a function."),Object(a.a)(void 0===n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId;return this.store.subscribe(()=>{const t=this.store.getState(),a=t.stateId;try{a===r||a===r+1&&!function(e,t){return e!==j&&(e===P||void 0===t||(n=e,t.filter(e=>n.indexOf(e)>-1)).length>0);var n}(t.dirtyHandlerIds,n)||e()}finally{r=a}})}subscribeToOffsetChange(e){Object(a.a)("function"==typeof e,"listener must be a function.");let t=this.store.getState().dragOffset;return this.store.subscribe(()=>{const n=this.store.getState().dragOffset;n!==t&&(t=n,e())})}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return Object(a.a)(t,"Expected to find a valid source. sourceId="+e),!this.isDragging()&&t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(Object(a.a)(t,"Expected to find a valid target. targetId="+e),!this.isDragging()||this.didDrop())return!1;return y(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(Object(a.a)(t,"Expected to find a valid source. sourceId="+e),!this.isDragging()||!this.isSourcePublic())return!1;return this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:n}=t;if(!this.isDragging())return!1;const r=this.registry.getTargetType(e),a=this.getItemType();if(a&&!y(r,a))return!1;const l=this.getTargetIds();if(!l.length)return!1;const u=l.indexOf(e);return n?u===l.length-1:u>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return function(e){const{clientOffset:t,initialClientOffset:n,initialSourceClientOffset:r}=e;return t&&n&&r?E((l=r,{x:(a=t).x+l.x,y:a.y+l.y}),n):null;var a,l}(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return function(e){const{clientOffset:t,initialClientOffset:n}=e;return t&&n?E(t,n):null}(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}var S=n(1395);const k="dnd-core/REMOVE_TARGET";function _(e,t){t&&Array.isArray(e)?e.forEach(e=>_(e,!1)):Object(a.a)("string"==typeof e||"symbol"==typeof e,t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var D;!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(D||(D={}));let R=0;function C(e){const t=(R++).toString();switch(e){case D.SOURCE:return"S"+t;case D.TARGET:return"T"+t;default:throw new Error("Unknown Handler Role: "+e)}}function I(e){switch(e[0]){case"S":return D.SOURCE;case"T":return D.TARGET;default:throw new Error("Cannot parse handler ID: "+e)}}function M(e,t){const n=e.entries();let r=!1;do{const{done:e,value:[,a]}=n.next();if(a===t)return!0;r=!!e}while(!r);return!1}class T{addSource(e,t){_(e),function(e){Object(a.a)("function"==typeof e.canDrag,"Expected canDrag to be a function."),Object(a.a)("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),Object(a.a)("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);const n=this.addHandler(D.SOURCE,e,t);return this.store.dispatch(function(e){return{type:"dnd-core/ADD_SOURCE",payload:{sourceId:e}}}(n)),n}addTarget(e,t){_(e,!0),function(e){Object(a.a)("function"==typeof e.canDrop,"Expected canDrop to be a function."),Object(a.a)("function"==typeof e.hover,"Expected hover to be a function."),Object(a.a)("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);const n=this.addHandler(D.TARGET,e,t);return this.store.dispatch(function(e){return{type:"dnd-core/ADD_TARGET",payload:{targetId:e}}}(n)),n}containsHandler(e){return M(this.dragSources,e)||M(this.dropTargets,e)}getSource(e,t=!1){Object(a.a)(this.isSourceId(e),"Expected a valid source ID.");return t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Object(a.a)(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Object(a.a)(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Object(a.a)(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return I(e)===D.SOURCE}isTargetId(e){return I(e)===D.TARGET}removeSource(e){Object(a.a)(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:"dnd-core/REMOVE_SOURCE",payload:{sourceId:e}}}(e)),Object(S.a)(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Object(a.a)(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:k,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);Object(a.a)(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){Object(a.a)(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){const r=C(e);return this.types.set(r,t),e===D.SOURCE?this.dragSources.set(r,n):e===D.TARGET&&this.dropTargets.set(r,n),r}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const x=(e,t)=>e===t;function F(e=j,t){switch(t.type){case i:break;case"dnd-core/ADD_SOURCE":case"dnd-core/ADD_TARGET":case k:case"dnd-core/REMOVE_SOURCE":return j;case u:case"dnd-core/PUBLISH_DRAG_SOURCE":case c:case o:default:return P}const{targetIds:n=[],prevTargetIds:r=[]}=t.payload,a=function(e,t){const n=new Map,r=e=>{n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);const a=[];return n.forEach((e,t)=>{1===e&&a.push(t)}),a}(n,r);if(!(a.length>0||!function(e,t,n=x){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}(n,r)))return j;const l=r[r.length-1],f=n[n.length-1];return l!==f&&(l&&a.push(l),f&&a.push(f)),a}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const N={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function L(e=N,t){const{payload:n}=t;switch(t.type){case"dnd-core/INIT_COORDS":case u:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case i:return r=e.clientOffset,a=n.clientOffset,!r&&!a||r&&a&&r.x===a.x&&r.y===a.y?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}({},e,{clientOffset:n.clientOffset});case c:case o:return N;default:return e}var r,a}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){B(e,t,n[t])}))}return e}const W={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function U(e=W,t){const{payload:n}=t;switch(t.type){case u:return z({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case"dnd-core/PUBLISH_DRAG_SOURCE":return z({},e,{isSourcePublic:!0});case i:return z({},e,{targetIds:n.targetIds});case k:return-1===e.targetIds.indexOf(n.targetId)?e:z({},e,{targetIds:(r=e.targetIds,a=n.targetId,r.filter(e=>e!==a))});case o:return z({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case c:return z({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}var r,a}function G(e=0,t){switch(t.type){case"dnd-core/ADD_SOURCE":case"dnd-core/ADD_TARGET":return e+1;case"dnd-core/REMOVE_SOURCE":case k:return e-1;default:return e}}function K(e=0){return e+1}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){V(e,t,n[t])}))}return e}function J(e={},t){return{dirtyHandlerIds:F(e.dirtyHandlerIds,{type:t.type,payload:H({},t.payload,{prevTargetIds:(n=e,r="dragOperation.targetIds",a=[],r.split(".").reduce((e,t)=>e&&e[t]?e[t]:a||null,n))})}),dragOffset:L(e.dragOffset,t),refCount:G(e.refCount,t),dragOperation:U(e.dragOperation,t),stateId:K(e.stateId)};var n,r,a}function Y(e,t,n={},a=!1){const l=function(e){const t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return Object(r.a)(J,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(a),u=new w(l,new T(l)),i=new O(l,u),o=e(i,t,n);return i.receiveBackend(o),i}},737:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DomainRole",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"MenuAction",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"MenuList",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"NotFound",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"PrivilegeButton",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"PrivilegeProjectButton",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"ProjectFeature",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"ProjectNav",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"ProjectRole",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"SystemFeature",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"SystemNav",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"SystemRole",{enumerable:!0,get:function(){return c.default}});var a=r(n(1292)),l=r(n(1310)),u=r(n(1312)),i=r(n(1314)),o=r(n(1322)),c=r(n(1327)),f=r(n(1332)),d=r(n(1335)),s=r(n(1339)),p=r(n(1341)),m=r(n(1343)),v=r(n(1345))},743:function(e,t,n){"use strict";var r=n(18);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseModal",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"BreadCrumb",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Btn",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Profile",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"TitleAction",{enumerable:!0,get:function(){return i.default}});var a=r(n(1296)),l=r(n(1298)),u=r(n(1300)),i=r(n(1302)),o=r(n(1304)),c=r(n(1306))},911:function(e,t){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}}}]);