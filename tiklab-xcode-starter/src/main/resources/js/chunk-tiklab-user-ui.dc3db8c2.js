(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1023:function(e,t,r){"use strict";r.r(t)},1024:function(e,t,r){"use strict";r.r(t)},1025:function(e,t,r){"use strict";r.r(t)},1026:function(e,t,r){"use strict";r(1027)},1027:function(e,t,r){"use strict";r.r(t)},1028:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(1382)).default;t.default=n},1029:function(e,t,r){"use strict";r.r(t)},1351:function(e,t,r){"use strict";r(1023)},1352:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(1353)).default;t.default=n},1353:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(168)),l=a(r(103));r(75);var i=a(r(23));r(97);var o=a(r(52));r(69);var c=a(r(28));r(90);var d=a(r(34)),f=a(r(138)),s=a(r(302)),p=a(r(204));r(123);var m=a(r(40)),g=a(r(306));r(54);var v=a(r(27)),b=a(r(67)),y=a(r(169)),h=a(r(35)),O=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=D(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),E=r(56),w=r(10),P=r(8),k=r(64),j=r(737),S=r(749),x=a(r(1366)),_=r(206),I=a(r(874));function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(D=function(e){return e?r:t})(e)}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,b.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(1023);var N=(0,E.inject)(_.USER_STORE)((0,E.observer)((function(e){var t=e.userStore,r=e.SASSComponentSearch,a=e.saasRefresh,n=void 0!==a&&a,b=e.setSaasRefreshStatus,E=e.bgroup,_=void 0===E?"eas":E,D=e.router,U=void 0===D?"/setting/user":D,N=t.userData,R=t.getUserList,C=t.deleteUser,M=t.findRoleUserListAction,T=t.findUserPageAction,z=t.findUserOrgaList,L=t.findUserDirList,B=t.deleteUserAction,W=(0,k.useTranslation)().t,F=(0,O.useState)(!1),G=(0,h.default)(F,2),q=G[0],K=G[1],V=(0,O.useState)(!1),J=(0,h.default)(V,2),H=J[0],Y=J[1],$=(0,O.useState)({}),Z=(0,h.default)($,2),Q=Z[0],X=Z[1],ee=(0,O.useState)({pageSize:13,currentPage:1}),te=(0,h.default)(ee,1)[0],re=(0,O.useState)({pageParam:te}),ae=(0,h.default)(re,2),ne=ae[0],ue=ae[1],le=(0,O.useState)({}),ie=(0,h.default)(le,2),oe=ie[0],ce=ie[1],de=(0,O.useState)([]),fe=(0,h.default)(de,2),se=fe[0],pe=fe[1];(0,O.useEffect)((function(){return L().then((function(e){e.code||pe(e.data)})),function(){return pe([])}}),[]),(0,O.useEffect)((function(){me(ne)}),[ne]),(0,O.useEffect)((function(){n&&(me(ne),b())}),[n]);var me=function(e){T(e).then(function(){var e=(0,y.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code){e.next=6;break}return ce({total:t.data.totalPage}),e.next=4,Promise.all(ge(t.data.dataList));case 4:r=e.sent,R(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},ge=function(e){return e.map(function(){var e=(0,y.default)(u.default.mark((function e(t){var r,a,n,l,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],n={userId:t.id,scope:1,type:1},e.next=4,M(n);case 4:return l=e.sent,e.next=7,z(n);case 7:return i=e.sent,0===l.code&&l.data&&(r=l.data.map((function(e){return A(A({},e.role),{},{roleUserId:e.id})})).filter((function(e){return"1"===e.type&&1===e.scope}))),0===i.code&&i.data&&(a=i.data.slice(-1).map((function(e){return A(A({},e.orga),{},{orgaUserId:e.id})}))),e.abrupt("return",A(A({},t),{},{roleList:r,orgaList:a}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},ve=[{title:W("orga-table.nickname"),dataIndex:"nickname",key:"nickname",width:"20%",ellipsis:!0,render:function(e,t){return O.default.createElement(v.default,null,O.default.createElement(S.Profile,{userInfo:t}),e)}},{title:W("orga-table.name"),dataIndex:"name",key:"name",width:"15%",ellipsis:!0,render:function(e){return e||"--"}},{title:W("orga-table.org"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0,render:function(e,t){var r=t.orgaList;return r.length>0?O.default.createElement(v.default,null,r.map((function(e){return O.default.createElement("span",{key:e.orgaId},e.orgaName)}))):"--"}},{title:"角色",dataIndex:"role",key:"role",width:"20%",ellipsis:!0,render:function(e,t){var r=t.roleList;return r.length>0?O.default.createElement(v.default,null,r.map((function(e){return O.default.createElement("span",{key:e.id},e.name)}))):"--"}},{title:W("orga-table.type"),dataIndex:"dirId",key:"dirId",width:"15%",ellipsis:!0,render:function(e){if("0"===e)return"个人账号";var t=se.findIndex((function(t){return t.id===e}));return t>-1?se[t].name:"--"}},{title:W("orga-common.action"),key:"action",width:"10%",render:function(e,t){var r=t.dirId;if(t.type<1)return O.default.createElement(O.default.Fragment,null,"1"===r?O.default.createElement(v.default,{size:"middle"},O.default.createElement(j.PrivilegeButton,{code:"user_update_user"},"admin"!==t.name&&O.default.createElement(m.default,{title:"编辑"},O.default.createElement(g.default,{onClick:function(){return ye(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),(0,P.getUser)().userId!==t.id&&O.default.createElement(j.PrivilegeButton,{code:"user_delete_user"},"admin"!==t.name&&O.default.createElement(m.default,{title:"删除"},O.default.createElement(p.default,{onClick:function(){return be(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))):O.default.createElement(v.default,{size:"middle"},O.default.createElement(j.PrivilegeButton,{code:"user_update_user"},O.default.createElement(m.default,{title:"编辑"},O.default.createElement(g.default,{onClick:function(){return ye(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))))}}],be=function(e){var t=new FormData;t.append("id",e),B(t).then((function(t){t.code||C(e)}))},ye=function(e){X(e),K(!0),Y(!0)},he=localStorage.getItem(P.LOCALSTORAGE_KEY.AUTH_CONFIG);if(he){var Oe=JSON.parse(he);if(!Oe.authType&&-1===Oe.appName.indexOf("eas")){var Ee=Oe.authServiceUrl+"/#"+U;return O.default.createElement(I.default,{module:"用户",link:Ee})}}return O.default.createElement("div",{className:"user_content"},O.default.createElement("div",{className:"user-detail"},O.default.createElement(S.TitleAction,{title:"用户",style:{paddingLeft:8}},O.default.createElement(v.default,null,O.default.createElement(j.PrivilegeButton,{code:"user_add_user"},O.default.createElement(S.Btn,{type:"primary",onClick:function(){return K(!0)},icon:O.default.createElement(s.default,null),title:W("orga-label.addUser")})),r)),O.default.createElement(c.default,{justify:"space-between",style:{marginBottom:16}},O.default.createElement(d.default,{placeholder:W("orga-label.searchUserAccount"),onPressEnter:function(e){return function(e){var t=A(A({},ne),{},{pageParam:te});e.target.value?t.name=e.target.value:delete t.name,ue(t)}(e)},style:{width:"240px"},prefix:O.default.createElement(f.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})})),O.default.createElement(c.default,null,O.default.createElement(i.default,{span:24},O.default.createElement(o.default,{columns:ve,dataSource:N,rowKey:function(e){return e.id},pagination:!1}),oe&&oe.total>1&&O.default.createElement(S.Page,{pageCurrent:ne.pageParam.currentPage,changPage:function(e){var t=A(A({},ne),{},{pageParam:{pageSize:13,currentPage:e}});ue(t)},page:oe}))),O.default.createElement(x.default,(0,l.default)({},e,{visible:q,onCancel:function(){X({}),Y(!1),K(!1)},isEdit:H,data:(0,w.toJS)(Q),userDir:se,bgroup:_,initParams:function(){ue({pageParam:te})}}))))})));t.default=N},1354:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(158);var n=a(r(135)),u=a(r(103)),l=a(r(304)),i=a(r(0));r(1355);var o=["children","title","width"],c=function(e){var t=e.children,r=e.title,a=e.width,c=(0,l.default)(e,o);return i.default.createElement(n.default,(0,u.default)({title:r,width:a,style:{maxWidth:"calc(100vw - 120px)",maxHeight:"calc(100vh - 120px)",marginRight:"auto",marginLeft:"auto",position:"absolute",top:60,right:0,left:0,height:"100%",display:"flex",flexDirection:"column"},wrapClassName:"tiklab_modal",closable:!1},c),t)};t.default=c},1355:function(e,t,r){"use strict";r.r(t)},1356:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(81);var n=a(r(77));r(54);var u=a(r(27)),l=a(r(128)),i=a(r(0)),o=r(58);r(1357);var c=function(e){var t=e.routes,r=e.children;return i.default.createElement("div",{className:"privilege-breadcrumb"},i.default.createElement(n.default,{itemRender:function(e,t,r){var a=r.indexOf(e)===r.length-1,n=0===r.indexOf(e);return e.disabled?i.default.createElement("span",null,e.breadcrumbName):n?e.click?i.default.createElement(u.default,null,i.default.createElement(l.default,{onClick:function(){return e.click()},style:{fontSize:"var(--tiklab-font-16)"}}),e.breadcrumbName):i.default.createElement(o.Link,{to:e.path},i.default.createElement(u.default,null,i.default.createElement(l.default,{style:{fontSize:"var(--tiklab-font-16)"}}),e.breadcrumbName)):a?i.default.createElement("span",null,e.breadcrumbName):e.click?i.default.createElement("a",{onClick:function(){return e.click()},style:{cursor:"pointer"}},e.breadcrumbName):e.path?i.default.createElement(o.Link,{to:e.path},e.breadcrumbName):i.default.createElement(i.default.Fragment,null,e.breadcrumbName)},routes:t}),r)};t.default=c},1357:function(e,t,r){"use strict";r.r(t)},1358:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(314));r(76);var u=a(r(70)),l=a(r(0)),i=r(8);r(1359);var o=function(e){var t=e.userInfo,r=void 0===t?void 0:t,a=r||(0,i.getUser)();return l.default.createElement("div",{className:"tiklab-profile"},a.avatar&&"null"!==a.avatar?l.default.createElement(u.default,{src:a.avatar}):a.nickname&&"null"!==a.nickname?l.default.createElement(u.default,null,a.nickname.substring(0,1)):a.name&&"null"!==a.name?l.default.createElement(u.default,null,a.name.substring(0,1)):l.default.createElement(u.default,{size:32,icon:l.default.createElement(n.default,null)}))};t.default=o},1359:function(e,t,r){"use strict";r.r(t)},1360:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(69);var n=a(r(28));r(75);var u=a(r(23));r(54);var l=a(r(27)),i=a(r(0));r(1361);var o=function(e){var t=e.title,r=e.icon,a=e.children,o=e.style,c=void 0===o?{}:o;return i.default.createElement(n.default,null,i.default.createElement(u.default,{span:24},i.default.createElement("div",{className:"tiklab_title",style:c},i.default.createElement(l.default,null,r,i.default.createElement("span",null,t)),a)))};t.default=o},1361:function(e,t,r){"use strict";r.r(t)},1362:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(128)),u=a(r(130)),l=a(r(0));r(1363);var i=function(e){var t=e.pageCurrent,r=e.changPage,a=e.page;return l.default.createElement("div",{className:"user-page"},l.default.createElement("span",{className:"".concat(1===t?"user-page-ban":"user-page-allow"),onClick:function(){return 1===t?null:r(t-1)}},l.default.createElement(n.default,null)),l.default.createElement("span",{className:"user-page-current"},t),l.default.createElement("span",null," / ",a&&a.total),t!==a.total&&a.total?l.default.createElement("span",{className:"user-page-allow",onClick:function(){return r(t+1)}},l.default.createElement(u.default,null)):l.default.createElement("span",{className:"user-page-ban"},l.default.createElement(u.default,null)))};t.default=i},1363:function(e,t,r){"use strict";r.r(t)},1364:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(54);var n=a(r(27)),u=a(r(0));r(1365);var l=function(e){var t=e.icon,r=e.type,a=e.title,l=e.onClick,i=e.isMar,o=e.children;return u.default.createElement("div",{className:"user-btn ".concat(r?"user-btn-".concat(r):""," ").concat(i?"user-btn-mar":""),onClick:l},o||u.default.createElement(n.default,null,t&&u.default.createElement("span",{className:"user-btn-icon"},t),a))};t.default=l},1365:function(e,t,r){"use strict";r.r(t)},1366:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(168));r(877);var l=a(r(854));r(136);var i=a(r(48));r(90);var o=a(r(34));r(111);var c=a(r(44)),d=a(r(304)),f=a(r(169)),s=a(r(67));r(134);var p=a(r(21)),m=a(r(35)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),v=r(64),b=r(749),y=["role"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=function(e){var t=e.visible,r=e.onCancel,a=e.isEdit,n=void 0!==a&&a,s=e.data,h=void 0===s?{}:s,O=e.userDir,w=void 0===O?[]:O,P=e.bgroup,k=e.initParams,j=e.userStore,S=j.rolePage,x=j.createRoleUserAction,_=j.createUserAction,I=j.deleteRoleUserAction,D=j.findRolePageAction,U=j.updateUserAction,A=p.default.useForm(),N=(0,m.default)(A,1)[0],R=(0,v.useTranslation)().t,C=(0,g.useState)(1),M=(0,m.default)(C,2),T=M[0],z=M[1],L=(0,g.useState)([]),B=(0,m.default)(L,2),W=B[0],F=B[1];(0,g.useEffect)((function(){n&&N.setFieldsValue(E(E({},h),{},{role:(h.roleList||[]).map((function(e){return e.id}))}))}),[n,h]),(0,g.useEffect)((function(){t&&G({pageParam:{pageSize:10,currentPage:T},bgroup:P})}),[t]);var G=function(e){D(e).then((function(t){if(0===t.code){var r=W.concat(t.data.dataList);F(r),r.length>0&&N.setFieldsValue({role:[r[0].id]}),z(e.pageParam.currentPage)}}))},q=function(){N.resetFields(),r()},K=function(){var e=(0,f.default)(u.default.mark((function e(t){var r,a,l,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.role,a=(0,d.default)(t,y),l=E(E({},a),{},{type:0,dirId:"1"}),!n){e.next=9;break}return l=E(E({},a),{},{id:h.id,type:h.type,dirId:h.dirId}),e.next=6,U(l);case 6:i=e.sent,e.next=12;break;case 9:return e.next=11,_(l);case 11:i=e.sent;case 12:0===i.code?(n?V(r):H(r,i.data),k()):c.default.error(i.msg);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t=(h.roleList||[]).map((function(e){return e.id})),r=(h.roleList||[]).reduce((function(e,t,r){return e[t.id]=t.roleUserId,e}),{}),a=t.reduce((function(t,a,n){return e.includes(a)||t.push(r[a]),t}),[]),n=e.reduce((function(e,r,a){return t.includes(r)||e.push(r),e}),[]);0===a.length?H(n,h.id):J(a).then((function(){H(n,h.id)}))},J=function(e){var t=e.map((function(e){return I(e)}));return Promise.all(t)},H=function(e,t){if(Array.isArray(e)){var r=e.map((function(e){return x({userId:t,role:{id:e}})}));Promise.all(r).then((function(e){q()}))}else{x({userId:t,role:{id:e}}).then((function(e){0===e.code&&q()}))}},Y=function(e,t){var r=N.getFieldValue,a=N.setFieldsValue,n=r("phone"),u=r("email"),l=r("name");if(t)switch(e.field){case"name":a({phone:n}),a({email:u});break;case"phone":a({name:l}),a({email:u});break;default:a({name:l}),a({phone:n})}else switch(e.field){case"name":if(!n&&!u)return Promise.reject("账号、邮箱、手机号不能同时为空");break;case"phone":if(!l&&!u)return Promise.reject("账号、邮箱、手机号不能同时为空");break;default:if(!l&&!n)return Promise.reject("账号、邮箱、手机号不能同时为空")}return Promise.resolve()};return g.default.createElement(l.default,{placement:"right",onClose:q,visible:t,width:420,title:R(n?"adduser-module.editUser":"adduser-module.addUser"),bodyStyle:{padding:0},style:{top:48,height:"calc(100% - 48px)"},getContainer:!1},g.default.createElement("div",{className:"tiklab_user"},g.default.createElement("div",{className:"tiklab_user_form"},g.default.createElement(p.default,{form:N,onFinish:K,preserve:!1,layout:"vertical"},g.default.createElement(p.default.Item,{label:R("adduser-module.nickname"),name:"nickname",rules:[{required:!0,message:R("adduser-module.nicknameRequired")}]},g.default.createElement(o.default,{id:"user-add-nickname",disabled:h.dirId&&"1"!==h.dirId||!1})),g.default.createElement(p.default.Item,{label:R("adduser-module.name"),name:"name",rules:n||"1"===h.dirId?[{pattern:/^[a-zA-Z0-9_-]{0,16}$/,message:"账号最长16位(字母，数字，下划线，减号)"},{validator:Y}]:[{validator:Y}]},g.default.createElement(o.default,{disabled:h.dirId&&"1"!==h.dirId||!1})),g.default.createElement(p.default.Item,{label:R("adduser-module.phone"),name:"phone",rules:[{pattern:/^(?:(?:\+|00)86)?1[3-9]\d{9}$/,message:"手机号码不正确"},{validator:Y}]},g.default.createElement(o.default,{disabled:h.dirId&&"1"!==h.dirId||!1})),g.default.createElement(p.default.Item,{label:R("adduser-module.email"),name:"email",rules:[{type:"email",message:R("adduser-module.emailFormat")},{validator:Y}]},g.default.createElement(o.default,{disabled:h.dirId&&"1"!==h.dirId||!1})),g.default.createElement(p.default.Item,{label:R("adduser-module.password"),name:"password",rules:(!n||"1"===h.dirId)&&[{required:!0,message:R("adduser-module.passwordRequired")}]},g.default.createElement(o.default,{disabled:h.dirId&&"1"!==h.dirId||!1})),g.default.createElement(p.default.Item,{label:R("adduser-module.userType"),name:"dirId",initialValue:"1",rules:[{required:!0,message:R("adduser-module.userTypeRequired")}]},g.default.createElement(i.default,{disabled:!0},w.map((function(e){return g.default.createElement(i.default.Option,{key:e.id,value:e.id},e.name)})))),g.default.createElement(p.default.Item,{label:"角色",name:"role",initialValue:W.length>0?[W[0].id]:[],rules:[{required:!0,message:R("adduser-module.userTypeRequired")}]},g.default.createElement(i.default,{mode:"multiple",onPopupScroll:function(e){e.persist();var t=e.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&(T<S.total&&G({pageParam:{pageSize:10,currentPage:T+1}}))}},W.map((function(e){return g.default.createElement(i.default.Option,{key:e.id,value:e.id},e.name)})))))),g.default.createElement("div",{className:"tiklab_user_footer"},g.default.createElement(b.Btn,{type:"primary",onClick:function(){N.submit()}},R("orga-common.save")))))},P=(0,g.memo)(w);t.default=P},1367:function(e,t,r){"use strict";r.r(t)},1368:function(e,t,r){"use strict";r(1024)},1369:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(1370)).default;t.default=n},1370:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(75);var u=a(r(23));r(123);var l=a(r(40)),i=a(r(207));r(69);var o=a(r(28));r(71);var c=a(r(36));r(54);var d=a(r(27));r(76);var f=a(r(70)),s=a(r(35)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),m=r(284),g=r(8),v=r(749),b=a(r(874));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}r(1024);var h=[{id:2,name:"LDAP",desc:"同步LDAP用户以及组织架构",icon:r(1371)},{id:4,name:"企业微信",desc:"同步企业微信用户以及组织架构",icon:r(1372)}],O=function(e){var t=e.router,r=void 0===t?"/setting/dir":t,a=(0,p.useState)([]),n=(0,s.default)(a,2),y=n[0],O=n[1],E=(0,m.useHasPointPlugin)("directory"),w=(0,g.getVersionInfo)();(0,p.useEffect)((function(){return P(),function(){return O([])}}),[]);var P=function(){var e={ids:["1"]};try{0}catch(t){e={ids:["1"]}}g.Axios.post("/user/userdir/findDirByIds",e).then((function(e){if(!e.code){var t=e.data;O(t)}}))},k=localStorage.getItem(g.LOCALSTORAGE_KEY.AUTH_CONFIG);if(k){var j=JSON.parse(k);if(!j.authType&&-1===j.appName.indexOf("eas")){var S=j.authServiceUrl+"/#"+r;return p.default.createElement(b.default,{module:"用户目录",link:S})}}return p.default.createElement("div",{className:"directory"},p.default.createElement(o.default,{className:"directory-wrap"},p.default.createElement(u.default,{span:24},p.default.createElement(v.TitleAction,{title:"用户目录"}),p.default.createElement("div",{className:"directory_content"},y.map((function(e){return p.default.createElement(o.default,{justify:"space-between",align:"middle",key:e.id,style:{padding:16}},p.default.createElement("div",{className:"directory_content_item"},p.default.createElement(f.default,{size:64}),p.default.createElement("div",{className:"directory_content_item_title"},p.default.createElement(d.default,{direction:"vertical"},p.default.createElement("div",null,e.name),p.default.createElement("p",{className:"directory_content_desc"},"这是一个描述内容")))),p.default.createElement(d.default,null,p.default.createElement(c.default,{disabled:!0},"同步数据"),p.default.createElement(c.default,{disabled:!0},"开启"),p.default.createElement(c.default,{disabled:!0},"禁止"),p.default.createElement(c.default,{disabled:!0},"配置")))})),"{}"!==JSON.stringify(w)&&!w.expired&&E?p.default.createElement(m.RemoteComponent,{point:"directory",isModalType:!0}):p.default.createElement(p.default.Fragment,null,h.map((function(e){return p.default.createElement(o.default,{justify:"space-between",align:"middle",key:e.id,style:{padding:16}},p.default.createElement("div",{className:"directory_content_item"},p.default.createElement(f.default,{size:64,src:e.icon.default}),p.default.createElement("div",{className:"directory_content_item_title"},p.default.createElement(d.default,{direction:"vertical"},p.default.createElement(d.default,null,p.default.createElement("div",null,e.name),p.default.createElement(l.default,{placement:"topRight",title:"增强功能需要去官网购买Licence"},p.default.createElement(i.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}))),p.default.createElement("p",{className:"directory_content_desc"},e.desc)))),p.default.createElement(d.default,null,p.default.createElement(c.default,{disabled:!0},"同步数据"),p.default.createElement(c.default,{disabled:!0},"开启"),p.default.createElement(c.default,{disabled:!0},"禁止"),p.default.createElement(c.default,{disabled:!0},"配置")))})))))))};t.default=O},1371:function(e,t,r){"use strict";r.r(t),t.default=r.p+"images/ldap.jpeg"},1372:function(e,t,r){"use strict";r.r(t),t.default=r.p+"images/qywechat.jpeg"},1373:function(e,t,r){"use strict";r(1025)},1374:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(1375)).default;t.default=n},1375:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(205);var u=a(r(92)),l=a(r(67)),i=a(r(35)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),c=r(56),d=r(8),f=a(r(1376)),s=a(r(1379)),p=a(r(874)),m=r(749),g=r(206);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}r(1025);var y=(0,c.inject)(g.ORG_STORE)((0,c.observer)((function(e){var t=e.orgStore,r=e.router,a=void 0===r?"/setting/orga":r,n=t.selectData,c=t.selectTreeOrgDetail,g=t.findOrgaAction,v=t.findOrgaTreeAction,y=t.findUserOrgaPageAction,h=t.findOpenUserDirListAction,O=(0,o.useState)(""),E=(0,i.default)(O,2),w=E[0],P=E[1],k=(0,o.useState)(null),j=(0,i.default)(k,2),S=j[0],x=j[1],_=(0,o.useState)(10),I=(0,i.default)(_,1)[0],D=(0,o.useState)(1),U=(0,i.default)(D,2),A=U[0],N=U[1],R=(0,o.useState)({}),C=(0,i.default)(R,2),M=C[0],T=C[1],z=(0,o.useState)([]),L=(0,i.default)(z,2),B=L[0],W=L[1],F=(0,o.useState)({}),G=(0,i.default)(F,2),q=G[0],K=G[1],V=(0,o.useState)([]),J=(0,i.default)(V,2),H=J[0],Y=J[1],$=(0,o.useState)([]),Z=(0,i.default)($,2),Q=Z[0],X=Z[1];(0,o.useEffect)((function(){h().then((function(e){e.code||X(e.data)}))}),[]),(0,o.useEffect)((function(){ee()}),[q]);var ee=function(){v(q).then((function(e){if(!e.code)if(Y(e.data&&e.data),e.data.length){var t=e.data[0];re({orgaId:t.orgaId}),P(t.orgaId)}else c(null),P("")}))},te=function(e,t,r){var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({pageParam:{currentPage:t,pageSize:I}},e);y(a).then((function(e){e.code||(T({total:e.data.totalPage,record:e.data.totalRecord}),W(e.data.dataList))}))},re=function(e){e.parentOrga?x(e.parentOrga.orgaId):x(null),g(e.orgaId).then((function(t){t.code||(P(e.orgaId),N(1),c({orgName:t.data.orgaName,parentOrg:t.data.parentOrga?t.data.parentOrga.orgaName:null,userDirType:t.data.dirId}),te({orgaId:e.orgaId},1))})).catch((function(e){console.log(e)}))},ae=localStorage.getItem(d.LOCALSTORAGE_KEY.AUTH_CONFIG);if(ae){var ne=JSON.parse(ae);if(!ne.authType&&-1===ne.appName.indexOf("eas")){var ue=ne.authServiceUrl+"/#"+a;return o.default.createElement(p.default,{module:"部门",link:ue})}}return o.default.createElement("div",{className:"orga_container"},o.default.createElement("div",{className:"orga_container_body"},o.default.createElement(f.default,{treeData:H,onSelect:re,treeParams:q,getAllTree:ee,setTreeParams:K,orgStore:t,userDir:Q}),o.default.createElement("div",{className:"orga_table"},o.default.createElement("div",{className:"orga_table_right"},o.default.createElement(m.TitleAction,{title:"部门",style:{paddingLeft:8}}),n?o.default.createElement(s.default,{data:n,tableData:B,page:M,currentPage:A,orgId:w,parentOrgaId:S,getOrgaUser:te,restTableData:function(e){N(e),te({orgaId:w},e)},userDir:Q}):o.default.createElement("div",{className:"org-table"},o.default.createElement(u.default,{description:o.default.createElement("span",null,"组织树结构为空，你需要创建一个")}))))))})));t.default=y},1376:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(446);var u=a(r(368));r(90);var l=a(r(34)),i=a(r(138));r(136);var o=a(r(48)),c=a(r(323));r(54);var d=a(r(27));r(305);var f=a(r(170)),s=a(r(173));r(123);var p=a(r(40)),m=a(r(302)),g=a(r(67));r(111);var v=a(r(44)),b=a(r(35)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),h=r(10),O=r(64),E=r(737),w=a(r(1377));function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,g.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(1378);var S=function(e){var t,r,a=e.treeData,n=e.onSelect,g=e.orgStore,P=e.getAllTree,k=e.setTreeParams,S=e.userDir,x=e.treeParams,_=void 0===x?{}:x,I=g.deleteOrgaAction,D=g.findOrgaAction,U=g.updateOrgaSortAction,A=(0,O.useTranslation)().t,N=(0,y.useState)(!1),R=(0,b.default)(N,2),C=R[0],M=R[1],T=(0,y.useState)({}),z=(0,b.default)(T,2),L=z[0],B=z[1],W=(0,y.useState)(!1),F=(0,b.default)(W,2),G=F[0],q=F[1],K=function(e){return y.default.createElement("div",{className:"orga-tree-actions-menu"},y.default.createElement(E.PrivilegeButton,{code:"orga_update_orga"},y.default.createElement("div",{className:"orga-tree-actions-item",onClick:function(t){return function(e,t){e.stopPropagation(),D(t.orgaId).then((function(e){e.code||(B(e.data),q(!0),M(!0))}))}(t,e)}},"编辑组织")),"111111"!==e.orgaId&&y.default.createElement(E.PrivilegeButton,{code:"orga_delete_orga"},y.default.createElement("div",{className:"orga-tree-actions-item",onClick:function(t){return function(e,t){if(e.stopPropagation(),t.children.length>0)return v.default.error("组织中存在部门,不能删除");I(t.orgaId).then((function(e){e.code||P()}))}(t,e)}},"删除组织")))},V=function(e){return y.default.createElement("div",{className:"tiklab_tree_actions"},y.default.createElement(d.default,null,y.default.createElement(E.PrivilegeButton,{code:"orga_add_orga"},y.default.createElement(p.default,{title:"添加部门"},y.default.createElement(m.default,{onClick:function(t){return function(e,t){e.stopPropagation(),B(t),M(!0)}(t,e)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),y.default.createElement(f.default,{overlay:K(e),trigger:["click","hover"]},y.default.createElement(s.default,{style:{fontSize:"var(--tiklab-icon-size-16)",padding:4},onClick:function(e){return e.stopPropagation()}}))))},J=function(e){return y.default.createElement("span",{className:"orga-tree_item_action"},"111111"===e.orgaId?y.default.createElement(d.default,null,y.default.createElement(c.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),e.orgaName):e.orgaName,"1"===e.dirId&&V(e))};return y.default.createElement("div",{className:"orga-tree-wrap"},y.default.createElement(l.default.Group,{compact:!0},y.default.createElement(o.default,{placeholder:"目录类型",style:{width:"40%"},onSelect:function(e){-1===e?_.orgaName?k({orgaName:_.orgaName}):k({}):k(j(j({},_),{},{dirId:e}))}},y.default.createElement(o.default.Option,{key:"-1",value:-1},A("orga-table.all")),S.map((function(e){return y.default.createElement(o.default.Option,{key:e.id,value:e.id},e.name)}))),y.default.createElement(l.default,{placeholder:A("orga-common.search")+A("orga-common.orga")+A("orga-common.name"),style:{width:"60%"},onPressEnter:function(e){return function(e){var t=e.target.value;k(j(j({},_),{},{orgaName:t}))}(e)},prefix:y.default.createElement(i.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})})),y.default.createElement("div",{className:"orga-tree-wrap-tree"},y.default.createElement("div",{className:"orga-tree-content"},y.default.createElement(u.default.DirectoryTree,{className:"draggable-tree",draggable:!0,blockNode:!0,showIcon:!1,onDrop:function(e){var t=e.node.props.eventKey,r=e.dragNode.props.eventKey,a=e.node.parentOrga.orgaId,n=e.dragNode.parentOrga.orgaId,u=e.node.sort,l=e.dragNode.sort;if(a!==n)return v.default.error("仅允许同层级部门排序");var i={list:[{parentOrga:e.node.parentOrga,orgaName:e.node.orgaName,orgaId:t,sort:l,dirId:e.node.dirId},{parentOrga:e.dragNode.parentOrga,orgaName:e.dragNode.orgaName,orgaId:r,sort:u,dirId:e.dragNode.dirId}]};U(i).then((function(e){P()}))},defaultSelectedKeys:["111111"],treeData:(t=(0,h.toJS)(a),r=[],function e(t,r){t.forEach((function(t,a){var n={key:t.orgaId,orgaName:t.orgaName,title:J(t),sort:t.sort,dirId:t.dirId,parentOrga:t.parentOrga,children:[]};r.push(n),t.children&&t.children.length>0&&e(t.children,r[a].children)}))}(t,r),r),onSelect:function(e,t){var r=t.node,a={orgaName:r.orgaName,parentOrga:r.parentOrga,sort:r.sort,orgaId:r.key,dirId:r.dirId,path:r.path};n(a)},defaultExpandAll:!0}))),y.default.createElement(w.default,{visible:C,cancelAddOrg:function(){M(!1),B({}),q(!1)},editData:L,isEdit:G,getAllTree:P,userDir:S}))};t.default=S},1377:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(136);var u=a(r(48));r(1050);var l=a(r(1006));r(90);var i=a(r(34)),o=a(r(67));r(134);var c=a(r(21)),d=a(r(35)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),s=r(10),p=r(56),m=r(8),g=r(64),v=r(749),b=r(206);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=(0,p.inject)(b.ORG_STORE)((0,p.observer)((function(e){var t=e.visible,r=e.cancelAddOrg,a=e.editData,n=void 0===a?{}:a,o=e.isEdit,p=void 0!==o&&o,b=e.getAllTree,y=e.userDir,h=void 0===y?[]:y,E=e.orgStore.findOrgaTreeAction,w=c.default.useForm(),P=(0,d.default)(w,1)[0],k=(0,g.useTranslation)().t,j=(0,f.useState)(null),S=(0,d.default)(j,2),x=S[0],_=S[1],I=(0,f.useState)([]),D=(0,d.default)(I,2),U=D[0],A=D[1];(0,f.useEffect)((function(){n&&(p?(P.setFieldsValue({parentOrga:n.parentOrga?n.parentOrga.orgaId:null,orgaName:n.orgaName,dirId:n.dirId}),_(n.path)):(P.setFieldsValue({parentOrga:n.orgaId}),n.path?_("".concat(n.orgaId,",").concat(n.path)):_("".concat(n.orgaId))))}),[n,p]),(0,f.useEffect)((function(){t&&E({dirId:"1"}).then((function(e){e.code||A(e.data)}))}),[t]);var N,R=function(){P.resetFields(),r()},C=f.default.createElement(f.default.Fragment,null,f.default.createElement(v.Btn,{onClick:R,title:"取消",isMar:!0}),f.default.createElement(v.Btn,{onClick:function(){P.submit()},title:"确定",type:"primary"}));return f.default.createElement(v.BaseModal,{title:p?k("orga-common.edit")+k("orga-common.orga"):k("orga-common.add")+k("orga-common.orga"),visible:t,onCancel:R,footer:C,destroyOnClose:!0,preserve:!1,forceRender:!0,cancelText:k("orga-common.back"),okText:k("orga-common.save")},f.default.createElement(c.default,{form:P,onFinish:function(e){var t="/user/orga/createOrga",a={orgaName:e.orgaName,parentOrga:{orgaId:e.parentOrga},dirId:e.dirId,path:x};p&&(t="/user/orga/updateOrga",a=O(O({},a),{},{orgaId:n.orgaId})),m.Axios.post(t,a).then((function(e){e.code||(b(),P.resetFields(),r())}))},layout:"vertical"},f.default.createElement(c.default.Item,{label:k("orga-label.orgaName"),name:"orgaName",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},f.default.createElement(i.default,null)),f.default.createElement(c.default.Item,{label:k("orga-label.parentOrg"),name:"parentOrga"},f.default.createElement(l.default,{disabled:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(N=[],function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var u={};if(t.orgaId===n.orgaId){if(u={title:t.orgaName,value:t.orgaId,path:t.path,disabled:!0},r.push(u),t.children&&t.children.length>0)return e(t.children,u.children=[],u.disabled)}else u={title:t.orgaName,value:t.orgaId,path:t.path,disabled:a},r.push(u);if(t.children&&t.children.length>0)return e(t.children,u.children=[],a)}))}((0,s.toJS)(U.filter((function(e){return!e.parentOrga}))),N),N),placeholder:k("orga-label.parentOrgPlaceholder"),treeDefaultExpandedKeys:[U.length>0&&U[0].orgaId],onChange:function(e,t,r){var a=r.triggerNode.props.path;_(a?"".concat(a,",").concat(e):e)}})),f.default.createElement(c.default.Item,{label:k("orga-label.userType"),name:"dirId",initialValue:"1",rules:[{required:!0,message:k("orga-table.userTypeRequired")}]},f.default.createElement(u.default,{disabled:!0},h.map((function(e){return f.default.createElement(u.default.Option,{key:e.id,value:e.id},e.name)}))))))})));t.default=E},1378:function(e,t,r){"use strict";r.r(t)},1379:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(103));r(97);var l=a(r(52)),i=a(r(302));r(69);var o=a(r(28));r(75);var c=a(r(23));r(123);var d=a(r(40)),f=a(r(204));r(54);var s=a(r(27)),p=a(r(35)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),g=r(56),v=r(64),b=r(737),y=r(749),h=a(r(1380)),O=r(206);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}r(1381);var w=(0,g.inject)(O.ORG_STORE)((0,g.observer)((function(e){var t=e.data,r=e.tableData,a=e.page,n=e.orgId,g=e.parentOrgaId,O=e.getOrgaUser,E=e.currentPage,w=e.restTableData,P=e.userDir,k=e.orgStore.deleteUserOrgaAction,j=(0,m.useState)(!1),S=(0,p.default)(j,2),x=S[0],_=S[1],I=(0,v.useTranslation)().t,D=[{title:I("orga-table.nickname"),dataIndex:["user","nickname"],width:"25%",ellipsis:!0,render:function(e,t){return m.default.createElement(s.default,null,m.default.createElement(y.Profile,{userInfo:t}),e)}},{title:I("orga-table.name"),dataIndex:["user","name"],width:"25%",ellipsis:!0},{title:I("orga-table.orgaName"),dataIndex:["orga","orgaName"],width:"20%",ellipsis:!0},{title:I("orga-table.type"),dataIndex:["user","dirId"],width:"20%",ellipsis:!0,render:function(e){var t=P.findIndex((function(t){return t.id==e}));return t>-1?P[t].name:"--"}},{title:I("orga-common.action"),key:"action",width:"10%",ellipsis:!0,render:function(e,t){return"1"===t.user.dirId&&m.default.createElement(b.PrivilegeButton,{code:"orga_delete_orga"},m.default.createElement(d.default,{title:"删除"},m.default.createElement(f.default,{onClick:function(){return U(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}],U=function(e){k(e).then((function(e){e.code||w(1)}))};return m.default.createElement("div",{className:"org-detail"},m.default.createElement(o.default,{style:{margin:"10px 0",paddingLeft:8}},m.default.createElement(c.default,{span:24},m.default.createElement(s.default,null,m.default.createElement("div",{className:"org-detail-item"},m.default.createElement("label",null,I("orga-label.orgaName"),":"),t.orgName),m.default.createElement("div",{className:"org-detail-item"},m.default.createElement("label",null,I("orga-label.parentOrg"),":"),t.parentOrg||"无上级")))),m.default.createElement(o.default,{style:{paddingLeft:8}},m.default.createElement(c.default,{span:24},m.default.createElement("div",{className:"org-detail_title2_main"},m.default.createElement("span",{className:"org-detail_user_title2"},"用户(",a.record,")"),m.default.createElement(b.PrivilegeButton,{code:"orga_add_user"},m.default.createElement(y.Btn,{type:"1"!==t.userDirType?"disabled":"primary",onClick:"1"!==t.userDirType?null:function(){_(!0)},icon:m.default.createElement(i.default,null),title:I("orga-label.addUser")}))))),m.default.createElement(o.default,null,m.default.createElement("div",{className:"org-detail-table"},m.default.createElement(l.default,{columns:D,dataSource:r,pagination:!1,rowKey:function(e){return e.id},tableLayout:"fixed"}),a&&a.total>1&&m.default.createElement(y.Page,{pageCurrent:E,changPage:w,page:a}))),m.default.createElement(h.default,(0,u.default)({},e,{orgId:n,parentOrgaId:g,visible:x,onCancel:function(){return _(!1)},getOrgaUser:O,dirId:t.dirId})))})));t.default=w},1380:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(97);var u=a(r(52));r(69);var l=a(r(28));r(75);var i=a(r(23));r(90);var o=a(r(34)),c=a(r(138)),d=a(r(137));r(54);var f=a(r(27));r(111);var s=a(r(44)),p=a(r(67)),m=a(r(35)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),v=r(56),b=r(749),y=r(8),h=r(64),O=r(206);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function w(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){i=!0,u=e},f:function(){try{l||null==r.return||r.return()}finally{if(i)throw u}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,p.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=(0,v.inject)(O.USER_STORE)((0,v.observer)((function(e){var t=(0,h.useTranslation)().t,r=e.visible,a=e.onCancel,n=e.orgId,p=e.getOrgaUser,v=e.userStore.findUserPageAction,O=(0,g.useState)([]),E=(0,m.default)(O,2),P=E[0],k=E[1],S=(0,g.useState)([]),x=(0,m.default)(S,2),_=x[0],I=x[1],D=(0,g.useState)({pageSize:6,currentPage:1}),U=(0,m.default)(D,1)[0],A=(0,g.useState)(1),N=(0,m.default)(A,2),R=N[0],C=N[1],M=(0,g.useState)({}),T=(0,m.default)(M,2),z=T[0],L=T[1],B=(0,g.useState)({pageParam:U}),W=(0,m.default)(B,2),F=W[0],G=W[1],q=(0,g.useState)([]),K=(0,m.default)(q,2),V=K[0],J=K[1];(0,g.useEffect)((function(){return H(),function(){return J([])}}),[]),(0,g.useEffect)((function(){Y(j({},F))}),[F]);var H=function(){y.Axios.post("/user/userdir/findAllList").then((function(e){e.code||J(e.data)}))},Y=function(e){v(e).then((function(e){e.code||(L({total:e.data.totalPage}),I(e.data.dataList))}))},$=function(){k([]),C(1),G({pageParam:U}),L({}),a()},Z=[{title:t("orga-table.name"),dataIndex:"nickname",key:"nickname",width:"30%",ellipsis:!0,render:function(e,t){return g.default.createElement(f.default,null,g.default.createElement(b.Profile,{userInfo:t}),e)}},{title:t("orga-table.phone"),dataIndex:"phone",key:"phone",width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("orga-table.email"),dataIndex:"email",key:"email",width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("orga-table.type"),dataIndex:"dirId",key:"dirId",width:"15%",ellipsis:!0,render:function(e){var t=V.findIndex((function(t){return t.id===e}));return t>-1?V[t].name:"--"}}],Q={selectedRowKeys:P,onSelect:function(e){X(e)},onSelectAll:function(e,t,r){var a=r.map((function(e){return e&&e.id})).filter((function(e){return void 0!==e}));if(e){var n=Array.from(new Set([].concat((0,d.default)(a),(0,d.default)(P))));k(n)}else{var u=P.filter((function(e){return!a.includes(e)}));k(u)}}},X=function(e){P.indexOf(e.id)>=0?P.splice(P.indexOf(e.id),1):P.push(e.id),k((0,d.default)(P))},ee=g.default.createElement(g.default.Fragment,null,g.default.createElement(b.Btn,{onClick:$,title:"取消",isMar:!0}),g.default.createElement(b.Btn,{onClick:function(){(function(){var e={orgaId:n,pageParam:{pageSize:9999999,currentPage:1}};return y.Axios.post("/user/userOrga/findUserOrgaList",e)})().then((function(e){if(!e.code){var t,r=!1,u=e.data.map((function(e){return e.user.id})),l=w(P);try{var i=function(){var e=t.value;if(r)return"break";r=u.some((function(t){return e===t}))};for(l.s();!(t=l.n()).done;){if("break"===i())break}}catch(e){l.e(e)}finally{l.f()}if(r)return s.default.error("存在关联的用户");var o=P.map((function(e){return t={user:{id:e},orga:{orgaId:n}},y.Axios.post("/user/userOrga/createUserOrga",t);var t}));Promise.all(o).then((function(e){k([]),C(1),G({pageParam:U}),L({}),a(),p({orgaId:n},1)}))}}))},title:"确定",type:"primary"}));return g.default.createElement(b.BaseModal,{title:"选择用户",visible:r,onCancel:$,footer:ee,width:800,destroyOnClose:!0,okText:t("orga-common.save"),cancelText:t("orga-common.back")},g.default.createElement(l.default,{style:{paddingBottom:16}},g.default.createElement(i.default,{span:24},g.default.createElement(o.default,{placeholder:"搜索账号、手机号、邮箱",style:{width:240},onPressEnter:function(e){return function(e){var t=e.target.value,r=j(j({},F),{},{name:t,pageParam:U});G(r)}(e)},prefix:g.default.createElement(c.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})}))),g.default.createElement(l.default,null,g.default.createElement(i.default,{span:24},g.default.createElement("div",{style:{width:"100%"}},g.default.createElement(u.default,{columns:Z,dataSource:_,rowSelection:Q,onRow:function(e){return{onClick:function(){return X(e)}}},rowKey:function(e){return e.id},pagination:!1}),z&&z.total>1&&g.default.createElement(b.Page,{pageCurrent:R,changPage:function(e){C(e);var t=j(j({},F),{},{pageParam:{pageSize:6,currentPage:e}});G(t)},page:z})))))})));t.default=S},1381:function(e,t,r){"use strict";r.r(t)},1382:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(168));r(97);var l=a(r(52));r(69);var i=a(r(28));r(75);var o=a(r(23)),c=a(r(302)),d=a(r(169)),f=a(r(204));r(123);var s=a(r(40)),p=a(r(306));r(54);var m=a(r(27));r(280);var g=a(r(160)),v=a(r(35)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),y=r(8),h=r(64),O=a(r(1383)),E=a(r(1384)),w=r(737),P=r(749),k=a(r(874));function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}r(1027);var S=function(e){var t=e.isBase,r=void 0!==t&&t,a=e.router,n=void 0===a?"/setting/userGroup":a,j=(0,h.useTranslation)().t,S=(0,b.useState)(!1),x=(0,v.default)(S,2),_=x[0],I=x[1],D=(0,b.useState)(null),U=(0,v.default)(D,2),A=U[0],N=U[1],R=(0,b.useState)([]),C=(0,v.default)(R,2),M=C[0],T=C[1],z=(0,b.useState)(!1),L=(0,v.default)(z,2),B=L[0],W=L[1],F=(0,b.useState)(null),G=(0,v.default)(F,2),q=G[0],K=G[1],V=[{title:"用户组",dataIndex:"name",key:"name",width:"20%",ellipsis:!0,render:function(e,t){var r=t.type;return b.default.createElement(m.default,null,b.default.createElement("div",{className:"tiklab_userGroup_name",onClick:function(){return Z(t)}},e),1===r&&b.default.createElement(g.default,null,"管理员组"))}},{title:"成员数",dataIndex:"userNum",key:"userNum",width:"20%",ellipsis:!0,render:function(e){return e+"人"}},{title:"类型",dataIndex:"group",key:"group",width:"20%",ellipsis:!0,render:function(e,t){return"system"===e?"内置":"自定义"}},{title:j("orga-common.action"),key:"action",width:"10%",render:function(e,t){var r=t.type;return b.default.createElement(m.default,{size:"middle"},1!==r&&b.default.createElement(w.PrivilegeButton,{code:"user_update_group"},b.default.createElement(s.default,{title:"编辑"},b.default.createElement(p.default,{onClick:function(){return H(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),1!==r&&b.default.createElement(w.PrivilegeButton,{code:"user_delete_group"},b.default.createElement(s.default,{title:"删除"},b.default.createElement(f.default,{onClick:function(){return Y(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))))}}];(0,b.useEffect)((function(){J()}),[]);var J=function(){var e=(0,d.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Axios.post("/usergroup/findAllGroup");case 2:0===(t=e.sent).code&&T(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(e){N(e),I(!0)},Y=function(){var e=(0,d.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,y.Axios.post("/usergroup/deleteGroup",r).then((function(e){0===e.code&&J()}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,d.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(null),I(!1),e.next=4,J();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(e){K(e),W(!0)},Q=function(){var e=(0,d.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(null),W(!1),e.next=4,J();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=localStorage.getItem(y.LOCALSTORAGE_KEY.AUTH_CONFIG);if(X){var ee=JSON.parse(X);if(!ee.authType&&-1===ee.appName.indexOf("eas")){var te=ee.authServiceUrl+"/#"+n;return b.default.createElement(k.default,{module:"用户",link:te})}}return b.default.createElement("div",{className:"tiklab_userGroup"},B?b.default.createElement(E.default,{onCancel:Q,groupData:q}):b.default.createElement("main",{className:"tiklab_userGroup_main"},b.default.createElement(i.default,null,b.default.createElement(o.default,{span:24},b.default.createElement(P.TitleAction,{title:"用户组",style:{paddingLeft:8}},b.default.createElement(w.PrivilegeButton,{code:"user_add_group"},b.default.createElement(P.Btn,{onClick:function(){I(!0)},type:"primary",icon:b.default.createElement(c.default,null),title:"新增组"}))))),b.default.createElement(i.default,null,b.default.createElement(o.default,{span:24},b.default.createElement(l.default,{columns:V,dataSource:M,rowKey:function(e){return e.id},pagination:!1})))),b.default.createElement(O.default,{open:_,onCancel:$,data:A,isBase:r}))};t.default=S},1383:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(168));r(444);var l=a(r(215));r(90);var i=a(r(34));r(111);var o=a(r(44)),c=a(r(169)),d=a(r(67));r(134);var f=a(r(21)),s=a(r(35)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),m=r(8),g=r(749),v=r(64);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(e){var t=e.isBase,r=e.open,a=e.data,n=e.onCancel,d=f.default.useForm(),b=(0,s.default)(d,1)[0],y=(0,v.useTranslation)().t;(0,p.useEffect)((function(){a&&b.setFieldsValue(h({},a))}),[a]);var O=function(){b.resetFields(),n()},E=function(){var e=(0,c.default)(u.default.mark((function e(r){var n,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=h(h({},r),{},{group:t?"system":"custom"}),!a){e.next=8;break}return l=h(h({},a),l),e.next=5,m.Axios.post("/usergroup/updateGroup",l);case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,m.Axios.post("/usergroup/createGroup",l);case 10:n=e.sent;case 11:0===n.code?(o.default.success("成功"),O()):o.default.error("失败");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=p.default.createElement(p.default.Fragment,null,p.default.createElement(g.Btn,{onClick:O,title:"取消",isMar:!0}),p.default.createElement(g.Btn,{onClick:function(){b.submit()},title:"确定",type:"primary"}));return p.default.createElement(g.BaseModal,{title:"用户组",visible:r,onCancel:O,footer:w,destroyOnClose:!0,preserve:!1,forceRender:!0,cancelText:y("orga-common.back"),okText:y("orga-common.save")},p.default.createElement(f.default,{form:b,onFinish:E,layout:"vertical"},p.default.createElement(f.default.Item,{label:"用户组名称",name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},p.default.createElement(i.default,{placeholder:"用户组名称"})),t&&p.default.createElement(f.default.Item,{label:"设置管理员组",name:"type",initialValue:0},p.default.createElement(l.default.Group,null,p.default.createElement(l.default,{value:0},"普通组"),p.default.createElement(l.default,{value:1},"管理员组"))),p.default.createElement(f.default.Item,{label:"描述",name:"description"},p.default.createElement(i.default,{placeholder:"用户组名称"}))))};t.default=O},1384:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(97);var u=a(r(52));r(69);var l=a(r(28)),i=a(r(128)),o=a(r(67));r(123);var c=a(r(40)),d=a(r(204));r(54);var f=a(r(27)),s=a(r(35)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),m=r(8),g=r(64),v=a(r(1385)),b=r(737),y=r(749);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=function(e){var t=e.onCancel,r=e.groupData,a=(0,g.useTranslation)().t,n=(0,p.useState)([]),o=(0,s.default)(n,2),h=o[0],O=o[1],w=(0,p.useState)(!1),P=(0,s.default)(w,2),k=P[0],j=P[1],S=(0,p.useState)([]),x=(0,s.default)(S,2),_=x[0],I=x[1],D=[{title:"昵称",dataIndex:"nickname",width:"25%",ellipsis:!0,render:function(e,t){return p.default.createElement(f.default,null,p.default.createElement(y.Profile,{userInfo:t}),e)}},{title:"账号",dataIndex:"name",width:"20%",ellipsis:!0},{title:a("orga-table.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:a("orga-table.email"),dataIndex:"email",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:a("orga-common.action"),key:"action",width:"10%",render:function(e,t){var r=t.type;return p.default.createElement(f.default,{size:"middle"},1!==r&&p.default.createElement(b.PrivilegeButton,{code:"user_delete_group_user"},p.default.createElement(c.default,{title:"删除"},p.default.createElement(d.default,{onClick:function(){return A(t.groupUserLinkUserId)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))))}}];(0,p.useEffect)((function(){r&&U()}),[r]);var U=function(){var e={groupId:r.id};m.Axios.post("/usergroupUser/findUserList",e).then((function(e){if(0===e.code){var t=e.data.map((function(e){return E(E({},e.user),{},{groupUserLinkUserId:e.id})})),r=t.map((function(e){return e.id}));I(r),O(t)}}))},A=function(e){var t=new FormData;t.append("id",e),m.Axios.post("/usergroupUser/deleteUser",t).then((function(e){U()}))};return p.default.createElement("main",{className:"tiklab_userGroup_main"},p.default.createElement(y.TitleAction,{title:r.name,icon:p.default.createElement(i.default,{style:{color:"var(--tiklab-blue)"},onClick:t})}),p.default.createElement(l.default,null,p.default.createElement(f.default,null,p.default.createElement("div",{className:"label_item"},p.default.createElement("label",null,"名称:"),p.default.createElement("span",null,r.name)),p.default.createElement("div",{className:"label_item"},p.default.createElement("label",null,"类型:"),p.default.createElement("span",null,"system"===r.group?"内置":"自定义")))),p.default.createElement(f.default,{direction:"vertical",size:"middle"},p.default.createElement(l.default,{justify:"space-between"},p.default.createElement("div",{className:"main_user"},"用户(",h.length,")"),p.default.createElement(b.PrivilegeButton,{code:"user_add_group_user"},p.default.createElement(y.Btn,{type:"primary",onClick:function(){j(!0)}},"添加用户"))),p.default.createElement(u.default,{columns:D,dataSource:h,rowKey:function(e){return e.id},pagination:!1})),p.default.createElement(v.default,{open:k,setOpen:j,defaultSelectedRowKeys:_,userGroupId:r.id,groupUserType:r.type}))};t.default=w},1385:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(168));r(97);var l=a(r(52));r(69);var i=a(r(28));r(75);var o=a(r(23));r(90);var c=a(r(34)),d=a(r(138)),f=a(r(137));r(111);var s=a(r(44)),p=a(r(67)),m=a(r(169));r(54);var g=a(r(27)),v=a(r(35)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),y=r(64),h=r(749),O=r(8),E=r(56),w=r(437);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,p.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=(0,E.inject)(w.USER_STORE)((0,E.observer)((function(e){var t=e.open,r=e.setOpen,a=e.getUserGroupLinkUserList,n=e.defaultSelectedRowKeys,p=e.userGroupId,E=e.groupUserType,w=void 0===E?0:E,P=e.userStore.findUserPageAction,k=(0,y.useTranslation)().t,S=(0,b.useState)([]),x=(0,v.default)(S,2),_=x[0],I=x[1],D=(0,b.useState)([]),U=(0,v.default)(D,2),A=U[0],N=U[1],R=(0,b.useState)({}),C=(0,v.default)(R,2),M=C[0],T=C[1],z=(0,b.useState)(6),L=(0,v.default)(z,1)[0],B=(0,b.useState)(1),W=(0,v.default)(B,2),F=W[0],G=W[1],q=(0,b.useState)({pageParam:{pageSize:L,currentPage:F}}),K=(0,v.default)(q,2),V=K[0],J=K[1],H=[{title:k("orga-table.nickname"),dataIndex:"nickname",key:"nickname",width:"30%",ellipsis:!0,render:function(e,t){return b.default.createElement(g.default,null,b.default.createElement(h.Profile,{userInfo:t}),e)}},{title:k("orga-table.name"),dataIndex:"name",key:"name",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:k("orga-table.phone"),dataIndex:"phone",key:"phone",width:"30%",ellipsis:!0,render:function(e){return e||"--"}},{title:k("orga-table.email"),dataIndex:"email",key:"email",width:"20%",ellipsis:!0,render:function(e){return e||"--"}}],Y=(0,b.useRef)(null);(0,b.useEffect)((function(){return Y.current=!0,$(V),function(){Y.current=!1}}),[V]),(0,b.useEffect)((function(){n&&I(n)}),[n]);var $=function(e){P(e).then(function(){var e=(0,m.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!t.code&&Y.current&&(T({total:t.data.totalPage}),N(t.data.dataList));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Z=function(){I([]),G(1),T({}),J({pageParam:{pageSize:L,currentPage:1}}),r(!1)},Q=function(e){_.indexOf(e.id)>=0?_.splice(_.indexOf(e.id),1):_.push(e.id),I((0,f.default)(_))},X={preserveSelectedRowKeys:!0,selectedRowKeys:_,onSelect:function(e){Q(e)},onSelectAll:function(e,t,r){var a=r.map((function(e){return e&&e.id})).filter((function(e){return void 0!==e}));if(e){var n=Array.from(new Set([].concat((0,f.default)(a),(0,f.default)(_))));I(n)}else{var u=_.filter((function(e){return!a.includes(e)}));I(u)}},getCheckboxProps:function(e){var t=e.type;e.id;return _.includes(e.id)&&t>0&&w>0?{disabled:!0}:{disabled:!1}}},ee=b.default.createElement(b.default.Fragment,null,b.default.createElement(h.Btn,{onClick:Z,title:"取消",isMar:!0}),b.default.createElement(h.Btn,{onClick:function(){var e={userGroup:{id:p},userIds:_};O.Axios.post("/usergroupUser/createBatchUser",e).then((function(e){if(0!==e.code)return s.default.error(e.msg);Z(),a()}))},title:"确定",type:"primary"}));return b.default.createElement(h.BaseModal,{title:"添加用户",visible:t,onCancel:Z,footer:ee,width:700,destroyOnClose:!0,cancelText:k("orga-common.back"),okText:k("orga-common.save"),className:"tiklab_userGroup_main_add"},b.default.createElement(i.default,null,b.default.createElement(o.default,{span:24},b.default.createElement(c.default,{placeholder:"昵称搜索",prefix:b.default.createElement(d.default,null),style:{width:240},onPressEnter:function(e){return function(e){var t=e.target.value,r=j(j({},V),{},{nickname:t,pageParam:{pageSize:L,currentPage:1}});G(1),J(r)}(e)}}))),b.default.createElement(i.default,null,b.default.createElement(o.default,{span:24},b.default.createElement("div",{style:{width:"100%"}},b.default.createElement(l.default,{columns:H,dataSource:A,rowSelection:X,onRow:function(e){return{onClick:function(){return Q(e)}}},rowKey:function(e){return e.id},pagination:!1}),M&&M.total>1&&b.default.createElement(h.Page,{pageCurrent:F,changPage:function(e){G(e);var t=j(j({},V),{},{pageParam:{pageSize:L,currentPage:e}});J(t)},page:M})))))})));t.default=S},1386:function(e,t,r){"use strict";r(1029)},1387:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(1388)).default;t.default=n},1388:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(168));r(136);var l=a(r(48)),i=a(r(103));r(75);var o=a(r(23));r(97);var c=a(r(52));r(69);var d=a(r(28));r(90);var f=a(r(34)),s=a(r(138)),p=a(r(302)),m=a(r(169)),g=a(r(67)),v=a(r(204));r(123);var b=a(r(40)),y=a(r(326));r(54);var h=a(r(27));r(134);var O=a(r(21)),E=a(r(35)),w=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=I(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),P=r(56),k=r(64),j=r(749),S=r(206),x=a(r(1389));r(1029);var _=r(10);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(I=function(e){return e?r:t})(e)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,g.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=(0,P.inject)(S.DOMAIN_USER_STORE,S.USER_STORE)((0,P.observer)((function(e){var t=e.domainId,r=e.domainUserStore,a=e.userStore,n=e.bgroup,g=void 0===n?"eas":n,P=r.getDomainUser,S=r.privilegeDomainUsers,I=r.createDmRoleUserAction,D=r.deleteDmRoleUserAction,A=r.deleteDmUserAction,N=r.findDmRoleListAction,R=r.findDmRoleUserListAction,C=r.findDmUserPageAction,M=a.createRoleUserAction,T=a.findUserOrgaList,z=a.findUserDirList,L=(0,k.useTranslation)().t,B=O.default.useForm(),W=(0,E.default)(B,1)[0],F=(0,w.useState)([]),G=(0,E.default)(F,2),q=G[0],K=G[1],V=(0,w.useState)({}),J=(0,E.default)(V,2),H=J[0],Y=J[1],$=(0,w.useState)(!1),Z=(0,E.default)($,2),Q=Z[0],X=Z[1],ee=(0,w.useState)([]),te=(0,E.default)(ee,2),re=te[0],ae=te[1],ne=(0,w.useState)(!1),ue=(0,E.default)(ne,2),le=ue[0],ie=ue[1],oe=(0,w.useState)({pageSize:13,currentPage:1}),ce=(0,E.default)(oe,1)[0],de=(0,w.useState)({}),fe=(0,E.default)(de,2),se=fe[0],pe=fe[1],me=(0,w.useState)({pageParam:ce}),ge=(0,E.default)(me,2),ve=ge[0],be=ge[1],ye=[{title:L("orga-table.nickname"),dataIndex:["user","nickname"],key:"nickname",width:"20%",ellipsis:!0,render:function(e,t){return w.default.createElement(h.default,null,w.default.createElement(j.Profile,{userInfo:t}),e)}},{title:L("orga-table.name"),dataIndex:["user","name"],key:"name",width:"15%",ellipsis:!0},{title:L("orga-table.org"),dataIndex:["user","org"],key:"org",width:"20%",ellipsis:!0,render:function(e,t){var r=t.orgaList;return r.length>0?w.default.createElement(h.default,null,r.map((function(e){return w.default.createElement("span",{key:e.orgaId},e.orgaName)}))):"--"}},{title:"角色",dataIndex:"role",key:"role",width:"20%",ellipsis:!0,render:function(e,t){var r=t.roleList;return r.length>0?w.default.createElement(h.default,null,r.map((function(e){return w.default.createElement("span",{key:e.id},e.dmRole.role.name)}))):"--"}},{title:L("orga-table.type"),dataIndex:["user","dirId"],key:"dirId",width:"15%",ellipsis:!0,render:function(e){var t=re.findIndex((function(t){return t.id===e}));return t>-1?re[t].name:"--"}},{title:L("orga-common.action"),key:"action",width:"10%",ellipsis:!0,render:function(e,t){var r=t.user;return w.default.createElement(h.default,{size:"middle"},w.default.createElement(b.default,{title:"角色修改"},w.default.createElement(y.default,{onClick:function(){return Pe(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),1!==r.type&&w.default.createElement(b.default,{title:"删除"},w.default.createElement(v.default,{onClick:function(){return ke(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}];(0,w.useEffect)((function(){he(),we()}),[]),(0,w.useEffect)((function(){Oe(U({domainId:t},ve))}),[ve]);var he=function(){z().then((function(e){e.code||ae(e.data)}))},Oe=function(e){C(e).then(function(){var e=(0,m.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code){e.next=6;break}return pe({record:t.data.totalRecord,total:t.data.totalPage}),e.next=4,Promise.all(Ee(t.data.dataList));case 4:r=e.sent,P(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Ee=function(e){return e.map(function(){var e=(0,m.default)(u.default.mark((function e(r){var a,n,l,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,R({domainId:t,userId:r.user.id});case 3:return 0===(l=e.sent).code&&l.data&&(a=l.data.map((function(e){return{dmRole:U(U({},e.dmRole),{},{role:e.role}),roleUserId:e.id}}))),e.next=7,T({userId:r.user.id,scope:1,type:1});case 7:return 0===(i=e.sent).code&&i.data&&(n=i.data.slice(-1).map((function(e){return U(U({},e.orga),{},{orgaUserId:e.id})}))),e.abrupt("return",U(U({},r),{},{roleList:a,orgaList:n}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},we=function(){N({domainId:t}).then((function(e){e.code||K(e.data)}))},Pe=function(e){var t=e.roleList;W.setFieldsValue({role:t.map((function(e){return e.dmRole.id}))}),Y(e),X(!0)},ke=function(e){A(e).then((function(e){e.code||be({pageParam:ce})}))},je=function(){be({pageParam:ce})},Se=function(){W.resetFields(),X(!1)},xe=function(e){var t=e.map((function(e){return D(e)}));return Promise.all(t)},_e=function(e,r){var a={bgroup:g,userId:r,domainId:t};if(Array.isArray(e)){var n=e.map((function(e){var t=U(U({},a),{},{dmRole:{id:e}});return I(t)}));Promise.all(n).then((function(e){Se()}))}else a=U(U({},a),{},{dmRole:{id:e}}),M(a).then((function(e){0===e.code&&Se()}))};return w.default.createElement("div",{className:"privilege-domain-user"},w.default.createElement("div",{className:"privilege-domain-user-content"},w.default.createElement(j.TitleAction,{title:"成员",style:{paddingLeft:8}},w.default.createElement(j.Btn,{onClick:function(){return ie(!0)},icon:w.default.createElement(p.default,null),type:"primary",title:L("orga-label.addUser")})),w.default.createElement(d.default,{style:{paddingBottom:"var(--tiklab-padding-item)",paddingLeft:8},justify:"space-between"},w.default.createElement(f.default,{placeholder:L("orga-label.searchUserPhoneEmail"),onPressEnter:function(e){return function(e){var t=U(U({},ve),{},{pageParam:ce});e.target.value?t.nickname=e.target.value:delete t.nickname,be(t)}(e)},prefix:w.default.createElement(s.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),style:{width:"240px"}})),w.default.createElement(d.default,null,w.default.createElement(o.default,{span:24},w.default.createElement(c.default,{columns:ye,dataSource:S,rowKey:function(e){return e.id},tableLayout:"fixed",pagination:!1}),se&&se.total>1&&w.default.createElement(j.Page,{pageCurrent:ve.pageParam.currentPage,changPage:function(e){var t=U(U({},ve),{},{pageParam:{pageSize:13,currentPage:e}});be(t)},page:se})))),w.default.createElement(x.default,(0,i.default)({},e,{domainId:t,visible:le,setVisible:ie,userDir:re,initParam:je})),w.default.createElement(j.BaseModal,{title:"修改角色",visible:Q,onCancel:Se,footer:w.default.createElement(w.default.Fragment,null,w.default.createElement(j.Btn,{onClick:Se,title:"取消",isMar:!0}),w.default.createElement(j.Btn,{onClick:function(){W.submit()},title:"确定",type:"primary"})),destroyOnClose:!0,cancelText:L("orga-common.back"),okText:L("orga-common.save")},w.default.createElement(O.default,{form:W,onFinish:function(e){var t=(0,_.toJS)(H),r=t.user.id,a=(t.roleList||[]).map((function(e){return e.dmRole.id})),n=e.role,u=a.filter((function(e){return!n.includes(e)})),l=(t.roleList||[]).map((function(e){if(u.includes(e.dmRole.id))return e.roleUserId})).filter(Boolean);0===l.length?_e(n,r):xe(l).then((function(){_e(n,r)})),je()},preserve:!1,layout:"vertical"},w.default.createElement(O.default.Item,{label:"角色",name:"role",rules:[{required:!0,message:L("adduser-module.userTypeRequired")}]},w.default.createElement(l.default,{mode:"multiple"},q.map((function(e){return w.default.createElement(l.default.Option,{key:e.id,value:e.id},e.role.name)})))))))})));t.default=A},1389:function(e,t,r){"use strict";var a=r(18),n=r(43);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(168));r(97);var l=a(r(52));r(69);var i=a(r(28));r(75);var o=a(r(23));r(90);var c=a(r(34)),d=a(r(138)),f=a(r(137)),s=a(r(67));r(111);var p=a(r(44)),m=a(r(169));r(54);var g=a(r(27)),v=a(r(35)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r(0)),y=r(749),h=r(64);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){i=!0,u=e},f:function(){try{l||null==r.return||r.return()}finally{if(i)throw u}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var j=function(e){var t=(0,h.useTranslation)().t,r=e.visible,a=e.setVisible,n=e.initParam,s=e.domainId,O=e.userDir,E=e.domainUserStore,k=e.userStore,j=E.createDmUserAction,S=E.findDmUserListAction,x=k.findUserPageAction,_=(0,b.useState)([]),I=(0,v.default)(_,2),D=I[0],U=I[1],A=(0,b.useState)([]),N=(0,v.default)(A,2),R=N[0],C=N[1],M=(0,b.useState)(6),T=(0,v.default)(M,1)[0],z=(0,b.useState)(1),L=(0,v.default)(z,2),B=L[0],W=L[1],F=(0,b.useState)({}),G=(0,v.default)(F,2),q=G[0],K=G[1],V=(0,b.useState)({pageParam:{pageSize:T,currentPage:B}}),J=(0,v.default)(V,2),H=J[0],Y=J[1],$=[{title:t("orga-table.nickname"),dataIndex:"nickname",key:"nickname",width:"30%",ellipsis:!0,render:function(e,t){return b.default.createElement(g.default,null,b.default.createElement(y.Profile,{userInfo:t})," ",e)}},{title:t("orga-table.phone"),dataIndex:"phone",key:"phone",width:"30%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("orga-table.email"),dataIndex:"email",key:"email",width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("orga-table.type"),dataIndex:"dirId",key:"dirId",width:"15%",ellipsis:!0,render:function(e){var t=O.findIndex((function(t){return t.id==e}));return t>-1?O[t].name:"--"}}];(0,b.useEffect)((function(){Z(H)}),[H]);var Z=function(e){x(e).then(function(){var e=(0,m.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.code||(K({total:t.data.totalPage}),C(t.data.dataList));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Q=function(){U([]),W(1),Y({pageParam:{pageSize:T,currentPage:1}}),K({}),a(!1)},X={selectedRowKeys:D,onSelect:function(e){ee(e)},onSelectAll:function(e,t,r){var a=r.map((function(e){return e&&e.id})).filter((function(e){return void 0!==e}));if(e){var n=Array.from(new Set([].concat((0,f.default)(a),(0,f.default)(D))));U(n)}else{var u=D.filter((function(e){return!a.includes(e)}));U(u)}}},ee=function(e){D.indexOf(e.id)>=0?D.splice(D.indexOf(e.id),1):D.push(e.id),U((0,f.default)(D))},te=b.default.createElement(b.default.Fragment,null,b.default.createElement(y.Btn,{onClick:Q,title:"取消",isMar:!0}),b.default.createElement(y.Btn,{onClick:function(){S({domainId:s}).then((function(e){if(!e.code){var t,r=!1,a=e.data.map((function(e){return e.user.id})),u=P(D);try{var l=function(){var e=t.value;if(r)return"break";r=a.some((function(t){return e===t}))};for(u.s();!(t=u.n()).done;){if("break"===l())break}}catch(e){u.e(e)}finally{u.f()}if(r)return p.default.error("存在关联的用户");var i=D.map((function(e){return j({domainId:s,user:{id:e}})}));Promise.all(i).then((function(e){Q(),n()}))}}))},title:"确定",type:"primary"}));return b.default.createElement(y.BaseModal,{title:"添加用户",visible:r,footer:te,onCancel:Q,width:700,destroyOnClose:!0,cancelText:t("orga-common.back"),okText:t("orga-common.save")},b.default.createElement(i.default,null,b.default.createElement(o.default,{span:24},b.default.createElement(c.default,{placeholder:"昵称搜索",prefix:b.default.createElement(d.default,null),style:{width:240},onPressEnter:function(e){return function(e){var t={nickname:e.target.value,pageParam:{pageSize:T,currentPage:1}};W(1),Y(t)}(e)}}))),b.default.createElement(i.default,null,b.default.createElement(o.default,{span:24},b.default.createElement("div",{style:{width:"100%"}},b.default.createElement(l.default,{columns:$,dataSource:R,rowSelection:X,onRow:function(e){return{onClick:function(){return ee(e)}}},rowKey:function(e){return e.id},pagination:!1}),q&&q.total>1&&b.default.createElement(y.Page,{pageCurrent:B,changPage:function(e){W(e);var t=w(w({},H),{},{pageParam:{pageSize:T,currentPage:e}});Y(t)},page:q})))))},S=function(e,t){return e.visible===t.visible},x=(0,b.memo)(j,S);t.default=x},206:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DOMAIN_USER_STORE",{enumerable:!0,get:function(){return u.DOMAIN_USER_STORE}}),Object.defineProperty(t,"ORG_STORE",{enumerable:!0,get:function(){return l.ORG_STORE}}),Object.defineProperty(t,"USER_STORE",{enumerable:!0,get:function(){return i.USER_STORE}}),t.orgStores=void 0;var n=a(r(67)),u=r(441),l=r(442),i=r(437);var o,c=(o={},(0,n.default)(o,l.ORG_STORE,new l.OrgStore),(0,n.default)(o,i.USER_STORE,new i.UserStore),(0,n.default)(o,u.DOMAIN_USER_STORE,new u.DomainUserStore),o);t.orgStores=c},316:function(e){e.exports=JSON.parse('{"orga-common":{"delete":"删除","edit":"编辑","action":"操作","save":"保存","back":"取消","search":"搜索","add":"添加","orga":"组织","name":"名称","detail":"详情","close":"关闭"},"orga-table":{"name":"账号","nickname":"昵称","phone":"手机号","email":"邮箱","org":"部门","account":"帐号","orgaName":"所属机构","password":"初始密码","type":"用户目录","typeChild":"目录二级","thirdparty":"LDAP/AP","internal":"内部目录","dingding":"钉钉","acc":"ACC","wechat":"企业微信","all":"所有"},"adduser-module":{"addUser":"添加用户","editUser":"编辑用户","detailUser":"详情用户","userType":"用户类型","name":"账号","nickname":"昵称","phone":"手机号","email":"邮箱","org":"部门","account":"帐号","orgaName":"所属机构","password":"初始密码","type":"用户目录","typeChild":"目录二级","thirdparty":"LDAP/AP","internal":"内部目录","dingding":"钉钉","acc":"ACC","wechat":"企业微信","all":"所有","userTypeRequired":"用户类型必填!","emailRequired":"邮箱必填!","emailFormat":"邮箱格式不正确!","passwordRequired":"密码必填!","phoneRequired":"手机号必填!","nameRequired":"账号必填!","nicknameRequired":"请输入昵称!"},"orga-label":{"addUser":"添加用户","orgaName":"机构名称","parentOrg":"上级机构","parentOrgPlaceholder":"请选择上级机构","parentOrgRequired":"上级机构必填!","user":"用户","searchUser":"搜索用户名称","searchUserPhoneEmail":"搜索姓名、手机号、邮箱","searchUserAccount":"搜索用户名、帐号","userType":"用户目录"},"orga-tab":{"all":"全部","in":"内部","out":"外部"}}')},366:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"user_cn",{enumerable:!0,get:function(){return n.default}});var n=a(r(443))},437:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.UserStore=t.USER_STORE=void 0;var n,u,l,i,o,c,d,f,s,p,m,g,v,b,y,h,O,E,w,P,k,j,S,x=a(r(168)),_=a(r(169)),I=a(r(125)),D=a(r(105)),U=a(r(104)),A=(a(r(67)),a(r(126))),N=(a(r(127)),r(10)),R=r(8),C=(n=(0,D.default)((function e(){(0,U.default)(this,e),(0,I.default)(this,"userData",u,this),(0,I.default)(this,"rolePage",l,this),(0,I.default)(this,"qywxconfig",i,this),(0,I.default)(this,"agentConfig",o,this),(0,I.default)(this,"getUserList",c,this),(0,I.default)(this,"editUser",d,this),(0,I.default)(this,"addUser",f,this),(0,I.default)(this,"deleteUser",s,this),(0,I.default)(this,"findUserPageAction",p,this),(0,I.default)(this,"findUser",m,this),(0,I.default)(this,"createUserAction",g,this),(0,I.default)(this,"updateUserAction",v,this),(0,I.default)(this,"deleteUserAction",b,this),(0,I.default)(this,"findRolePageAction",y,this),(0,I.default)(this,"deleteRoleUserAction",h,this),(0,I.default)(this,"createRoleUserAction",O,this),(0,I.default)(this,"findRoleUserListAction",E,this),(0,I.default)(this,"findRoleUserPageAction",w,this),(0,I.default)(this,"findUserOrgaList",P,this),(0,I.default)(this,"findUserDirList",k,this),(0,I.default)(this,"findWeChatContactConfig",j,this),(0,I.default)(this,"findWeChatApplyContactConfig",S,this)})),u=(0,A.default)(n.prototype,"userData",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,A.default)(n.prototype,"rolePage",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{defaultCurrent:1,pageSize:6,total:1}}}),i=(0,A.default)(n.prototype,"qywxconfig",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,A.default)(n.prototype,"agentConfig",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=(0,A.default)(n.prototype,"getUserList",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=t}}}),d=(0,A.default)(n.prototype,"editUser",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=e.userData.map((function(e){return e.id===t.id?t:e}))}}}),f=(0,A.default)(n.prototype,"addUser",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=e.userData.concat(t)}}}),s=(0,A.default)(n.prototype,"deleteUser",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=e.userData.filter((function(e){return e.id!==t}))}}}),p=(0,A.default)(n.prototype,"findUserPageAction",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,_.default)(x.default.mark((function e(t,r){return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/user/user/findUserPage",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),m=(0,A.default)(n.prototype,"findUser",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,_.default)(x.default.mark((function e(t,r){var a;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("id",t),e.next=4,R.Axios.post("/user/user/findUser",a,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),g=(0,A.default)(n.prototype,"createUserAction",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,_.default)(x.default.mark((function e(t,r){return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/user/user/createUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),v=(0,A.default)(n.prototype,"updateUserAction",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,_.default)(x.default.mark((function e(t,r){return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/user/user/updateUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),b=(0,A.default)(n.prototype,"deleteUserAction",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,_.default)(x.default.mark((function e(t,r){return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/user/user/deleteUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),y=(0,A.default)(n.prototype,"findRolePageAction",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,_.default)(x.default.mark((function t(r,a){var n;return x.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.Axios.post("/role/findRolePage",r,a);case 2:return 0===(n=t.sent).code&&(e.rolePage=n.data.totalPage),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}}),h=(0,A.default)(n.prototype,"deleteRoleUserAction",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,_.default)(x.default.mark((function e(t,r){var a;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("id",t),e.next=4,R.Axios.post("/roleUser/deleteRoleUser",a,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),O=(0,A.default)(n.prototype,"createRoleUserAction",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,_.default)(x.default.mark((function e(t,r){return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/roleUser/createRoleUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),E=(0,A.default)(n.prototype,"findRoleUserListAction",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,_.default)(x.default.mark((function e(t,r){return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/roleUser/findRoleUserList",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),w=(0,A.default)(n.prototype,"findRoleUserPageAction",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,_.default)(x.default.mark((function e(t,r){return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/roleUser/findRoleUserPage",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),P=(0,A.default)(n.prototype,"findUserOrgaList",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,_.default)(x.default.mark((function e(t,r){return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/user/userOrga/findUserOrgaList",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),k=(0,A.default)(n.prototype,"findUserDirList",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,_.default)(x.default.mark((function e(t,r){return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/user/userdir/findAllList",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),j=(0,A.default)(n.prototype,"findWeChatContactConfig",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,_.default)(x.default.mark((function t(r,a){var n,u;return x.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("url",r),n.append("tenantId",a),t.next=5,R.Axios.post("/wechatApplyToken/findWeChatContactConfig",n,{tenant:a});case 5:return 0===(u=t.sent).code&&(e.qywxconfig=u.data),t.abrupt("return",u);case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}}),S=(0,A.default)(n.prototype,"findWeChatApplyContactConfig",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,_.default)(x.default.mark((function t(r,a){var n,u;return x.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("url",r),n.append("tenantId",a),t.next=5,R.Axios.post("/wechatApplyToken/findWeChatApplyContactConfig",n,{tenant:a});case 5:return 0===(u=t.sent).code&&(e.agentConfig=u.data),t.abrupt("return",u);case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}}),n);t.UserStore=C;t.USER_STORE="userStore"},441:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.DomainUserStore=t.DOMAIN_USER_STORE=void 0;var n,u,l,i,o=a(r(168)),c=a(r(169)),d=a(r(125)),f=a(r(105)),s=a(r(104)),p=a(r(67)),m=a(r(126)),g=(a(r(127)),r(10)),v=r(8),b=(n=(0,f.default)((function e(){(0,s.default)(this,e),(0,d.default)(this,"privilegeDomainUsers",u,this),(0,d.default)(this,"getDomainUser",l,this),(0,d.default)(this,"deleteDomainUser",i,this),(0,p.default)(this,"findDmUserPageAction",function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Axios.post("/dmUser/findDmUserPage",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"deleteDmUserAction",function(){var e=(0,c.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,v.Axios.post("/dmUser/deleteDmUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"findDmUserListAction",function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Axios.post("/dmUser/findDmUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"createDmUserAction",function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Axios.post("/dmUser/createDmUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"findDmRoleUserListAction",function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Axios.post("/dmRoleUser/findDmRoleUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"createDmRoleUserAction",function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Axios.post("/dmRoleUser/createDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"deleteDmRoleUserAction",function(){var e=(0,c.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,v.Axios.post("/dmRoleUser/deleteDmRoleUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"findDmRoleListAction",function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Axios.post("/dmRole/findDmRoleList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),u=(0,m.default)(n.prototype,"privilegeDomainUsers",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,m.default)(n.prototype,"getDomainUser",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeDomainUsers=t}}}),i=(0,m.default)(n.prototype,"deleteDomainUser",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeDomainUsers=e.privilegeDomainUsers.filter((function(e){return e.id!==t}))}}}),n);t.DomainUserStore=b;t.DOMAIN_USER_STORE="domainUserStore"},442:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.OrgStore=t.ORG_STORE=void 0;var n,u,l,i,o,c,d,f,s,p,m,g,v,b=a(r(168)),y=a(r(169)),h=a(r(125)),O=a(r(105)),E=a(r(104)),w=a(r(67)),P=a(r(126)),k=(a(r(127)),r(10)),j=r(8);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,w.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=(n=(0,O.default)((function e(){(0,E.default)(this,e),(0,h.default)(this,"treeData",u,this),(0,h.default)(this,"selectData",l,this),(0,h.default)(this,"selectTreeOrgDetail",i,this),(0,h.default)(this,"addTree",o,this),(0,h.default)(this,"editTree",c,this),(0,h.default)(this,"findOpenUserDirListAction",d,this),(0,h.default)(this,"deleteOrgaAction",f,this),(0,h.default)(this,"findOrgaAction",s,this),(0,h.default)(this,"findOrgaTreeAction",p,this),(0,h.default)(this,"deleteUserOrgaAction",m,this),(0,h.default)(this,"findUserOrgaPageAction",g,this),(0,h.default)(this,"updateOrgaSortAction",v,this)})),u=(0,P.default)(n.prototype,"treeData",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,P.default)(n.prototype,"selectData",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=(0,P.default)(n.prototype,"selectTreeOrgDetail",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectData=t}}}),o=(0,P.default)(n.prototype,"addTree",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.treeData=e.treeData.map((function(e){return e.children?x(x({},e),{},{children:e.children.concat(t)}):x(x({},e),{},{children:[t]})}))}}}),c=(0,P.default)(n.prototype,"editTree",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.treeData=e.treeData.map((function(e){return e.orgaId===t.orgaId?x(x({},e),t):(e.children=e.children.map((function(e){return e.orgaId===t.orgaId?x(x({},e),t):e})),e)}))}}}),d=(0,P.default)(n.prototype,"findOpenUserDirListAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,y.default)(b.default.mark((function e(){return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Axios.post("/user/userdir/findOpenList");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),f=(0,P.default)(n.prototype,"deleteOrgaAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,y.default)(b.default.mark((function t(r){var a,n;return b.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("id",r),t.next=4,j.Axios.post("/user/orga/deleteOrga",a);case 4:return(n=t.sent).code||(e.treeData=e.treeData.filter((function(e){if(e.orgaId!==r)return e.children&&e.children.length>0&&(e.children=e.children.filter((function(e){return e.orgaId!==r}))),e}))),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),s=(0,P.default)(n.prototype,"findOrgaAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,y.default)(b.default.mark((function e(t){var r;return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,j.Axios.post("/user/orga/findOrga",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),p=(0,P.default)(n.prototype,"findOrgaTreeAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,y.default)(b.default.mark((function t(r){var a;return b.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.Axios.post("/user/orga/findOrgaTree",r);case 2:return(a=t.sent).code||(e.treeData=a.data),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),m=(0,P.default)(n.prototype,"deleteUserOrgaAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,y.default)(b.default.mark((function e(t){var r;return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,j.Axios.post("/user/userOrga/deleteUserOrga",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),g=(0,P.default)(n.prototype,"findUserOrgaPageAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,y.default)(b.default.mark((function e(t){var r;return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Axios.post("/user/userOrga/findUserOrgaPage",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),v=(0,P.default)(n.prototype,"updateOrgaSortAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,y.default)(b.default.mark((function e(t){return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Axios.post("/user/orga/updateSort",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),n);t.OrgStore=_;t.ORG_STORE="orgStore"},443:function(e,t,r){"use strict";r.r(t);var a=r(316);t.default=a},749:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseModal",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"BreadCrumb",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Btn",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Profile",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"TitleAction",{enumerable:!0,get:function(){return i.default}});var n=a(r(1354)),u=a(r(1356)),l=a(r(1358)),i=a(r(1360)),o=a(r(1362)),c=a(r(1364))},874:function(e,t,r){"use strict";var a=r(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(0)),u=r(8);r(1367);var l=function(e){var t=e.link,r=e.module,a=(0,u.getUser)(),l=a.ticket?"".concat(t,"?").concat((0,u.parseUserSearchParams)({ticket:a.ticket})):t;return n.default.createElement("div",{className:"tiklab_mask"},n.default.createElement("p",null,"当前为统一登录模式"),n.default.createElement("div",{className:"tiklab_mask_action",onClick:function(){window.open(l)}},"请前往EAS进行",r,"相关操作。"))};t.default=l}}]);